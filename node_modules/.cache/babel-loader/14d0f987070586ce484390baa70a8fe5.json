{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { useAppDispatch } from 'state';\nimport { updateUserStakedBalance, updateUserBalance } from 'state/actions';\nimport { stakeFarm } from 'utils/calls';\nimport BigNumber from 'bignumber.js';\nimport { DEFAULT_TOKEN_DECIMAL, DEFAULT_GAS_LIMIT } from 'config';\nimport { BIG_TEN } from 'utils/bigNumber';\nimport { useMasterchef, useSousChef } from 'hooks/useContract';\nconst options = {\n  gasLimit: DEFAULT_GAS_LIMIT\n};\nconst sousStake = async (sousChefContract, amount, decimals = 18) => {\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(BIG_TEN.pow(decimals)).toString(), options);\n  const receipt = await tx.wait();\n  return receipt.status;\n};\nconst sousStakeBnb = async (sousChefContract, amount) => {\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString(), options);\n  const receipt = await tx.wait();\n  return receipt.status;\n};\nconst useStakePool = (sousId, isUsingBnb = false) => {\n  _s();\n  const dispatch = useAppDispatch();\n  const {\n    account\n  } = useWeb3React();\n  const masterChefContract = useMasterchef();\n  const sousChefContract = useSousChef(sousId);\n  const handleStake = useCallback(async (amount, decimals) => {\n    if (sousId === 0) {\n      await stakeFarm(masterChefContract, 0, amount);\n    } else if (isUsingBnb) {\n      await sousStakeBnb(sousChefContract, amount);\n    } else {\n      await sousStake(sousChefContract, amount, decimals);\n    }\n    dispatch(updateUserStakedBalance(sousId, account));\n    dispatch(updateUserBalance(sousId, account));\n  }, [account, dispatch, isUsingBnb, masterChefContract, sousChefContract, sousId]);\n  return {\n    onStake: handleStake\n  };\n};\n_s(useStakePool, \"vpe8vSSPvb8ajwzF6csd4rEGZXU=\", false, function () {\n  return [useAppDispatch, useWeb3React, useMasterchef, useSousChef];\n});\nexport default useStakePool;","map":{"version":3,"names":["useCallback","useWeb3React","useAppDispatch","updateUserStakedBalance","updateUserBalance","stakeFarm","BigNumber","DEFAULT_TOKEN_DECIMAL","DEFAULT_GAS_LIMIT","BIG_TEN","useMasterchef","useSousChef","options","gasLimit","sousStake","sousChefContract","amount","decimals","tx","deposit","times","pow","toString","receipt","wait","status","sousStakeBnb","useStakePool","sousId","isUsingBnb","_s","dispatch","account","masterChefContract","handleStake","onStake"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Pools/hooks/useStakePool.ts"],"sourcesContent":["import { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserStakedBalance, updateUserBalance } from 'state/actions'\r\nimport { stakeFarm } from 'utils/calls'\r\nimport BigNumber from 'bignumber.js'\r\nimport { DEFAULT_TOKEN_DECIMAL, DEFAULT_GAS_LIMIT } from 'config'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\nimport { useMasterchef, useSousChef } from 'hooks/useContract'\r\n\r\nconst options = {\r\n  gasLimit: DEFAULT_GAS_LIMIT,\r\n}\r\n\r\nconst sousStake = async (sousChefContract, amount, decimals = 18) => {\r\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(BIG_TEN.pow(decimals)).toString(), options)\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst sousStakeBnb = async (sousChefContract, amount) => {\r\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString(), options)\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst useStakePool = (sousId: number, isUsingBnb = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleStake = useCallback(\r\n    async (amount: string, decimals: number) => {\r\n      if (sousId === 0) {\r\n        await stakeFarm(masterChefContract, 0, amount)\r\n      } else if (isUsingBnb) {\r\n        await sousStakeBnb(sousChefContract, amount)\r\n      } else {\r\n        await sousStake(sousChefContract, amount, decimals)\r\n      }\r\n      dispatch(updateUserStakedBalance(sousId, account))\r\n      dispatch(updateUserBalance(sousId, account))\r\n    },\r\n    [account, dispatch, isUsingBnb, masterChefContract, sousChefContract, sousId],\r\n  )\r\n\r\n  return { onStake: handleStake }\r\n}\r\n\r\nexport default useStakePool\r\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,YAAY,QAAQ,kBAAkB;AAC/C,SAASC,cAAc,QAAQ,OAAO;AACtC,SAASC,uBAAuB,EAAEC,iBAAiB,QAAQ,eAAe;AAC1E,SAASC,SAAS,QAAQ,aAAa;AACvC,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,qBAAqB,EAAEC,iBAAiB,QAAQ,QAAQ;AACjE,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,aAAa,EAAEC,WAAW,QAAQ,mBAAmB;AAE9D,MAAMC,OAAO,GAAG;EACdC,QAAQ,EAAEL;AACZ,CAAC;AAED,MAAMM,SAAS,GAAG,MAAAA,CAAOC,gBAAgB,EAAEC,MAAM,EAAEC,QAAQ,GAAG,EAAE,KAAK;EACnE,MAAMC,EAAE,GAAG,MAAMH,gBAAgB,CAACI,OAAO,CAAC,IAAIb,SAAS,CAACU,MAAM,CAAC,CAACI,KAAK,CAACX,OAAO,CAACY,GAAG,CAACJ,QAAQ,CAAC,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAEV,OAAO,CAAC;EACjH,MAAMW,OAAO,GAAG,MAAML,EAAE,CAACM,IAAI,CAAC,CAAC;EAC/B,OAAOD,OAAO,CAACE,MAAM;AACvB,CAAC;AAED,MAAMC,YAAY,GAAG,MAAAA,CAAOX,gBAAgB,EAAEC,MAAM,KAAK;EACvD,MAAME,EAAE,GAAG,MAAMH,gBAAgB,CAACI,OAAO,CAAC,IAAIb,SAAS,CAACU,MAAM,CAAC,CAACI,KAAK,CAACb,qBAAqB,CAAC,CAACe,QAAQ,CAAC,CAAC,EAAEV,OAAO,CAAC;EACjH,MAAMW,OAAO,GAAG,MAAML,EAAE,CAACM,IAAI,CAAC,CAAC;EAC/B,OAAOD,OAAO,CAACE,MAAM;AACvB,CAAC;AAED,MAAME,YAAY,GAAGA,CAACC,MAAc,EAAEC,UAAU,GAAG,KAAK,KAAK;EAAAC,EAAA;EAC3D,MAAMC,QAAQ,GAAG7B,cAAc,CAAC,CAAC;EACjC,MAAM;IAAE8B;EAAQ,CAAC,GAAG/B,YAAY,CAAC,CAAC;EAClC,MAAMgC,kBAAkB,GAAGvB,aAAa,CAAC,CAAC;EAC1C,MAAMK,gBAAgB,GAAGJ,WAAW,CAACiB,MAAM,CAAC;EAE5C,MAAMM,WAAW,GAAGlC,WAAW,CAC7B,OAAOgB,MAAc,EAAEC,QAAgB,KAAK;IAC1C,IAAIW,MAAM,KAAK,CAAC,EAAE;MAChB,MAAMvB,SAAS,CAAC4B,kBAAkB,EAAE,CAAC,EAAEjB,MAAM,CAAC;IAChD,CAAC,MAAM,IAAIa,UAAU,EAAE;MACrB,MAAMH,YAAY,CAACX,gBAAgB,EAAEC,MAAM,CAAC;IAC9C,CAAC,MAAM;MACL,MAAMF,SAAS,CAACC,gBAAgB,EAAEC,MAAM,EAAEC,QAAQ,CAAC;IACrD;IACAc,QAAQ,CAAC5B,uBAAuB,CAACyB,MAAM,EAAEI,OAAO,CAAC,CAAC;IAClDD,QAAQ,CAAC3B,iBAAiB,CAACwB,MAAM,EAAEI,OAAO,CAAC,CAAC;EAC9C,CAAC,EACD,CAACA,OAAO,EAAED,QAAQ,EAAEF,UAAU,EAAEI,kBAAkB,EAAElB,gBAAgB,EAAEa,MAAM,CAC9E,CAAC;EAED,OAAO;IAAEO,OAAO,EAAED;EAAY,CAAC;AACjC,CAAC;AAAAJ,EAAA,CAtBKH,YAAY;EAAA,QACCzB,cAAc,EACXD,YAAY,EACLS,aAAa,EACfC,WAAW;AAAA;AAoBtC,eAAegB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}