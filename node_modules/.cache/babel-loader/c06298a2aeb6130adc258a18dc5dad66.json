{"ast":null,"code":"import{useCallback}from'react';import{useWeb3React}from'@web3-react/core';import{useAppDispatch}from'state';import{updateUserStakedBalance,updateUserBalance}from'state/actions';import{stakeFarm}from'utils/calls';import BigNumber from'bignumber.js';import{DEFAULT_TOKEN_DECIMAL,DEFAULT_GAS_LIMIT}from'config';import{BIG_TEN}from'utils/bigNumber';import{useMasterchef,useSousChef}from'hooks/useContract';const options={gasLimit:DEFAULT_GAS_LIMIT};const sousStake=async function(sousChefContract,amount){let decimals=arguments.length>2&&arguments[2]!==undefined?arguments[2]:18;const tx=await sousChefContract.deposit(new BigNumber(amount).times(BIG_TEN.pow(decimals)).toString(),options);const receipt=await tx.wait();return receipt.status;};const sousStakeBnb=async(sousChefContract,amount)=>{const tx=await sousChefContract.deposit(new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString(),options);const receipt=await tx.wait();return receipt.status;};const useStakePool=function(sousId){let isUsingBnb=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const dispatch=useAppDispatch();const{account}=useWeb3React();const masterChefContract=useMasterchef();const sousChefContract=useSousChef(sousId);const handleStake=useCallback(async(amount,decimals)=>{if(sousId===0){await stakeFarm(masterChefContract,0,amount);}else if(isUsingBnb){await sousStakeBnb(sousChefContract,amount);}else{await sousStake(sousChefContract,amount,decimals);}dispatch(updateUserStakedBalance(sousId,account));dispatch(updateUserBalance(sousId,account));},[account,dispatch,isUsingBnb,masterChefContract,sousChefContract,sousId]);return{onStake:handleStake};};export default useStakePool;","map":{"version":3,"names":["useCallback","useWeb3React","useAppDispatch","updateUserStakedBalance","updateUserBalance","stakeFarm","BigNumber","DEFAULT_TOKEN_DECIMAL","DEFAULT_GAS_LIMIT","BIG_TEN","useMasterchef","useSousChef","options","gasLimit","sousStake","sousChefContract","amount","decimals","arguments","length","undefined","tx","deposit","times","pow","toString","receipt","wait","status","sousStakeBnb","useStakePool","sousId","isUsingBnb","dispatch","account","masterChefContract","handleStake","onStake"],"sources":["C:/Users/Devrim/Documents/FRANKswapUIforProspBlast/src/views/Pools/hooks/useStakePool.ts"],"sourcesContent":["import { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserStakedBalance, updateUserBalance } from 'state/actions'\r\nimport { stakeFarm } from 'utils/calls'\r\nimport BigNumber from 'bignumber.js'\r\nimport { DEFAULT_TOKEN_DECIMAL, DEFAULT_GAS_LIMIT } from 'config'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\nimport { useMasterchef, useSousChef } from 'hooks/useContract'\r\n\r\nconst options = {\r\n  gasLimit: DEFAULT_GAS_LIMIT,\r\n}\r\n\r\nconst sousStake = async (sousChefContract, amount, decimals = 18) => {\r\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(BIG_TEN.pow(decimals)).toString(), options)\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst sousStakeBnb = async (sousChefContract, amount) => {\r\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString(), options)\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst useStakePool = (sousId: number, isUsingBnb = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleStake = useCallback(\r\n    async (amount: string, decimals: number) => {\r\n      if (sousId === 0) {\r\n        await stakeFarm(masterChefContract, 0, amount)\r\n      } else if (isUsingBnb) {\r\n        await sousStakeBnb(sousChefContract, amount)\r\n      } else {\r\n        await sousStake(sousChefContract, amount, decimals)\r\n      }\r\n      dispatch(updateUserStakedBalance(sousId, account))\r\n      dispatch(updateUserBalance(sousId, account))\r\n    },\r\n    [account, dispatch, isUsingBnb, masterChefContract, sousChefContract, sousId],\r\n  )\r\n\r\n  return { onStake: handleStake }\r\n}\r\n\r\nexport default useStakePool\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}