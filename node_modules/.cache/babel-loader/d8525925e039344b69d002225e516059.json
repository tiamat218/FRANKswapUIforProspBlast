{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/frkul/Documents/swapUI_pancake-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useCallback}from'react';import{useWeb3React}from'@web3-react/core';import styled from'styled-components';import BigNumber from'bignumber.js';import{Button,Flex,Heading,IconButton,AddIcon,MinusIcon,useModal}from'@pancakeswap/uikit';import{useLocation}from'react-router-dom';import Balance from'components/Balance';import{useTranslation}from'contexts/Localization';import{useAppDispatch}from'state';import{fetchFarmUserDataAsync}from'state/farms';import{useLpTokenPrice}from'state/farms/hooks';import{getBalanceAmount,getBalanceNumber,getFullDisplayBalance}from'utils/formatBalance';import DepositModal from'../DepositModal';import WithdrawModal from'../WithdrawModal';import useUnstakeFarms from'../../hooks/useUnstakeFarms';import useStakeFarms from'../../hooks/useStakeFarms';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const IconButtonWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  svg {\\n    width: 20px;\\n  }\\n\"])));const StakeAction=_ref=>{let{stakedBalance,tokenBalance,tokenName,pid,addLiquidityUrl}=_ref;const{t}=useTranslation();const{onStake}=useStakeFarms(pid);const{onUnstake}=useUnstakeFarms(pid);const location=useLocation();const dispatch=useAppDispatch();const{account}=useWeb3React();const lpPrice=useLpTokenPrice(tokenName);const handleStake=async amount=>{await onStake(amount);dispatch(fetchFarmUserDataAsync({account,pids:[pid]}));};const handleUnstake=async amount=>{await onUnstake(amount);dispatch(fetchFarmUserDataAsync({account,pids:[pid]}));};const displayBalance=useCallback(()=>{const stakedBalanceBigNumber=getBalanceAmount(stakedBalance);if(stakedBalanceBigNumber.gt(0)&&stakedBalanceBigNumber.lt(0.0000001)){return stakedBalanceBigNumber.toFixed(10,BigNumber.ROUND_DOWN);}if(stakedBalanceBigNumber.gt(0)&&stakedBalanceBigNumber.lt(0.0001)){return getFullDisplayBalance(stakedBalance).toLocaleString();}return stakedBalanceBigNumber.toFixed(3,BigNumber.ROUND_DOWN);},[stakedBalance]);const[onPresentDeposit]=useModal(/*#__PURE__*/_jsx(DepositModal,{max:tokenBalance,onConfirm:handleStake,tokenName:tokenName,addLiquidityUrl:addLiquidityUrl}));const[onPresentWithdraw]=useModal(/*#__PURE__*/_jsx(WithdrawModal,{max:stakedBalance,onConfirm:handleUnstake,tokenName:tokenName}));const renderStakingButtons=()=>{return stakedBalance.eq(0)?/*#__PURE__*/_jsx(Button,{onClick:onPresentDeposit,disabled:['history','archived'].some(item=>location.pathname.includes(item)),children:t('Stake LP')}):/*#__PURE__*/_jsxs(IconButtonWrapper,{children:[/*#__PURE__*/_jsx(IconButton,{variant:\"tertiary\",onClick:onPresentWithdraw,mr:\"6px\",children:/*#__PURE__*/_jsx(MinusIcon,{color:\"primary\",width:\"14px\"})}),/*#__PURE__*/_jsx(IconButton,{variant:\"tertiary\",onClick:onPresentDeposit,disabled:['history','archived'].some(item=>location.pathname.includes(item)),children:/*#__PURE__*/_jsx(AddIcon,{color:\"primary\",width:\"14px\"})})]});};return/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(Heading,{color:stakedBalance.eq(0)?'textDisabled':'text',children:displayBalance()}),stakedBalance.gt(0)&&lpPrice.gt(0)&&/*#__PURE__*/_jsx(Balance,{fontSize:\"12px\",color:\"textSubtle\",decimals:2,value:getBalanceNumber(lpPrice.times(stakedBalance)),unit:\" USD\",prefix:\"~\"})]}),renderStakingButtons()]});};export default StakeAction;","map":{"version":3,"names":["React","useCallback","useWeb3React","styled","BigNumber","Button","Flex","Heading","IconButton","AddIcon","MinusIcon","useModal","useLocation","Balance","useTranslation","useAppDispatch","fetchFarmUserDataAsync","useLpTokenPrice","getBalanceAmount","getBalanceNumber","getFullDisplayBalance","DepositModal","WithdrawModal","useUnstakeFarms","useStakeFarms","jsx","_jsx","jsxs","_jsxs","IconButtonWrapper","div","_templateObject","_taggedTemplateLiteral","StakeAction","_ref","stakedBalance","tokenBalance","tokenName","pid","addLiquidityUrl","t","onStake","onUnstake","location","dispatch","account","lpPrice","handleStake","amount","pids","handleUnstake","displayBalance","stakedBalanceBigNumber","gt","lt","toFixed","ROUND_DOWN","toLocaleString","onPresentDeposit","max","onConfirm","onPresentWithdraw","renderStakingButtons","eq","onClick","disabled","some","item","pathname","includes","children","variant","mr","color","width","justifyContent","alignItems","flexDirection","fontSize","decimals","value","times","unit","prefix"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Farms/components/FarmCard/StakeAction.tsx"],"sourcesContent":["import React, { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Button, Flex, Heading, IconButton, AddIcon, MinusIcon, useModal } from '@pancakeswap/uikit'\r\nimport { useLocation } from 'react-router-dom'\r\nimport Balance from 'components/Balance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { fetchFarmUserDataAsync } from 'state/farms'\r\nimport { useLpTokenPrice } from 'state/farms/hooks'\r\nimport { getBalanceAmount, getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport DepositModal from '../DepositModal'\r\nimport WithdrawModal from '../WithdrawModal'\r\nimport useUnstakeFarms from '../../hooks/useUnstakeFarms'\r\nimport useStakeFarms from '../../hooks/useStakeFarms'\r\n\r\ninterface FarmCardActionsProps {\r\n  stakedBalance?: BigNumber\r\n  tokenBalance?: BigNumber\r\n  tokenName?: string\r\n  pid?: number\r\n  addLiquidityUrl?: string\r\n}\r\n\r\nconst IconButtonWrapper = styled.div`\r\n  display: flex;\r\n  svg {\r\n    width: 20px;\r\n  }\r\n`\r\n\r\nconst StakeAction: React.FC<FarmCardActionsProps> = ({\r\n  stakedBalance,\r\n  tokenBalance,\r\n  tokenName,\r\n  pid,\r\n  addLiquidityUrl,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const { onStake } = useStakeFarms(pid)\r\n  const { onUnstake } = useUnstakeFarms(pid)\r\n  const location = useLocation()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const lpPrice = useLpTokenPrice(tokenName)\r\n\r\n  const handleStake = async (amount: string) => {\r\n    await onStake(amount)\r\n    dispatch(fetchFarmUserDataAsync({ account, pids: [pid] }))\r\n  }\r\n\r\n  const handleUnstake = async (amount: string) => {\r\n    await onUnstake(amount)\r\n    dispatch(fetchFarmUserDataAsync({ account, pids: [pid] }))\r\n  }\r\n\r\n  const displayBalance = useCallback(() => {\r\n    const stakedBalanceBigNumber = getBalanceAmount(stakedBalance)\r\n    if (stakedBalanceBigNumber.gt(0) && stakedBalanceBigNumber.lt(0.0000001)) {\r\n      return stakedBalanceBigNumber.toFixed(10, BigNumber.ROUND_DOWN)\r\n    }\r\n    if (stakedBalanceBigNumber.gt(0) && stakedBalanceBigNumber.lt(0.0001)) {\r\n      return getFullDisplayBalance(stakedBalance).toLocaleString()\r\n    }\r\n    return stakedBalanceBigNumber.toFixed(3, BigNumber.ROUND_DOWN)\r\n  }, [stakedBalance])\r\n\r\n  const [onPresentDeposit] = useModal(\r\n    <DepositModal max={tokenBalance} onConfirm={handleStake} tokenName={tokenName} addLiquidityUrl={addLiquidityUrl} />,\r\n  )\r\n  const [onPresentWithdraw] = useModal(\r\n    <WithdrawModal max={stakedBalance} onConfirm={handleUnstake} tokenName={tokenName} />,\r\n  )\r\n\r\n  const renderStakingButtons = () => {\r\n    return stakedBalance.eq(0) ? (\r\n      <Button\r\n        onClick={onPresentDeposit}\r\n        disabled={['history', 'archived'].some((item) => location.pathname.includes(item))}\r\n      >\r\n        {t('Stake LP')}\r\n      </Button>\r\n    ) : (\r\n      <IconButtonWrapper>\r\n        <IconButton variant=\"tertiary\" onClick={onPresentWithdraw} mr=\"6px\">\r\n          <MinusIcon color=\"primary\" width=\"14px\" />\r\n        </IconButton>\r\n        <IconButton\r\n          variant=\"tertiary\"\r\n          onClick={onPresentDeposit}\r\n          disabled={['history', 'archived'].some((item) => location.pathname.includes(item))}\r\n        >\r\n          <AddIcon color=\"primary\" width=\"14px\" />\r\n        </IconButton>\r\n      </IconButtonWrapper>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n      <Flex flexDirection=\"column\" alignItems=\"flex-start\">\r\n        <Heading color={stakedBalance.eq(0) ? 'textDisabled' : 'text'}>{displayBalance()}</Heading>\r\n        {stakedBalance.gt(0) && lpPrice.gt(0) && (\r\n          <Balance\r\n            fontSize=\"12px\"\r\n            color=\"textSubtle\"\r\n            decimals={2}\r\n            value={getBalanceNumber(lpPrice.times(stakedBalance))}\r\n            unit=\" USD\"\r\n            prefix=\"~\"\r\n          />\r\n        )}\r\n      </Flex>\r\n      {renderStakingButtons()}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default StakeAction\r\n"],"mappings":"2MAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,KAAQ,OAAO,CAC1C,OAASC,YAAY,KAAQ,kBAAkB,CAC/C,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,SAAS,KAAM,cAAc,CACpC,OAASC,MAAM,CAAEC,IAAI,CAAEC,OAAO,CAAEC,UAAU,CAAEC,OAAO,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,oBAAoB,CACpG,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,OAASC,cAAc,KAAQ,uBAAuB,CACtD,OAASC,cAAc,KAAQ,OAAO,CACtC,OAASC,sBAAsB,KAAQ,aAAa,CACpD,OAASC,eAAe,KAAQ,mBAAmB,CACnD,OAASC,gBAAgB,CAAEC,gBAAgB,CAAEC,qBAAqB,KAAQ,qBAAqB,CAC/F,MAAO,CAAAC,YAAY,KAAM,iBAAiB,CAC1C,MAAO,CAAAC,aAAa,KAAM,kBAAkB,CAC5C,MAAO,CAAAC,eAAe,KAAM,6BAA6B,CACzD,MAAO,CAAAC,aAAa,KAAM,2BAA2B,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAUrD,KAAM,CAAAC,iBAAiB,CAAG1B,MAAM,CAAC2B,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,4DAKnC,CAED,KAAM,CAAAC,WAA2C,CAAGC,IAAA,EAM9C,IAN+C,CACnDC,aAAa,CACbC,YAAY,CACZC,SAAS,CACTC,GAAG,CACHC,eACF,CAAC,CAAAL,IAAA,CACC,KAAM,CAAEM,CAAE,CAAC,CAAG1B,cAAc,CAAC,CAAC,CAC9B,KAAM,CAAE2B,OAAQ,CAAC,CAAGjB,aAAa,CAACc,GAAG,CAAC,CACtC,KAAM,CAAEI,SAAU,CAAC,CAAGnB,eAAe,CAACe,GAAG,CAAC,CAC1C,KAAM,CAAAK,QAAQ,CAAG/B,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAgC,QAAQ,CAAG7B,cAAc,CAAC,CAAC,CACjC,KAAM,CAAE8B,OAAQ,CAAC,CAAG3C,YAAY,CAAC,CAAC,CAClC,KAAM,CAAA4C,OAAO,CAAG7B,eAAe,CAACoB,SAAS,CAAC,CAE1C,KAAM,CAAAU,WAAW,CAAG,KAAO,CAAAC,MAAc,EAAK,CAC5C,KAAM,CAAAP,OAAO,CAACO,MAAM,CAAC,CACrBJ,QAAQ,CAAC5B,sBAAsB,CAAC,CAAE6B,OAAO,CAAEI,IAAI,CAAE,CAACX,GAAG,CAAE,CAAC,CAAC,CAAC,CAC5D,CAAC,CAED,KAAM,CAAAY,aAAa,CAAG,KAAO,CAAAF,MAAc,EAAK,CAC9C,KAAM,CAAAN,SAAS,CAACM,MAAM,CAAC,CACvBJ,QAAQ,CAAC5B,sBAAsB,CAAC,CAAE6B,OAAO,CAAEI,IAAI,CAAE,CAACX,GAAG,CAAE,CAAC,CAAC,CAAC,CAC5D,CAAC,CAED,KAAM,CAAAa,cAAc,CAAGlD,WAAW,CAAC,IAAM,CACvC,KAAM,CAAAmD,sBAAsB,CAAGlC,gBAAgB,CAACiB,aAAa,CAAC,CAC9D,GAAIiB,sBAAsB,CAACC,EAAE,CAAC,CAAC,CAAC,EAAID,sBAAsB,CAACE,EAAE,CAAC,SAAS,CAAC,CAAE,CACxE,MAAO,CAAAF,sBAAsB,CAACG,OAAO,CAAC,EAAE,CAAEnD,SAAS,CAACoD,UAAU,CAAC,CACjE,CACA,GAAIJ,sBAAsB,CAACC,EAAE,CAAC,CAAC,CAAC,EAAID,sBAAsB,CAACE,EAAE,CAAC,MAAM,CAAC,CAAE,CACrE,MAAO,CAAAlC,qBAAqB,CAACe,aAAa,CAAC,CAACsB,cAAc,CAAC,CAAC,CAC9D,CACA,MAAO,CAAAL,sBAAsB,CAACG,OAAO,CAAC,CAAC,CAAEnD,SAAS,CAACoD,UAAU,CAAC,CAChE,CAAC,CAAE,CAACrB,aAAa,CAAC,CAAC,CAEnB,KAAM,CAACuB,gBAAgB,CAAC,CAAG/C,QAAQ,cACjCe,IAAA,CAACL,YAAY,EAACsC,GAAG,CAAEvB,YAAa,CAACwB,SAAS,CAAEb,WAAY,CAACV,SAAS,CAAEA,SAAU,CAACE,eAAe,CAAEA,eAAgB,CAAE,CACpH,CAAC,CACD,KAAM,CAACsB,iBAAiB,CAAC,CAAGlD,QAAQ,cAClCe,IAAA,CAACJ,aAAa,EAACqC,GAAG,CAAExB,aAAc,CAACyB,SAAS,CAAEV,aAAc,CAACb,SAAS,CAAEA,SAAU,CAAE,CACtF,CAAC,CAED,KAAM,CAAAyB,oBAAoB,CAAGA,CAAA,GAAM,CACjC,MAAO,CAAA3B,aAAa,CAAC4B,EAAE,CAAC,CAAC,CAAC,cACxBrC,IAAA,CAACrB,MAAM,EACL2D,OAAO,CAAEN,gBAAiB,CAC1BO,QAAQ,CAAE,CAAC,SAAS,CAAE,UAAU,CAAC,CAACC,IAAI,CAAEC,IAAI,EAAKxB,QAAQ,CAACyB,QAAQ,CAACC,QAAQ,CAACF,IAAI,CAAC,CAAE,CAAAG,QAAA,CAElF9B,CAAC,CAAC,UAAU,CAAC,CACR,CAAC,cAETZ,KAAA,CAACC,iBAAiB,EAAAyC,QAAA,eAChB5C,IAAA,CAAClB,UAAU,EAAC+D,OAAO,CAAC,UAAU,CAACP,OAAO,CAAEH,iBAAkB,CAACW,EAAE,CAAC,KAAK,CAAAF,QAAA,cACjE5C,IAAA,CAAChB,SAAS,EAAC+D,KAAK,CAAC,SAAS,CAACC,KAAK,CAAC,MAAM,CAAE,CAAC,CAChC,CAAC,cACbhD,IAAA,CAAClB,UAAU,EACT+D,OAAO,CAAC,UAAU,CAClBP,OAAO,CAAEN,gBAAiB,CAC1BO,QAAQ,CAAE,CAAC,SAAS,CAAE,UAAU,CAAC,CAACC,IAAI,CAAEC,IAAI,EAAKxB,QAAQ,CAACyB,QAAQ,CAACC,QAAQ,CAACF,IAAI,CAAC,CAAE,CAAAG,QAAA,cAEnF5C,IAAA,CAACjB,OAAO,EAACgE,KAAK,CAAC,SAAS,CAACC,KAAK,CAAC,MAAM,CAAE,CAAC,CAC9B,CAAC,EACI,CACpB,CACH,CAAC,CAED,mBACE9C,KAAA,CAACtB,IAAI,EAACqE,cAAc,CAAC,eAAe,CAACC,UAAU,CAAC,QAAQ,CAAAN,QAAA,eACtD1C,KAAA,CAACtB,IAAI,EAACuE,aAAa,CAAC,QAAQ,CAACD,UAAU,CAAC,YAAY,CAAAN,QAAA,eAClD5C,IAAA,CAACnB,OAAO,EAACkE,KAAK,CAAEtC,aAAa,CAAC4B,EAAE,CAAC,CAAC,CAAC,CAAG,cAAc,CAAG,MAAO,CAAAO,QAAA,CAAEnB,cAAc,CAAC,CAAC,CAAU,CAAC,CAC1FhB,aAAa,CAACkB,EAAE,CAAC,CAAC,CAAC,EAAIP,OAAO,CAACO,EAAE,CAAC,CAAC,CAAC,eACnC3B,IAAA,CAACb,OAAO,EACNiE,QAAQ,CAAC,MAAM,CACfL,KAAK,CAAC,YAAY,CAClBM,QAAQ,CAAE,CAAE,CACZC,KAAK,CAAE7D,gBAAgB,CAAC2B,OAAO,CAACmC,KAAK,CAAC9C,aAAa,CAAC,CAAE,CACtD+C,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,GAAG,CACX,CACF,EACG,CAAC,CACNrB,oBAAoB,CAAC,CAAC,EACnB,CAAC,CAEX,CAAC,CAED,cAAe,CAAA7B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module"}