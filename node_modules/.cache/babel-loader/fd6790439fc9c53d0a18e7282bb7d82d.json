{"ast":null,"code":"import React from'react';import{Box,Text,Flex,Card,CardBody,CardHeader,Heading,Progress,Skeleton,Tag,CheckmarkCircleIcon}from'@pancakeswap/uikit';import{useWeb3React}from'@web3-react/core';import times from'lodash/times';import{VotingStateLoadingStatus}from'state/types';import{useGetVotingStateLoadingStatus}from'state/voting/hooks';import{useTranslation}from'contexts/Localization';import{calculateVoteResults,getTotalFromVotes}from'../helpers';import TextEllipsis from'../components/TextEllipsis';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Results=_ref=>{let{choices,votes}=_ref;const{t}=useTranslation();const results=calculateVoteResults(votes);const votingStatus=useGetVotingStateLoadingStatus();const{account}=useWeb3React();const totalVotes=getTotalFromVotes(votes);return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(Heading,{as:\"h3\",scale:\"md\",children:t('Current Results')})}),/*#__PURE__*/_jsxs(CardBody,{children:[votingStatus===VotingStateLoadingStatus.IDLE&&choices.map((choice,index)=>{const choiceVotes=results[choice]||[];const totalChoiceVote=getTotalFromVotes(choiceVotes);const progress=totalVotes.eq(0)?0:totalChoiceVote.div(totalVotes).times(100).toNumber();const hasVoted=choiceVotes.some(vote=>{return account&&vote.voter.toLowerCase()===account.toLowerCase();});return/*#__PURE__*/_jsxs(Box,{mt:index>0?'24px':'0px',children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",mb:\"8px\",children:[/*#__PURE__*/_jsx(TextEllipsis,{mb:\"4px\",title:choice,children:choice}),hasVoted&&/*#__PURE__*/_jsxs(Tag,{variant:\"success\",outline:true,ml:\"8px\",children:[/*#__PURE__*/_jsx(CheckmarkCircleIcon,{mr:\"4px\"}),\" \",t('Voted')]})]}),/*#__PURE__*/_jsx(Box,{mb:\"4px\",children:/*#__PURE__*/_jsx(Progress,{primaryStep:progress,scale:\"sm\"})}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",children:t('%total% Votes',{total:totalChoiceVote.toFormat(3)})}),/*#__PURE__*/_jsxs(Text,{children:[progress.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2}),\"%\"]})]})]},choice);}),votingStatus===VotingStateLoadingStatus.LOADING&&times(choices.length).map((count,index)=>{return/*#__PURE__*/_jsx(Box,{mt:index>0?'24px':'0px',children:/*#__PURE__*/_jsx(Skeleton,{height:\"36px\",mb:\"4px\"})},count);})]})]});};export default Results;","map":{"version":3,"names":["React","Box","Text","Flex","Card","CardBody","CardHeader","Heading","Progress","Skeleton","Tag","CheckmarkCircleIcon","useWeb3React","times","VotingStateLoadingStatus","useGetVotingStateLoadingStatus","useTranslation","calculateVoteResults","getTotalFromVotes","TextEllipsis","jsx","_jsx","jsxs","_jsxs","Results","_ref","choices","votes","t","results","votingStatus","account","totalVotes","children","as","scale","IDLE","map","choice","index","choiceVotes","totalChoiceVote","progress","eq","div","toNumber","hasVoted","some","vote","voter","toLowerCase","mt","alignItems","mb","title","variant","outline","ml","mr","primaryStep","justifyContent","color","total","toFormat","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","LOADING","length","count","height"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Voting/Proposal/Results.tsx"],"sourcesContent":["import React from 'react'\r\nimport {\r\n  Box,\r\n  Text,\r\n  Flex,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Heading,\r\n  Progress,\r\n  Skeleton,\r\n  Tag,\r\n  CheckmarkCircleIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport times from 'lodash/times'\r\nimport { Vote, VotingStateLoadingStatus } from 'state/types'\r\nimport { useGetVotingStateLoadingStatus } from 'state/voting/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { calculateVoteResults, getTotalFromVotes } from '../helpers'\r\nimport TextEllipsis from '../components/TextEllipsis'\r\n\r\ninterface ResultsProps {\r\n  choices: string[]\r\n  votes: Vote[]\r\n}\r\n\r\nconst Results: React.FC<ResultsProps> = ({ choices, votes }) => {\r\n  const { t } = useTranslation()\r\n  const results = calculateVoteResults(votes)\r\n  const votingStatus = useGetVotingStateLoadingStatus()\r\n  const { account } = useWeb3React()\r\n  const totalVotes = getTotalFromVotes(votes)\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <Heading as=\"h3\" scale=\"md\">\r\n          {t('Current Results')}\r\n        </Heading>\r\n      </CardHeader>\r\n      <CardBody>\r\n        {votingStatus === VotingStateLoadingStatus.IDLE &&\r\n          choices.map((choice, index) => {\r\n            const choiceVotes = results[choice] || []\r\n            const totalChoiceVote = getTotalFromVotes(choiceVotes)\r\n\r\n            const progress = totalVotes.eq(0) ? 0 : totalChoiceVote.div(totalVotes).times(100).toNumber()\r\n            const hasVoted = choiceVotes.some((vote) => {\r\n              return account && vote.voter.toLowerCase() === account.toLowerCase()\r\n            })\r\n\r\n            return (\r\n              <Box key={choice} mt={index > 0 ? '24px' : '0px'}>\r\n                <Flex alignItems=\"center\" mb=\"8px\">\r\n                  <TextEllipsis mb=\"4px\" title={choice}>\r\n                    {choice}\r\n                  </TextEllipsis>\r\n                  {hasVoted && (\r\n                    <Tag variant=\"success\" outline ml=\"8px\">\r\n                      <CheckmarkCircleIcon mr=\"4px\" /> {t('Voted')}\r\n                    </Tag>\r\n                  )}\r\n                </Flex>\r\n                <Box mb=\"4px\">\r\n                  <Progress primaryStep={progress} scale=\"sm\" />\r\n                </Box>\r\n                <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n                  <Text color=\"textSubtle\">{t('%total% Votes', { total: totalChoiceVote.toFormat(3) })}</Text>\r\n                  <Text>\r\n                    {progress.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%\r\n                  </Text>\r\n                </Flex>\r\n              </Box>\r\n            )\r\n          })}\r\n\r\n        {votingStatus === VotingStateLoadingStatus.LOADING &&\r\n          times(choices.length).map((count, index) => {\r\n            return (\r\n              <Box key={count} mt={index > 0 ? '24px' : '0px'}>\r\n                <Skeleton height=\"36px\" mb=\"4px\" />\r\n              </Box>\r\n            )\r\n          })}\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default Results\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}