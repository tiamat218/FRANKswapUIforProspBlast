{"ast":null,"code":"import{CurrencyAmount,ETHER,JSBI,Token,TokenAmount}from'@pancakeswap/sdk';import{useMemo}from'react';import{useWeb3React}from'@web3-react/core';import ERC20_INTERFACE from'config/abi/erc20';import{useAllTokens}from'hooks/Tokens';import{useMulticallContract}from'hooks/useContract';import{isAddress}from'utils';import{useSingleContractMultipleData,useMultipleContractSingleData}from'../multicall/hooks';/**\r\n * Returns a map of the given addresses to their eventually consistent BNB balances.\r\n */export function useBNBBalances(uncheckedAddresses){const multicallContract=useMulticallContract();const addresses=useMemo(()=>uncheckedAddresses?uncheckedAddresses.map(isAddress).filter(a=>a!==false).sort():[],[uncheckedAddresses]);const results=useSingleContractMultipleData(multicallContract,'getEthBalance',addresses.map(address=>[address]));return useMemo(()=>addresses.reduce((memo,address,i)=>{var _results$i,_results$i$result;const value=results===null||results===void 0?void 0:(_results$i=results[i])===null||_results$i===void 0?void 0:(_results$i$result=_results$i.result)===null||_results$i$result===void 0?void 0:_results$i$result[0];if(value)memo[address]=CurrencyAmount.ether(JSBI.BigInt(value.toString()));return memo;},{}),[addresses,results]);}/**\r\n * Returns a map of token addresses to their eventually consistent token balances for a single account.\r\n */export function useTokenBalancesWithLoadingIndicator(address,tokens){const validatedTokens=useMemo(()=>{var _tokens$filter;return(_tokens$filter=tokens===null||tokens===void 0?void 0:tokens.filter(t=>isAddress(t===null||t===void 0?void 0:t.address)!==false))!==null&&_tokens$filter!==void 0?_tokens$filter:[];},[tokens]);const validatedTokenAddresses=useMemo(()=>validatedTokens.map(vt=>vt.address),[validatedTokens]);const balances=useMultipleContractSingleData(validatedTokenAddresses,ERC20_INTERFACE,'balanceOf',[address]);const anyLoading=useMemo(()=>balances.some(callState=>callState.loading),[balances]);return[useMemo(()=>address&&validatedTokens.length>0?validatedTokens.reduce((memo,token,i)=>{var _balances$i,_balances$i$result;const value=balances===null||balances===void 0?void 0:(_balances$i=balances[i])===null||_balances$i===void 0?void 0:(_balances$i$result=_balances$i.result)===null||_balances$i$result===void 0?void 0:_balances$i$result[0];const amount=value?JSBI.BigInt(value.toString()):undefined;if(amount){memo[token.address]=new TokenAmount(token,amount);}return memo;},{}):{},[address,validatedTokens,balances]),anyLoading];}export function useTokenBalances(address,tokens){return useTokenBalancesWithLoadingIndicator(address,tokens)[0];}// get the balance for a single token/account combo\nexport function useTokenBalance(account,token){const tokenBalances=useTokenBalances(account,[token]);if(!token)return undefined;return tokenBalances[token.address];}export function useCurrencyBalances(account,currencies){const tokens=useMemo(()=>{var _currencies$filter;return(_currencies$filter=currencies===null||currencies===void 0?void 0:currencies.filter(currency=>currency instanceof Token))!==null&&_currencies$filter!==void 0?_currencies$filter:[];},[currencies]);const tokenBalances=useTokenBalances(account,tokens);const containsBNB=useMemo(()=>{var _currencies$some;return(_currencies$some=currencies===null||currencies===void 0?void 0:currencies.some(currency=>currency===ETHER))!==null&&_currencies$some!==void 0?_currencies$some:false;},[currencies]);const ethBalance=useBNBBalances(containsBNB?[account]:[]);return useMemo(()=>{var _currencies$map;return(_currencies$map=currencies===null||currencies===void 0?void 0:currencies.map(currency=>{if(!account||!currency)return undefined;if(currency instanceof Token)return tokenBalances[currency.address];if(currency===ETHER)return ethBalance[account];return undefined;}))!==null&&_currencies$map!==void 0?_currencies$map:[];},[account,currencies,ethBalance,tokenBalances]);}export function useCurrencyBalance(account,currency){return useCurrencyBalances(account,[currency])[0];}// mimics useAllBalances\nexport function useAllTokenBalances(){const{account}=useWeb3React();const allTokens=useAllTokens();const allTokensArray=useMemo(()=>Object.values(allTokens!==null&&allTokens!==void 0?allTokens:{}),[allTokens]);const balances=useTokenBalances(account!==null&&account!==void 0?account:undefined,allTokensArray);return balances!==null&&balances!==void 0?balances:{};}","map":{"version":3,"names":["CurrencyAmount","ETHER","JSBI","Token","TokenAmount","useMemo","useWeb3React","ERC20_INTERFACE","useAllTokens","useMulticallContract","isAddress","useSingleContractMultipleData","useMultipleContractSingleData","useBNBBalances","uncheckedAddresses","multicallContract","addresses","map","filter","a","sort","results","address","reduce","memo","i","_results$i","_results$i$result","value","result","ether","BigInt","toString","useTokenBalancesWithLoadingIndicator","tokens","validatedTokens","_tokens$filter","t","validatedTokenAddresses","vt","balances","anyLoading","some","callState","loading","length","token","_balances$i","_balances$i$result","amount","undefined","useTokenBalances","useTokenBalance","account","tokenBalances","useCurrencyBalances","currencies","_currencies$filter","currency","containsBNB","_currencies$some","ethBalance","_currencies$map","useCurrencyBalance","useAllTokenBalances","allTokens","allTokensArray","Object","values"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/state/wallet/hooks.ts"],"sourcesContent":["import { Currency, CurrencyAmount, ETHER, JSBI, Token, TokenAmount } from '@pancakeswap/sdk'\r\nimport { useMemo } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport ERC20_INTERFACE from 'config/abi/erc20'\r\nimport { useAllTokens } from 'hooks/Tokens'\r\nimport { useMulticallContract } from 'hooks/useContract'\r\nimport { isAddress } from 'utils'\r\nimport { useSingleContractMultipleData, useMultipleContractSingleData } from '../multicall/hooks'\r\n\r\n/**\r\n * Returns a map of the given addresses to their eventually consistent BNB balances.\r\n */\r\nexport function useBNBBalances(uncheckedAddresses?: (string | undefined)[]): {\r\n  [address: string]: CurrencyAmount | undefined\r\n} {\r\n  const multicallContract = useMulticallContract()\r\n\r\n  const addresses: string[] = useMemo(\r\n    () =>\r\n      uncheckedAddresses\r\n        ? uncheckedAddresses\r\n            .map(isAddress)\r\n            .filter((a): a is string => a !== false)\r\n            .sort()\r\n        : [],\r\n    [uncheckedAddresses],\r\n  )\r\n\r\n  const results = useSingleContractMultipleData(\r\n    multicallContract,\r\n    'getEthBalance',\r\n    addresses.map((address) => [address]),\r\n  )\r\n\r\n  return useMemo(\r\n    () =>\r\n      addresses.reduce<{ [address: string]: CurrencyAmount }>((memo, address, i) => {\r\n        const value = results?.[i]?.result?.[0]\r\n        if (value) memo[address] = CurrencyAmount.ether(JSBI.BigInt(value.toString()))\r\n        return memo\r\n      }, {}),\r\n    [addresses, results],\r\n  )\r\n}\r\n\r\n/**\r\n * Returns a map of token addresses to their eventually consistent token balances for a single account.\r\n */\r\nexport function useTokenBalancesWithLoadingIndicator(\r\n  address?: string,\r\n  tokens?: (Token | undefined)[],\r\n): [{ [tokenAddress: string]: TokenAmount | undefined }, boolean] {\r\n  const validatedTokens: Token[] = useMemo(\r\n    () => tokens?.filter((t?: Token): t is Token => isAddress(t?.address) !== false) ?? [],\r\n    [tokens],\r\n  )\r\n\r\n  const validatedTokenAddresses = useMemo(() => validatedTokens.map((vt) => vt.address), [validatedTokens])\r\n\r\n  const balances = useMultipleContractSingleData(validatedTokenAddresses, ERC20_INTERFACE, 'balanceOf', [address])\r\n\r\n  const anyLoading: boolean = useMemo(() => balances.some((callState) => callState.loading), [balances])\r\n\r\n  return [\r\n    useMemo(\r\n      () =>\r\n        address && validatedTokens.length > 0\r\n          ? validatedTokens.reduce<{ [tokenAddress: string]: TokenAmount | undefined }>((memo, token, i) => {\r\n              const value = balances?.[i]?.result?.[0]\r\n              const amount = value ? JSBI.BigInt(value.toString()) : undefined\r\n              if (amount) {\r\n                memo[token.address] = new TokenAmount(token, amount)\r\n              }\r\n              return memo\r\n            }, {})\r\n          : {},\r\n      [address, validatedTokens, balances],\r\n    ),\r\n    anyLoading,\r\n  ]\r\n}\r\n\r\nexport function useTokenBalances(\r\n  address?: string,\r\n  tokens?: (Token | undefined)[],\r\n): { [tokenAddress: string]: TokenAmount | undefined } {\r\n  return useTokenBalancesWithLoadingIndicator(address, tokens)[0]\r\n}\r\n\r\n// get the balance for a single token/account combo\r\nexport function useTokenBalance(account?: string, token?: Token): TokenAmount | undefined {\r\n  const tokenBalances = useTokenBalances(account, [token])\r\n  if (!token) return undefined\r\n  return tokenBalances[token.address]\r\n}\r\n\r\nexport function useCurrencyBalances(\r\n  account?: string,\r\n  currencies?: (Currency | undefined)[],\r\n): (CurrencyAmount | undefined)[] {\r\n  const tokens = useMemo(\r\n    () => currencies?.filter((currency): currency is Token => currency instanceof Token) ?? [],\r\n    [currencies],\r\n  )\r\n\r\n  const tokenBalances = useTokenBalances(account, tokens)\r\n  const containsBNB: boolean = useMemo(() => currencies?.some((currency) => currency === ETHER) ?? false, [currencies])\r\n  const ethBalance = useBNBBalances(containsBNB ? [account] : [])\r\n\r\n  return useMemo(\r\n    () =>\r\n      currencies?.map((currency) => {\r\n        if (!account || !currency) return undefined\r\n        if (currency instanceof Token) return tokenBalances[currency.address]\r\n        if (currency === ETHER) return ethBalance[account]\r\n        return undefined\r\n      }) ?? [],\r\n    [account, currencies, ethBalance, tokenBalances],\r\n  )\r\n}\r\n\r\nexport function useCurrencyBalance(account?: string, currency?: Currency): CurrencyAmount | undefined {\r\n  return useCurrencyBalances(account, [currency])[0]\r\n}\r\n\r\n// mimics useAllBalances\r\nexport function useAllTokenBalances(): { [tokenAddress: string]: TokenAmount | undefined } {\r\n  const { account } = useWeb3React()\r\n  const allTokens = useAllTokens()\r\n  const allTokensArray = useMemo(() => Object.values(allTokens ?? {}), [allTokens])\r\n  const balances = useTokenBalances(account ?? undefined, allTokensArray)\r\n  return balances ?? {}\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}