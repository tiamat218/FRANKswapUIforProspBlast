{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/Devrim/Documents/FRANKswapUIforProspBlast/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useState}from'react';import styled from'styled-components';import{ModalContainer,ModalBody,ModalTitle,ModalHeader,Button,AutoRenewIcon,TrophyGoldIcon,Text,Flex,Heading,Box,LinkExternal,ModalCloseButton}from'@pancakeswap/uikit';import{useWeb3React}from'@web3-react/core';import{getBscScanLink}from'utils';import{useAppDispatch}from'state';import{usePriceBnbBusd}from'state/farms/hooks';import{fetchClaimableStatuses}from'state/predictions';import{useTranslation}from'contexts/Localization';import useToast from'hooks/useToast';import{usePredictionsContract}from'hooks/useContract';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Modal=styled(ModalContainer)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  overflow: visible;\\n\"])));const BunnyDecoration=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: -116px; // line up bunny at the top of the modal\\n  left: 0px;\\n  text-align: center;\\n  width: 100%;\\n\"])));const CollectRoundWinningsModal=_ref=>{let{payout,betAmount,epoch,onDismiss,onSuccess}=_ref;const[isPendingTx,setIsPendingTx]=useState(false);const{account}=useWeb3React();const{t}=useTranslation();const{toastSuccess,toastError}=useToast();const predictionsContract=usePredictionsContract();const bnbBusdPrice=usePriceBnbBusd();const dispatch=useAppDispatch();// Convert payout to number for compatibility\nconst payoutAsFloat=parseFloat(payout);const betAmountAsFloat=parseFloat(betAmount);const handleClick=async()=>{try{const tx=await predictionsContract.claim(epoch);setIsPendingTx(true);const receipt=await tx.wait();if(onSuccess){await onSuccess();}await dispatch(fetchClaimableStatuses({account,epochs:[epoch]}));onDismiss();setIsPendingTx(false);toastSuccess(t('Winnings collected!'),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Text,{as:\"p\",mb:\"8px\",children:t('Your prizes have been sent to your wallet')}),receipt.transactionHash&&/*#__PURE__*/_jsx(LinkExternal,{href:getBscScanLink(receipt.transactionHash,'transaction'),children:t('View on BscScan')})]}));}catch{toastError(t('Error'),t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));}finally{setIsPendingTx(false);}};return/*#__PURE__*/_jsxs(Modal,{minWidth:\"288px\",position:\"relative\",mt:\"124px\",children:[/*#__PURE__*/_jsx(BunnyDecoration,{children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/decorations/prize-bunny.png\",alt:\"bunny decoration\",height:\"124px\",width:\"168px\"})}),/*#__PURE__*/_jsxs(ModalHeader,{children:[/*#__PURE__*/_jsx(ModalTitle,{children:/*#__PURE__*/_jsx(Heading,{children:t('Collect Winnings')})}),/*#__PURE__*/_jsx(ModalCloseButton,{onDismiss:onDismiss})]}),/*#__PURE__*/_jsxs(ModalBody,{p:\"24px\",children:[/*#__PURE__*/_jsx(TrophyGoldIcon,{width:\"96px\",mx:\"auto\",mb:\"24px\"}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"start\",justifyContent:\"space-between\",mb:\"8px\",children:[/*#__PURE__*/_jsx(Text,{children:t('Your position')}),/*#__PURE__*/_jsxs(Box,{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(Text,{children:\"\".concat(betAmount,\" BNB\")}),/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"textSubtle\",children:\"~$\".concat(bnbBusdPrice.times(betAmountAsFloat).toFormat(2))})]})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"start\",justifyContent:\"space-between\",mb:\"24px\",children:[/*#__PURE__*/_jsx(Text,{children:t('Your winnings')}),/*#__PURE__*/_jsxs(Box,{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(Text,{children:\"\".concat(payout,\" BNB\")}),/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"textSubtle\",children:\"~$\".concat(bnbBusdPrice.times(payoutAsFloat).toFormat(2))})]})]}),/*#__PURE__*/_jsx(Button,{width:\"100%\",mb:\"8px\",onClick:handleClick,isLoading:isPendingTx,endIcon:isPendingTx?/*#__PURE__*/_jsx(AutoRenewIcon,{spin:true,color:\"currentColor\"}):null,children:t('Confirm')})]})]});};export default CollectRoundWinningsModal;","map":{"version":3,"names":["React","useState","styled","ModalContainer","ModalBody","ModalTitle","ModalHeader","Button","AutoRenewIcon","TrophyGoldIcon","Text","Flex","Heading","Box","LinkExternal","ModalCloseButton","useWeb3React","getBscScanLink","useAppDispatch","usePriceBnbBusd","fetchClaimableStatuses","useTranslation","useToast","usePredictionsContract","jsx","_jsx","jsxs","_jsxs","Modal","_templateObject","_taggedTemplateLiteral","BunnyDecoration","div","_templateObject2","CollectRoundWinningsModal","_ref","payout","betAmount","epoch","onDismiss","onSuccess","isPendingTx","setIsPendingTx","account","t","toastSuccess","toastError","predictionsContract","bnbBusdPrice","dispatch","payoutAsFloat","parseFloat","betAmountAsFloat","handleClick","tx","claim","receipt","wait","epochs","children","as","mb","transactionHash","href","minWidth","position","mt","src","alt","height","width","p","mx","alignItems","justifyContent","style","textAlign","concat","fontSize","color","times","toFormat","onClick","isLoading","endIcon","spin"],"sources":["C:/Users/Devrim/Documents/FRANKswapUIforProspBlast/src/views/Predictions/components/CollectRoundWinningsModal.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  ModalContainer,\r\n  ModalBody,\r\n  ModalTitle,\r\n  ModalHeader,\r\n  InjectedModalProps,\r\n  Button,\r\n  AutoRenewIcon,\r\n  TrophyGoldIcon,\r\n  Text,\r\n  Flex,\r\n  Heading,\r\n  Box,\r\n  LinkExternal,\r\n  ModalCloseButton,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { getBscScanLink } from 'utils'\r\nimport { useAppDispatch } from 'state'\r\nimport { usePriceBnbBusd } from 'state/farms/hooks'\r\nimport { fetchClaimableStatuses } from 'state/predictions'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useToast from 'hooks/useToast'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\n\r\ninterface CollectRoundWinningsModalProps extends InjectedModalProps {\r\n  payout: string\r\n  betAmount: string\r\n  epoch: number\r\n  onSuccess?: () => Promise<void>\r\n}\r\n\r\nconst Modal = styled(ModalContainer)`\r\n  overflow: visible;\r\n`\r\n\r\nconst BunnyDecoration = styled.div`\r\n  position: absolute;\r\n  top: -116px; // line up bunny at the top of the modal\r\n  left: 0px;\r\n  text-align: center;\r\n  width: 100%;\r\n`\r\n\r\nconst CollectRoundWinningsModal: React.FC<CollectRoundWinningsModalProps> = ({\r\n  payout,\r\n  betAmount,\r\n  epoch,\r\n  onDismiss,\r\n  onSuccess,\r\n}) => {\r\n  const [isPendingTx, setIsPendingTx] = useState(false)\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const predictionsContract = usePredictionsContract()\r\n  const bnbBusdPrice = usePriceBnbBusd()\r\n  const dispatch = useAppDispatch()\r\n\r\n  // Convert payout to number for compatibility\r\n  const payoutAsFloat = parseFloat(payout)\r\n  const betAmountAsFloat = parseFloat(betAmount)\r\n\r\n  const handleClick = async () => {\r\n    try {\r\n      const tx = await predictionsContract.claim(epoch)\r\n      setIsPendingTx(true)\r\n      const receipt = await tx.wait()\r\n\r\n      if (onSuccess) {\r\n        await onSuccess()\r\n      }\r\n\r\n      await dispatch(fetchClaimableStatuses({ account, epochs: [epoch] }))\r\n      onDismiss()\r\n      setIsPendingTx(false)\r\n      toastSuccess(\r\n        t('Winnings collected!'),\r\n        <Box>\r\n          <Text as=\"p\" mb=\"8px\">\r\n            {t('Your prizes have been sent to your wallet')}\r\n          </Text>\r\n          {receipt.transactionHash && (\r\n            <LinkExternal href={getBscScanLink(receipt.transactionHash, 'transaction')}>\r\n              {t('View on BscScan')}\r\n            </LinkExternal>\r\n          )}\r\n        </Box>,\r\n      )\r\n    } catch {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n    } finally {\r\n      setIsPendingTx(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal minWidth=\"288px\" position=\"relative\" mt=\"124px\">\r\n      <BunnyDecoration>\r\n        <img src=\"/images/decorations/prize-bunny.png\" alt=\"bunny decoration\" height=\"124px\" width=\"168px\" />\r\n      </BunnyDecoration>\r\n      <ModalHeader>\r\n        <ModalTitle>\r\n          <Heading>{t('Collect Winnings')}</Heading>\r\n        </ModalTitle>\r\n        <ModalCloseButton onDismiss={onDismiss} />\r\n      </ModalHeader>\r\n      <ModalBody p=\"24px\">\r\n        <TrophyGoldIcon width=\"96px\" mx=\"auto\" mb=\"24px\" />\r\n        <Flex alignItems=\"start\" justifyContent=\"space-between\" mb=\"8px\">\r\n          <Text>{t('Your position')}</Text>\r\n          <Box style={{ textAlign: 'right' }}>\r\n            <Text>{`${betAmount} BNB`}</Text>\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              {`~$${bnbBusdPrice.times(betAmountAsFloat).toFormat(2)}`}\r\n            </Text>\r\n          </Box>\r\n        </Flex>\r\n        <Flex alignItems=\"start\" justifyContent=\"space-between\" mb=\"24px\">\r\n          <Text>{t('Your winnings')}</Text>\r\n          <Box style={{ textAlign: 'right' }}>\r\n            <Text>{`${payout} BNB`}</Text>\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              {`~$${bnbBusdPrice.times(payoutAsFloat).toFormat(2)}`}\r\n            </Text>\r\n          </Box>\r\n        </Flex>\r\n        <Button\r\n          width=\"100%\"\r\n          mb=\"8px\"\r\n          onClick={handleClick}\r\n          isLoading={isPendingTx}\r\n          endIcon={isPendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n        >\r\n          {t('Confirm')}\r\n        </Button>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default CollectRoundWinningsModal\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}