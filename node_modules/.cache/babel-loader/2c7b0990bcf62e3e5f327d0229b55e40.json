{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst utils_1 = require(\"@walletconnect/utils\");\nclass EventManager {\n  constructor() {\n    this._eventEmitters = [];\n  }\n  subscribe(eventEmitter) {\n    this._eventEmitters.push(eventEmitter);\n  }\n  trigger(payload) {\n    let eventEmitters = [];\n    let event;\n    if (utils_1.isJsonRpcRequest(payload)) {\n      event = payload.method;\n    } else if (utils_1.isJsonRpcResponseSuccess(payload) || utils_1.isJsonRpcResponseError(payload)) {\n      event = `response:${payload.id}`;\n    } else if (utils_1.isInternalEvent(payload)) {\n      event = payload.event;\n    } else {\n      event = \"\";\n    }\n    if (event) {\n      eventEmitters = this._eventEmitters.filter(eventEmitter => eventEmitter.event === event);\n    }\n    if ((!eventEmitters || !eventEmitters.length) && !utils_1.isReservedEvent(event) && !utils_1.isInternalEvent(event)) {\n      eventEmitters = this._eventEmitters.filter(eventEmitter => eventEmitter.event === \"call_request\");\n    }\n    eventEmitters.forEach(eventEmitter => {\n      if (utils_1.isJsonRpcResponseError(payload)) {\n        const error = new Error(payload.error.message);\n        eventEmitter.callback(error, null);\n      } else {\n        eventEmitter.callback(null, payload);\n      }\n    });\n  }\n}\nexports.default = EventManager;","map":{"version":3,"names":["utils_1","require","EventManager","constructor","_eventEmitters","subscribe","eventEmitter","push","trigger","payload","eventEmitters","event","isJsonRpcRequest","method","isJsonRpcResponseSuccess","isJsonRpcResponseError","id","isInternalEvent","filter","length","isReservedEvent","forEach","error","Error","message","callback","exports","default"],"sources":["../../src/events.ts"],"sourcesContent":[null],"mappings":";;;;;AAAA,MAAAA,OAAA,GAAAC,OAAA;AAiBA,MAAMC,YAAY;EAGhBC,YAAA;IACE,IAAI,CAACC,cAAc,GAAG,EAAE;EAC1B;EAEOC,SAASA,CAACC,YAA2B;IAC1C,IAAI,CAACF,cAAc,CAACG,IAAI,CAACD,YAAY,CAAC;EACxC;EAEOE,OAAOA,CACZC,OAA2F;IAE3F,IAAIC,aAAa,GAAoB,EAAE;IACvC,IAAIC,KAAa;IAEjB,IAAIX,OAAA,CAAAY,gBAAgB,CAACH,OAAO,CAAC,EAAE;MAC7BE,KAAK,GAAGF,OAAO,CAACI,MAAM;KACvB,MAAM,IAAIb,OAAA,CAAAc,wBAAwB,CAACL,OAAO,CAAC,IAAIT,OAAA,CAAAe,sBAAsB,CAACN,OAAO,CAAC,EAAE;MAC/EE,KAAK,GAAG,YAAYF,OAAO,CAACO,EAAE,EAAE;KACjC,MAAM,IAAIhB,OAAA,CAAAiB,eAAe,CAACR,OAAO,CAAC,EAAE;MACnCE,KAAK,GAAGF,OAAO,CAACE,KAAK;KACtB,MAAM;MACLA,KAAK,GAAG,EAAE;;IAGZ,IAAIA,KAAK,EAAE;MACTD,aAAa,GAAG,IAAI,CAACN,cAAc,CAACc,MAAM,CACvCZ,YAA2B,IAAKA,YAAY,CAACK,KAAK,KAAKA,KAAK,CAC9D;;IAGH,IACE,CAAC,CAACD,aAAa,IAAI,CAACA,aAAa,CAACS,MAAM,KACxC,CAACnB,OAAA,CAAAoB,eAAe,CAACT,KAAK,CAAC,IACvB,CAACX,OAAA,CAAAiB,eAAe,CAACN,KAAK,CAAC,EACvB;MACAD,aAAa,GAAG,IAAI,CAACN,cAAc,CAACc,MAAM,CACvCZ,YAA2B,IAAKA,YAAY,CAACK,KAAK,KAAK,cAAc,CACvE;;IAGHD,aAAa,CAACW,OAAO,CAAEf,YAA2B,IAAI;MACpD,IAAIN,OAAA,CAAAe,sBAAsB,CAACN,OAAO,CAAC,EAAE;QACnC,MAAMa,KAAK,GAAG,IAAIC,KAAK,CAACd,OAAO,CAACa,KAAK,CAACE,OAAO,CAAC;QAC9ClB,YAAY,CAACmB,QAAQ,CAACH,KAAK,EAAE,IAAI,CAAC;OACnC,MAAM;QACLhB,YAAY,CAACmB,QAAQ,CAAC,IAAI,EAAEhB,OAAO,CAAC;;IAExC,CAAC,CAAC;EACJ;;AAGFiB,OAAA,CAAAC,OAAA,GAAezB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"script"}