{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\frkul\\\\Documents\\\\swapUI_pancake-frontend\\\\src\\\\views\\\\Voting\\\\CreateProposal\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport React, { lazy, useEffect, useState, useMemo } from 'react';\nimport { AutoRenewIcon, Box, Breadcrumbs, Button, Card, CardBody, CardHeader, Flex, Heading, Input, LinkExternal, Text, useModal } from '@pancakeswap/uikit';\nimport { useHistory } from 'react-router';\nimport { useWeb3React } from '@web3-react/core';\nimport times from 'lodash/times';\nimport isEmpty from 'lodash/isEmpty';\nimport { useInitialBlock } from 'state/block/hooks';\nimport { SnapshotCommand } from 'state/types';\nimport useToast from 'hooks/useToast';\nimport useWeb3Provider from 'hooks/useActiveWeb3React';\nimport { getBscScanLink } from 'utils';\nimport truncateWalletAddress from 'utils/truncateWalletAddress';\nimport { signMessage } from 'utils/web3React';\nimport { useTranslation } from 'contexts/Localization';\nimport Container from 'components/Layout/Container';\nimport { DatePicker, TimePicker } from 'components/DatePicker';\nimport ConnectWalletButton from 'components/ConnectWalletButton';\nimport ReactMarkdown from 'components/ReactMarkdown';\nimport BreadcrumbLink from '../components/BreadcrumbLink';\nimport { sendSnaphotData, generateMetaData, generatePayloadData } from '../helpers';\nimport Layout from '../components/Layout';\nimport { FormErrors, Label, SecondaryLabel } from './styles';\nimport Choices, { makeChoice, MINIMUM_CHOICES } from './Choices';\nimport { combineDateAndTime, getFormErrors } from './helpers';\nimport { ADMIN_ADDRESS, VOTE_THRESHOLD } from '../config';\nimport VoteDetailsModal from '../components/VoteDetailsModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EasyMde = /*#__PURE__*/lazy(_c = () => import('components/EasyMde'));\n_c2 = EasyMde;\nconst CreateProposal = () => {\n  _s();\n  const [state, setState] = useState({\n    name: '',\n    body: '',\n    choices: times(MINIMUM_CHOICES).map(makeChoice),\n    startDate: null,\n    startTime: null,\n    endDate: null,\n    endTime: null,\n    snapshot: 0\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [fieldsState, setFieldsState] = useState({});\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWeb3React();\n  const initialBlock = useInitialBlock();\n  const {\n    push\n  } = useHistory();\n  const {\n    library\n  } = useWeb3Provider();\n  const {\n    toastSuccess,\n    toastError\n  } = useToast();\n  const [onPresentVoteDetailsModal] = useModal( /*#__PURE__*/_jsxDEV(VoteDetailsModal, {\n    block: state.snapshot\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 48\n  }, this));\n  const {\n    name,\n    body,\n    choices,\n    startDate,\n    startTime,\n    endDate,\n    endTime,\n    snapshot\n  } = state;\n  const formErrors = getFormErrors(state, t);\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    try {\n      setIsLoading(true);\n      const proposal = JSON.stringify({\n        ...generatePayloadData(),\n        type: SnapshotCommand.PROPOSAL,\n        payload: {\n          name,\n          body,\n          snapshot,\n          start: combineDateAndTime(startDate, startTime),\n          end: combineDateAndTime(endDate, endTime),\n          choices: choices.filter(choice => choice.value).map(choice => {\n            return choice.value;\n          }),\n          metadata: generateMetaData(),\n          type: 'single-choice'\n        }\n      });\n      const sig = await signMessage(library, account, proposal);\n      if (sig) {\n        const msg = {\n          address: account,\n          msg: proposal,\n          sig\n        };\n\n        // Save proposal to snapshot\n        const data = await sendSnaphotData(msg);\n\n        // Redirect user to newly created proposal page\n        push(`/voting/proposal/${data.ipfsHash}`);\n        toastSuccess(t('Proposal created!'));\n      } else {\n        toastError(t('Error'), t('Unable to sign payload'));\n      }\n    } catch (error) {\n      toastError(t('Error'), (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.error));\n      console.error(error);\n      setIsLoading(false);\n    }\n  };\n  const updateValue = (key, value) => {\n    setState(prevState => ({\n      ...prevState,\n      [key]: value\n    }));\n\n    // Keep track of what fields the user has attempted to edit\n    setFieldsState(prevFieldsState => ({\n      ...prevFieldsState,\n      [key]: true\n    }));\n  };\n  const handleChange = evt => {\n    const {\n      name: inputName,\n      value\n    } = evt.currentTarget;\n    updateValue(inputName, value);\n  };\n  const handleEasyMdeChange = value => {\n    updateValue('body', value);\n  };\n  const handleChoiceChange = newChoices => {\n    updateValue('choices', newChoices);\n  };\n  const handleDateChange = key => value => {\n    updateValue(key, value);\n  };\n  const options = useMemo(() => ({\n    hideIcons: account === ADMIN_ADDRESS ? [] : ['guide', 'fullscreen', 'preview', 'side-by-side', 'image']\n  }), [account]);\n  useEffect(() => {\n    if (initialBlock > 0) {\n      setState(prevState => ({\n        ...prevState,\n        snapshot: initialBlock\n      }));\n    }\n  }, [initialBlock, setState]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    py: \"40px\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      mb: \"48px\",\n      children: /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n        children: [/*#__PURE__*/_jsxDEV(BreadcrumbLink, {\n          to: \"/\",\n          children: t('Home')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BreadcrumbLink, {\n          to: \"/voting\",\n          children: t('Voting')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          children: t('Make a Proposal')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(Layout, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            mb: \"24px\",\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              htmlFor: \"name\",\n              children: t('Title')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"name\",\n              name: \"name\",\n              value: name,\n              scale: \"lg\",\n              onChange: handleChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), formErrors.name && fieldsState.name && /*#__PURE__*/_jsxDEV(FormErrors, {\n              errors: formErrors.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 55\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            mb: \"24px\",\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              htmlFor: \"body\",\n              children: t('Content')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              color: \"textSubtle\",\n              mb: \"8px\",\n              children: t('Tip: write in Markdown!')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(EasyMde, {\n              id: \"body\",\n              name: \"body\",\n              onTextChange: handleEasyMdeChange,\n              value: body,\n              options: options,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), formErrors.body && fieldsState.body && /*#__PURE__*/_jsxDEV(FormErrors, {\n              errors: formErrors.body\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 55\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), body && /*#__PURE__*/_jsxDEV(Box, {\n            mb: \"24px\",\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                children: /*#__PURE__*/_jsxDEV(Heading, {\n                  as: \"h3\",\n                  scale: \"md\",\n                  children: t('Preview')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n                p: \"0\",\n                px: \"24px\",\n                children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: body\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Choices, {\n            choices: choices,\n            onChange: handleChoiceChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), formErrors.choices && fieldsState.choices && /*#__PURE__*/_jsxDEV(FormErrors, {\n            errors: formErrors.choices\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 59\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(Heading, {\n                as: \"h3\",\n                scale: \"md\",\n                children: t('Actions')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                mb: \"24px\",\n                children: [/*#__PURE__*/_jsxDEV(SecondaryLabel, {\n                  children: t('Start Date')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                  name: \"startDate\",\n                  onChange: handleDateChange('startDate'),\n                  selected: startDate,\n                  placeholderText: \"YYYY/MM/DD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this), formErrors.startDate && fieldsState.startDate && /*#__PURE__*/_jsxDEV(FormErrors, {\n                  errors: formErrors.startDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 69\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                mb: \"24px\",\n                children: [/*#__PURE__*/_jsxDEV(SecondaryLabel, {\n                  children: t('Start Time')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TimePicker, {\n                  name: \"startTime\",\n                  onChange: handleDateChange('startTime'),\n                  selected: startTime,\n                  placeholderText: \"00:00\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 19\n                }, this), formErrors.startTime && fieldsState.startTime && /*#__PURE__*/_jsxDEV(FormErrors, {\n                  errors: formErrors.startTime\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 69\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                mb: \"24px\",\n                children: [/*#__PURE__*/_jsxDEV(SecondaryLabel, {\n                  children: t('End Date')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                  name: \"endDate\",\n                  onChange: handleDateChange('endDate'),\n                  selected: endDate,\n                  placeholderText: \"YYYY/MM/DD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 19\n                }, this), formErrors.endDate && fieldsState.endDate && /*#__PURE__*/_jsxDEV(FormErrors, {\n                  errors: formErrors.endDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 65\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                mb: \"24px\",\n                children: [/*#__PURE__*/_jsxDEV(SecondaryLabel, {\n                  children: t('End Time')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TimePicker, {\n                  name: \"endTime\",\n                  onChange: handleDateChange('endTime'),\n                  selected: endTime,\n                  placeholderText: \"00:00\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 19\n                }, this), formErrors.endTime && fieldsState.endTime && /*#__PURE__*/_jsxDEV(FormErrors, {\n                  errors: formErrors.endTime\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 65\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this), account && /*#__PURE__*/_jsxDEV(Flex, {\n                alignItems: \"center\",\n                mb: \"8px\",\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  color: \"textSubtle\",\n                  mr: \"16px\",\n                  children: t('Creator')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(LinkExternal, {\n                  href: getBscScanLink(account, 'address'),\n                  children: truncateWalletAddress(account)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                alignItems: \"center\",\n                mb: \"16px\",\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  color: \"textSubtle\",\n                  mr: \"16px\",\n                  children: t('Snapshot')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(LinkExternal, {\n                  href: getBscScanLink(snapshot, 'block'),\n                  children: snapshot\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), account ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  width: \"100%\",\n                  isLoading: isLoading,\n                  endIcon: isLoading ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n                    spin: true,\n                    color: \"currentColor\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 44\n                  }, this) : null,\n                  disabled: !isEmpty(formErrors),\n                  mb: \"16px\",\n                  children: t('Publish')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  color: \"failure\",\n                  as: \"p\",\n                  mb: \"4px\",\n                  children: [t('You need at least %count% voting power to publish a proposal.', {\n                    count: VOTE_THRESHOLD\n                  }), ' ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  scale: \"sm\",\n                  type: \"button\",\n                  variant: \"text\",\n                  onClick: onPresentVoteDetailsModal,\n                  p: 0,\n                  children: t('Check voting power')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(ConnectWalletButton, {\n                width: \"100%\",\n                type: \"button\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateProposal, \"w6A0fkch3L/3q/xvQ+0H4g4Rpcs=\", false, function () {\n  return [useTranslation, useWeb3React, useInitialBlock, useHistory, useWeb3Provider, useToast, useModal];\n});\n_c3 = CreateProposal;\nexport default CreateProposal;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"EasyMde$lazy\");\n$RefreshReg$(_c2, \"EasyMde\");\n$RefreshReg$(_c3, \"CreateProposal\");","map":{"version":3,"names":["React","lazy","useEffect","useState","useMemo","AutoRenewIcon","Box","Breadcrumbs","Button","Card","CardBody","CardHeader","Flex","Heading","Input","LinkExternal","Text","useModal","useHistory","useWeb3React","times","isEmpty","useInitialBlock","SnapshotCommand","useToast","useWeb3Provider","getBscScanLink","truncateWalletAddress","signMessage","useTranslation","Container","DatePicker","TimePicker","ConnectWalletButton","ReactMarkdown","BreadcrumbLink","sendSnaphotData","generateMetaData","generatePayloadData","Layout","FormErrors","Label","SecondaryLabel","Choices","makeChoice","MINIMUM_CHOICES","combineDateAndTime","getFormErrors","ADMIN_ADDRESS","VOTE_THRESHOLD","VoteDetailsModal","jsxDEV","_jsxDEV","Fragment","_Fragment","EasyMde","_c","_c2","CreateProposal","_s","state","setState","name","body","choices","map","startDate","startTime","endDate","endTime","snapshot","isLoading","setIsLoading","fieldsState","setFieldsState","t","account","initialBlock","push","library","toastSuccess","toastError","onPresentVoteDetailsModal","block","fileName","_jsxFileName","lineNumber","columnNumber","formErrors","handleSubmit","evt","preventDefault","proposal","JSON","stringify","type","PROPOSAL","payload","start","end","filter","choice","value","metadata","sig","msg","address","data","ipfsHash","error","message","console","updateValue","key","prevState","prevFieldsState","handleChange","inputName","currentTarget","handleEasyMdeChange","handleChoiceChange","newChoices","handleDateChange","options","hideIcons","py","children","mb","to","onSubmit","htmlFor","id","scale","onChange","required","errors","color","onTextChange","as","p","px","selected","placeholderText","alignItems","mr","href","width","endIcon","spin","disabled","count","variant","onClick","_c3","$RefreshReg$"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Voting/CreateProposal/index.tsx"],"sourcesContent":["import React, { ChangeEvent, FormEvent, lazy, useEffect, useState, useMemo } from 'react'\r\nimport {\r\n  AutoRenewIcon,\r\n  Box,\r\n  Breadcrumbs,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Flex,\r\n  Heading,\r\n  Input,\r\n  LinkExternal,\r\n  Text,\r\n  useModal,\r\n} from '@pancakeswap/uikit'\r\nimport { useHistory } from 'react-router'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport times from 'lodash/times'\r\nimport isEmpty from 'lodash/isEmpty'\r\nimport { useInitialBlock } from 'state/block/hooks'\r\nimport { SnapshotCommand } from 'state/types'\r\nimport useToast from 'hooks/useToast'\r\nimport useWeb3Provider from 'hooks/useActiveWeb3React'\r\nimport { getBscScanLink } from 'utils'\r\nimport truncateWalletAddress from 'utils/truncateWalletAddress'\r\nimport { signMessage } from 'utils/web3React'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Container from 'components/Layout/Container'\r\nimport { DatePicker, TimePicker } from 'components/DatePicker'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport ReactMarkdown from 'components/ReactMarkdown'\r\nimport BreadcrumbLink from '../components/BreadcrumbLink'\r\nimport { sendSnaphotData, Message, generateMetaData, generatePayloadData } from '../helpers'\r\nimport Layout from '../components/Layout'\r\nimport { FormErrors, Label, SecondaryLabel } from './styles'\r\nimport Choices, { Choice, makeChoice, MINIMUM_CHOICES } from './Choices'\r\nimport { combineDateAndTime, getFormErrors } from './helpers'\r\nimport { FormState } from './types'\r\nimport { ADMIN_ADDRESS, VOTE_THRESHOLD } from '../config'\r\nimport VoteDetailsModal from '../components/VoteDetailsModal'\r\n\r\nconst EasyMde = lazy(() => import('components/EasyMde'))\r\n\r\nconst CreateProposal = () => {\r\n  const [state, setState] = useState<FormState>({\r\n    name: '',\r\n    body: '',\r\n    choices: times(MINIMUM_CHOICES).map(makeChoice),\r\n    startDate: null,\r\n    startTime: null,\r\n    endDate: null,\r\n    endTime: null,\r\n    snapshot: 0,\r\n  })\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [fieldsState, setFieldsState] = useState<{ [key: string]: boolean }>({})\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const initialBlock = useInitialBlock()\r\n  const { push } = useHistory()\r\n  const { library } = useWeb3Provider()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const [onPresentVoteDetailsModal] = useModal(<VoteDetailsModal block={state.snapshot} />)\r\n  const { name, body, choices, startDate, startTime, endDate, endTime, snapshot } = state\r\n  const formErrors = getFormErrors(state, t)\r\n\r\n  const handleSubmit = async (evt: FormEvent<HTMLFormElement>) => {\r\n    evt.preventDefault()\r\n\r\n    try {\r\n      setIsLoading(true)\r\n      const proposal = JSON.stringify({\r\n        ...generatePayloadData(),\r\n        type: SnapshotCommand.PROPOSAL,\r\n        payload: {\r\n          name,\r\n          body,\r\n          snapshot,\r\n          start: combineDateAndTime(startDate, startTime),\r\n          end: combineDateAndTime(endDate, endTime),\r\n          choices: choices\r\n            .filter((choice) => choice.value)\r\n            .map((choice) => {\r\n              return choice.value\r\n            }),\r\n          metadata: generateMetaData(),\r\n          type: 'single-choice',\r\n        },\r\n      })\r\n\r\n      const sig = await signMessage(library, account, proposal)\r\n\r\n      if (sig) {\r\n        const msg: Message = { address: account, msg: proposal, sig }\r\n\r\n        // Save proposal to snapshot\r\n        const data = await sendSnaphotData(msg)\r\n\r\n        // Redirect user to newly created proposal page\r\n        push(`/voting/proposal/${data.ipfsHash}`)\r\n\r\n        toastSuccess(t('Proposal created!'))\r\n      } else {\r\n        toastError(t('Error'), t('Unable to sign payload'))\r\n      }\r\n    } catch (error) {\r\n      toastError(t('Error'), error?.message || error?.error)\r\n      console.error(error)\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const updateValue = (key: string, value: string | Choice[] | Date) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [key]: value,\r\n    }))\r\n\r\n    // Keep track of what fields the user has attempted to edit\r\n    setFieldsState((prevFieldsState) => ({\r\n      ...prevFieldsState,\r\n      [key]: true,\r\n    }))\r\n  }\r\n\r\n  const handleChange = (evt: ChangeEvent<HTMLInputElement>) => {\r\n    const { name: inputName, value } = evt.currentTarget\r\n    updateValue(inputName, value)\r\n  }\r\n\r\n  const handleEasyMdeChange = (value: string) => {\r\n    updateValue('body', value)\r\n  }\r\n\r\n  const handleChoiceChange = (newChoices: Choice[]) => {\r\n    updateValue('choices', newChoices)\r\n  }\r\n\r\n  const handleDateChange = (key: string) => (value: Date) => {\r\n    updateValue(key, value)\r\n  }\r\n\r\n  const options = useMemo(\r\n    () => ({\r\n      hideIcons: account === ADMIN_ADDRESS ? [] : ['guide', 'fullscreen', 'preview', 'side-by-side', 'image'],\r\n    }),\r\n    [account],\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (initialBlock > 0) {\r\n      setState((prevState) => ({\r\n        ...prevState,\r\n        snapshot: initialBlock,\r\n      }))\r\n    }\r\n  }, [initialBlock, setState])\r\n\r\n  return (\r\n    <Container py=\"40px\">\r\n      <Box mb=\"48px\">\r\n        <Breadcrumbs>\r\n          <BreadcrumbLink to=\"/\">{t('Home')}</BreadcrumbLink>\r\n          <BreadcrumbLink to=\"/voting\">{t('Voting')}</BreadcrumbLink>\r\n          <Text>{t('Make a Proposal')}</Text>\r\n        </Breadcrumbs>\r\n      </Box>\r\n      <form onSubmit={handleSubmit}>\r\n        <Layout>\r\n          <Box>\r\n            <Box mb=\"24px\">\r\n              <Label htmlFor=\"name\">{t('Title')}</Label>\r\n              <Input id=\"name\" name=\"name\" value={name} scale=\"lg\" onChange={handleChange} required />\r\n              {formErrors.name && fieldsState.name && <FormErrors errors={formErrors.name} />}\r\n            </Box>\r\n            <Box mb=\"24px\">\r\n              <Label htmlFor=\"body\">{t('Content')}</Label>\r\n              <Text color=\"textSubtle\" mb=\"8px\">\r\n                {t('Tip: write in Markdown!')}\r\n              </Text>\r\n              <EasyMde\r\n                id=\"body\"\r\n                name=\"body\"\r\n                onTextChange={handleEasyMdeChange}\r\n                value={body}\r\n                options={options}\r\n                required\r\n              />\r\n              {formErrors.body && fieldsState.body && <FormErrors errors={formErrors.body} />}\r\n            </Box>\r\n            {body && (\r\n              <Box mb=\"24px\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <Heading as=\"h3\" scale=\"md\">\r\n                      {t('Preview')}\r\n                    </Heading>\r\n                  </CardHeader>\r\n                  <CardBody p=\"0\" px=\"24px\">\r\n                    <ReactMarkdown>{body}</ReactMarkdown>\r\n                  </CardBody>\r\n                </Card>\r\n              </Box>\r\n            )}\r\n            <Choices choices={choices} onChange={handleChoiceChange} />\r\n            {formErrors.choices && fieldsState.choices && <FormErrors errors={formErrors.choices} />}\r\n          </Box>\r\n          <Box>\r\n            <Card>\r\n              <CardHeader>\r\n                <Heading as=\"h3\" scale=\"md\">\r\n                  {t('Actions')}\r\n                </Heading>\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Box mb=\"24px\">\r\n                  <SecondaryLabel>{t('Start Date')}</SecondaryLabel>\r\n                  <DatePicker\r\n                    name=\"startDate\"\r\n                    onChange={handleDateChange('startDate')}\r\n                    selected={startDate}\r\n                    placeholderText=\"YYYY/MM/DD\"\r\n                  />\r\n                  {formErrors.startDate && fieldsState.startDate && <FormErrors errors={formErrors.startDate} />}\r\n                </Box>\r\n                <Box mb=\"24px\">\r\n                  <SecondaryLabel>{t('Start Time')}</SecondaryLabel>\r\n                  <TimePicker\r\n                    name=\"startTime\"\r\n                    onChange={handleDateChange('startTime')}\r\n                    selected={startTime}\r\n                    placeholderText=\"00:00\"\r\n                  />\r\n                  {formErrors.startTime && fieldsState.startTime && <FormErrors errors={formErrors.startTime} />}\r\n                </Box>\r\n                <Box mb=\"24px\">\r\n                  <SecondaryLabel>{t('End Date')}</SecondaryLabel>\r\n                  <DatePicker\r\n                    name=\"endDate\"\r\n                    onChange={handleDateChange('endDate')}\r\n                    selected={endDate}\r\n                    placeholderText=\"YYYY/MM/DD\"\r\n                  />\r\n                  {formErrors.endDate && fieldsState.endDate && <FormErrors errors={formErrors.endDate} />}\r\n                </Box>\r\n                <Box mb=\"24px\">\r\n                  <SecondaryLabel>{t('End Time')}</SecondaryLabel>\r\n                  <TimePicker\r\n                    name=\"endTime\"\r\n                    onChange={handleDateChange('endTime')}\r\n                    selected={endTime}\r\n                    placeholderText=\"00:00\"\r\n                  />\r\n                  {formErrors.endTime && fieldsState.endTime && <FormErrors errors={formErrors.endTime} />}\r\n                </Box>\r\n                {account && (\r\n                  <Flex alignItems=\"center\" mb=\"8px\">\r\n                    <Text color=\"textSubtle\" mr=\"16px\">\r\n                      {t('Creator')}\r\n                    </Text>\r\n                    <LinkExternal href={getBscScanLink(account, 'address')}>\r\n                      {truncateWalletAddress(account)}\r\n                    </LinkExternal>\r\n                  </Flex>\r\n                )}\r\n                <Flex alignItems=\"center\" mb=\"16px\">\r\n                  <Text color=\"textSubtle\" mr=\"16px\">\r\n                    {t('Snapshot')}\r\n                  </Text>\r\n                  <LinkExternal href={getBscScanLink(snapshot, 'block')}>{snapshot}</LinkExternal>\r\n                </Flex>\r\n                {account ? (\r\n                  <>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      width=\"100%\"\r\n                      isLoading={isLoading}\r\n                      endIcon={isLoading ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n                      disabled={!isEmpty(formErrors)}\r\n                      mb=\"16px\"\r\n                    >\r\n                      {t('Publish')}\r\n                    </Button>\r\n                    <Text color=\"failure\" as=\"p\" mb=\"4px\">\r\n                      {t('You need at least %count% voting power to publish a proposal.', { count: VOTE_THRESHOLD })}{' '}\r\n                    </Text>\r\n                    <Button scale=\"sm\" type=\"button\" variant=\"text\" onClick={onPresentVoteDetailsModal} p={0}>\r\n                      {t('Check voting power')}\r\n                    </Button>\r\n                  </>\r\n                ) : (\r\n                  <ConnectWalletButton width=\"100%\" type=\"button\" />\r\n                )}\r\n              </CardBody>\r\n            </Card>\r\n          </Box>\r\n        </Layout>\r\n      </form>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default CreateProposal\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}