{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Devrim\\\\Documents\\\\FRANKswapUIforProspBlast\\\\src\\\\views\\\\Predictions\\\\components\\\\RoundCard\\\\SetPositionCard.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { ArrowBackIcon, CardBody, CardHeader, Flex, Heading, IconButton, Button, BinanceIcon, Text, BalanceInput, Slider, Box, AutoRenewIcon } from '@pancakeswap/uikit';\nimport { ethers } from 'ethers';\nimport { parseUnits } from 'ethers/lib/utils';\nimport { useWeb3React } from '@web3-react/core';\nimport { useGetMinBetAmount } from 'state/hooks';\nimport { useTranslation } from 'contexts/Localization';\nimport { usePredictionsContract } from 'hooks/useContract';\nimport { useGetBnbBalance } from 'hooks/useTokenBalance';\nimport useToast from 'hooks/useToast';\nimport { BetPosition } from 'state/types';\nimport { formatBigNumber, formatFixedNumber } from 'utils/formatBalance';\nimport ConnectWalletButton from 'components/ConnectWalletButton';\nimport PositionTag from '../PositionTag';\nimport useSwiper from '../../hooks/useSwiper';\nimport FlexRow from '../FlexRow';\nimport Card from './Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// /!\\ TEMPORARY /!\\\n// Set default gasPrice (6 gwei) when calling BetBull/BetBear before new contract is released fixing this 'issue'.\n// TODO: Remove on beta-v2 smart contract release.\nconst gasPrice = parseUnits('6', 'gwei');\nconst dust = parseUnits('0.01', 18);\nconst percentShortcuts = [10, 25, 50, 75];\n\nconst getButtonProps = (value, bnbBalance, minBetAmountBalance) => {\n  const hasSufficientBalance = () => {\n    if (value.gt(0)) {\n      return value.lte(bnbBalance);\n    }\n\n    return bnbBalance.gt(0);\n  };\n\n  if (!hasSufficientBalance()) {\n    return {\n      key: 'Insufficient BNB balance',\n      disabled: true\n    };\n  }\n\n  if (value.eq(0)) {\n    return {\n      key: 'Enter an amount',\n      disabled: true\n    };\n  }\n\n  return {\n    key: 'Confirm',\n    disabled: value.lt(minBetAmountBalance)\n  };\n};\n\nconst getValueAsEthersBn = value => {\n  const valueAsFloat = parseFloat(value);\n  return Number.isNaN(valueAsFloat) ? ethers.BigNumber.from(0) : parseUnits(value);\n};\n\nconst SetPositionCard = ({\n  position,\n  togglePosition,\n  onBack,\n  onSuccess\n}) => {\n  _s();\n\n  const [value, setValue] = useState('');\n  const [isTxPending, setIsTxPending] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [percent, setPercent] = useState(0);\n  const {\n    account\n  } = useWeb3React();\n  const {\n    swiper\n  } = useSwiper();\n  const {\n    balance: bnbBalance\n  } = useGetBnbBalance();\n  const minBetAmount = useGetMinBetAmount();\n  const {\n    t\n  } = useTranslation();\n  const {\n    toastError\n  } = useToast();\n  const predictionsContract = usePredictionsContract(); // Convert bnb balance to ethers.BigNumber\n\n  const bnbBalanceAsBn = useMemo(() => {\n    return ethers.BigNumber.from(bnbBalance.toString());\n  }, [bnbBalance]);\n  const maxBalance = useMemo(() => {\n    return bnbBalanceAsBn.gt(dust) ? bnbBalanceAsBn.sub(dust) : dust;\n  }, [bnbBalanceAsBn]);\n  const balanceDisplay = formatBigNumber(bnbBalanceAsBn);\n  const valueAsBn = getValueAsEthersBn(value);\n  const showFieldWarning = account && valueAsBn.gt(0) && errorMessage !== null;\n\n  const handleInputChange = input => {\n    const inputAsBn = getValueAsEthersBn(input);\n\n    if (inputAsBn.eq(0)) {\n      setPercent(0);\n    } else {\n      const inputAsFn = ethers.FixedNumber.from(inputAsBn);\n      const maxValueAsFn = ethers.FixedNumber.from(maxBalance);\n      const hundredAsFn = ethers.FixedNumber.from(100);\n      const percentage = inputAsFn.divUnsafe(maxValueAsFn).mulUnsafe(hundredAsFn);\n      const percentageAsFloat = percentage.toUnsafeFloat();\n      setPercent(percentageAsFloat > 100 ? 100 : percentageAsFloat);\n    }\n\n    setValue(input);\n  };\n\n  const handlePercentChange = sliderPercent => {\n    if (sliderPercent > 0) {\n      const maxValueAsFn = ethers.FixedNumber.from(maxBalance);\n      const hundredAsFn = ethers.FixedNumber.from(100);\n      const sliderPercentAsFn = ethers.FixedNumber.from(sliderPercent.toFixed(18)).divUnsafe(hundredAsFn);\n      const balancePercentage = maxValueAsFn.mulUnsafe(sliderPercentAsFn);\n      setValue(formatFixedNumber(balancePercentage));\n    } else {\n      setValue('');\n    }\n\n    setPercent(sliderPercent);\n  }; // Clear value\n\n\n  const handleGoBack = () => {\n    setValue('');\n    setPercent(0);\n    onBack();\n  }; // Disable the swiper events to avoid conflicts\n\n\n  const handleMouseOver = () => {\n    swiper.keyboard.disable();\n    swiper.mousewheel.disable();\n    swiper.detachEvents();\n  };\n\n  const handleMouseOut = () => {\n    swiper.keyboard.enable();\n    swiper.mousewheel.enable();\n    swiper.attachEvents();\n  };\n\n  const {\n    key,\n    disabled\n  } = getButtonProps(valueAsBn, maxBalance, minBetAmount);\n\n  const handleEnterPosition = async () => {\n    const betMethod = position === BetPosition.BULL ? 'betBull' : 'betBear';\n\n    try {\n      const tx = await predictionsContract[betMethod]({\n        value: valueAsBn.toString(),\n        gasPrice\n      });\n      setIsTxPending(true);\n      const receipt = await tx.wait();\n      onSuccess(valueAsBn.toString(), receipt.transactionHash);\n    } catch {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));\n    } finally {\n      setIsTxPending(false);\n    }\n  }; // Warnings\n\n\n  useEffect(() => {\n    const inputAmount = getValueAsEthersBn(value);\n    const hasSufficientBalance = inputAmount.gt(0) && inputAmount.lte(maxBalance);\n\n    if (!hasSufficientBalance) {\n      setErrorMessage({\n        key: 'Insufficient BNB balance'\n      });\n    } else if (inputAmount.gt(0) && inputAmount.lt(minBetAmount)) {\n      setErrorMessage({\n        key: 'A minimum amount of %num% %token% is required',\n        data: {\n          num: formatBigNumber(minBetAmount),\n          token: 'BNB'\n        }\n      });\n    } else {\n      setErrorMessage(null);\n    }\n  }, [value, maxBalance, minBetAmount, setErrorMessage]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    onMouseOver: handleMouseOver,\n    onMouseOut: handleMouseOut,\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      p: \"16px\",\n      children: /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          variant: \"text\",\n          scale: \"sm\",\n          onClick: handleGoBack,\n          mr: \"8px\",\n          children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n            width: \"24px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FlexRow, {\n          children: /*#__PURE__*/_jsxDEV(Heading, {\n            scale: \"md\",\n            children: t('Set Position')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PositionTag, {\n          betPosition: position,\n          onClick: togglePosition,\n          children: position === BetPosition.BULL ? t('Up') : t('Down')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n      py: \"16px\",\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        mb: \"8px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          textAlign: \"right\",\n          color: \"textSubtle\",\n          children: [t('Commit'), \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(BinanceIcon, {\n            mr: \"4px  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            bold: true,\n            textTransform: \"uppercase\",\n            children: \"BNB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BalanceInput, {\n        value: value,\n        onUserInput: handleInputChange,\n        isWarning: showFieldWarning,\n        inputProps: {\n          disabled: !account || isTxPending\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), showFieldWarning && /*#__PURE__*/_jsxDEV(Text, {\n        color: \"failure\",\n        fontSize: \"12px\",\n        mt: \"4px\",\n        textAlign: \"right\",\n        children: t(errorMessage.key, errorMessage.data)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        textAlign: \"right\",\n        mb: \"16px\",\n        color: \"textSubtle\",\n        fontSize: \"12px\",\n        style: {\n          height: '18px'\n        },\n        children: account && t('Balance: %balance%', {\n          balance: balanceDisplay\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Slider, {\n        name: \"balance\",\n        min: 0,\n        max: 100,\n        value: percent,\n        onValueChanged: handlePercentChange,\n        valueLabel: account ? `${percent.toFixed(percent > 0 ? 1 : 0)}%` : '',\n        step: 0.01,\n        disabled: !account || isTxPending,\n        mb: \"4px\",\n        className: !account || isTxPending ? '' : 'swiper-no-swiping'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        mb: \"16px\",\n        children: [percentShortcuts.map(percentShortcut => {\n          const handleClick = () => {\n            handlePercentChange(percentShortcut);\n          };\n\n          return /*#__PURE__*/_jsxDEV(Button, {\n            scale: \"xs\",\n            variant: \"tertiary\",\n            onClick: handleClick,\n            disabled: !account || isTxPending,\n            style: {\n              flex: 1\n            },\n            children: `${percentShortcut}%`\n          }, percentShortcut, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(Button, {\n          scale: \"xs\",\n          variant: \"tertiary\",\n          onClick: () => handlePercentChange(100),\n          disabled: !account || isTxPending,\n          children: t('Max')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mb: \"8px\",\n        children: account ? /*#__PURE__*/_jsxDEV(Button, {\n          width: \"100%\",\n          disabled: !account || disabled,\n          onClick: handleEnterPosition,\n          isLoading: isTxPending,\n          endIcon: isTxPending ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n            color: \"currentColor\",\n            spin: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 38\n          }, this) : null,\n          children: t(key)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(ConnectWalletButton, {\n          width: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        as: \"p\",\n        fontSize: \"12px\",\n        lineHeight: 1,\n        color: \"textSubtle\",\n        children: t('You won’t be able to remove or change your position once you enter it.')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SetPositionCard, \"VTTTI6IEsledEjC5QxIo0FIqFCE=\", false, function () {\n  return [useWeb3React, useSwiper, useGetBnbBalance, useGetMinBetAmount, useTranslation, useToast, usePredictionsContract];\n});\n\n_c = SetPositionCard;\nexport default SetPositionCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"SetPositionCard\");","map":{"version":3,"sources":["C:/Users/Devrim/Documents/FRANKswapUIforProspBlast/src/views/Predictions/components/RoundCard/SetPositionCard.tsx"],"names":["React","useEffect","useMemo","useState","ArrowBackIcon","CardBody","CardHeader","Flex","Heading","IconButton","Button","BinanceIcon","Text","BalanceInput","Slider","Box","AutoRenewIcon","ethers","parseUnits","useWeb3React","useGetMinBetAmount","useTranslation","usePredictionsContract","useGetBnbBalance","useToast","BetPosition","formatBigNumber","formatFixedNumber","ConnectWalletButton","PositionTag","useSwiper","FlexRow","Card","gasPrice","dust","percentShortcuts","getButtonProps","value","bnbBalance","minBetAmountBalance","hasSufficientBalance","gt","lte","key","disabled","eq","lt","getValueAsEthersBn","valueAsFloat","parseFloat","Number","isNaN","BigNumber","from","SetPositionCard","position","togglePosition","onBack","onSuccess","setValue","isTxPending","setIsTxPending","errorMessage","setErrorMessage","percent","setPercent","account","swiper","balance","minBetAmount","t","toastError","predictionsContract","bnbBalanceAsBn","toString","maxBalance","sub","balanceDisplay","valueAsBn","showFieldWarning","handleInputChange","input","inputAsBn","inputAsFn","FixedNumber","maxValueAsFn","hundredAsFn","percentage","divUnsafe","mulUnsafe","percentageAsFloat","toUnsafeFloat","handlePercentChange","sliderPercent","sliderPercentAsFn","toFixed","balancePercentage","handleGoBack","handleMouseOver","keyboard","disable","mousewheel","detachEvents","handleMouseOut","enable","attachEvents","handleEnterPosition","betMethod","BULL","tx","receipt","wait","transactionHash","inputAmount","data","num","token","height","map","percentShortcut","handleClick","flex"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from 'react'\r\nimport {\r\n  ArrowBackIcon,\r\n  CardBody,\r\n  CardHeader,\r\n  Flex,\r\n  Heading,\r\n  IconButton,\r\n  Button,\r\n  BinanceIcon,\r\n  Text,\r\n  BalanceInput,\r\n  Slider,\r\n  Box,\r\n  AutoRenewIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { ethers } from 'ethers'\r\nimport { parseUnits } from 'ethers/lib/utils'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useGetMinBetAmount } from 'state/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport { useGetBnbBalance } from 'hooks/useTokenBalance'\r\nimport useToast from 'hooks/useToast'\r\nimport { BetPosition } from 'state/types'\r\nimport { formatBigNumber, formatFixedNumber } from 'utils/formatBalance'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport PositionTag from '../PositionTag'\r\nimport useSwiper from '../../hooks/useSwiper'\r\nimport FlexRow from '../FlexRow'\r\nimport Card from './Card'\r\n\r\ninterface SetPositionCardProps {\r\n  position: BetPosition\r\n  togglePosition: () => void\r\n  onBack: () => void\r\n  onSuccess: (decimalValue: string, hash: string) => Promise<void>\r\n}\r\n\r\n// /!\\ TEMPORARY /!\\\r\n// Set default gasPrice (6 gwei) when calling BetBull/BetBear before new contract is released fixing this 'issue'.\r\n// TODO: Remove on beta-v2 smart contract release.\r\nconst gasPrice = parseUnits('6', 'gwei')\r\nconst dust = parseUnits('0.01', 18)\r\nconst percentShortcuts = [10, 25, 50, 75]\r\n\r\nconst getButtonProps = (\r\n  value: ethers.BigNumber,\r\n  bnbBalance: ethers.BigNumber,\r\n  minBetAmountBalance: ethers.BigNumber,\r\n) => {\r\n  const hasSufficientBalance = () => {\r\n    if (value.gt(0)) {\r\n      return value.lte(bnbBalance)\r\n    }\r\n    return bnbBalance.gt(0)\r\n  }\r\n\r\n  if (!hasSufficientBalance()) {\r\n    return { key: 'Insufficient BNB balance', disabled: true }\r\n  }\r\n\r\n  if (value.eq(0)) {\r\n    return { key: 'Enter an amount', disabled: true }\r\n  }\r\n\r\n  return { key: 'Confirm', disabled: value.lt(minBetAmountBalance) }\r\n}\r\n\r\nconst getValueAsEthersBn = (value: string) => {\r\n  const valueAsFloat = parseFloat(value)\r\n  return Number.isNaN(valueAsFloat) ? ethers.BigNumber.from(0) : parseUnits(value)\r\n}\r\n\r\nconst SetPositionCard: React.FC<SetPositionCardProps> = ({ position, togglePosition, onBack, onSuccess }) => {\r\n  const [value, setValue] = useState('')\r\n  const [isTxPending, setIsTxPending] = useState(false)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [percent, setPercent] = useState(0)\r\n\r\n  const { account } = useWeb3React()\r\n  const { swiper } = useSwiper()\r\n  const { balance: bnbBalance } = useGetBnbBalance()\r\n  const minBetAmount = useGetMinBetAmount()\r\n  const { t } = useTranslation()\r\n  const { toastError } = useToast()\r\n  const predictionsContract = usePredictionsContract()\r\n\r\n  // Convert bnb balance to ethers.BigNumber\r\n  const bnbBalanceAsBn = useMemo(() => {\r\n    return ethers.BigNumber.from(bnbBalance.toString())\r\n  }, [bnbBalance])\r\n  const maxBalance = useMemo(() => {\r\n    return bnbBalanceAsBn.gt(dust) ? bnbBalanceAsBn.sub(dust) : dust\r\n  }, [bnbBalanceAsBn])\r\n  const balanceDisplay = formatBigNumber(bnbBalanceAsBn)\r\n\r\n  const valueAsBn = getValueAsEthersBn(value)\r\n  const showFieldWarning = account && valueAsBn.gt(0) && errorMessage !== null\r\n\r\n  const handleInputChange = (input: string) => {\r\n    const inputAsBn = getValueAsEthersBn(input)\r\n\r\n    if (inputAsBn.eq(0)) {\r\n      setPercent(0)\r\n    } else {\r\n      const inputAsFn = ethers.FixedNumber.from(inputAsBn)\r\n      const maxValueAsFn = ethers.FixedNumber.from(maxBalance)\r\n      const hundredAsFn = ethers.FixedNumber.from(100)\r\n      const percentage = inputAsFn.divUnsafe(maxValueAsFn).mulUnsafe(hundredAsFn)\r\n      const percentageAsFloat = percentage.toUnsafeFloat()\r\n\r\n      setPercent(percentageAsFloat > 100 ? 100 : percentageAsFloat)\r\n    }\r\n    setValue(input)\r\n  }\r\n\r\n  const handlePercentChange = (sliderPercent: number) => {\r\n    if (sliderPercent > 0) {\r\n      const maxValueAsFn = ethers.FixedNumber.from(maxBalance)\r\n      const hundredAsFn = ethers.FixedNumber.from(100)\r\n      const sliderPercentAsFn = ethers.FixedNumber.from(sliderPercent.toFixed(18)).divUnsafe(hundredAsFn)\r\n      const balancePercentage = maxValueAsFn.mulUnsafe(sliderPercentAsFn)\r\n      setValue(formatFixedNumber(balancePercentage))\r\n    } else {\r\n      setValue('')\r\n    }\r\n    setPercent(sliderPercent)\r\n  }\r\n\r\n  // Clear value\r\n  const handleGoBack = () => {\r\n    setValue('')\r\n    setPercent(0)\r\n    onBack()\r\n  }\r\n\r\n  // Disable the swiper events to avoid conflicts\r\n  const handleMouseOver = () => {\r\n    swiper.keyboard.disable()\r\n    swiper.mousewheel.disable()\r\n    swiper.detachEvents()\r\n  }\r\n\r\n  const handleMouseOut = () => {\r\n    swiper.keyboard.enable()\r\n    swiper.mousewheel.enable()\r\n    swiper.attachEvents()\r\n  }\r\n\r\n  const { key, disabled } = getButtonProps(valueAsBn, maxBalance, minBetAmount)\r\n\r\n  const handleEnterPosition = async () => {\r\n    const betMethod = position === BetPosition.BULL ? 'betBull' : 'betBear'\r\n\r\n    try {\r\n      const tx = await predictionsContract[betMethod]({ value: valueAsBn.toString(), gasPrice })\r\n      setIsTxPending(true)\r\n      const receipt = await tx.wait()\r\n      onSuccess(valueAsBn.toString(), receipt.transactionHash as string)\r\n    } catch {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n    } finally {\r\n      setIsTxPending(false)\r\n    }\r\n  }\r\n\r\n  // Warnings\r\n  useEffect(() => {\r\n    const inputAmount = getValueAsEthersBn(value)\r\n    const hasSufficientBalance = inputAmount.gt(0) && inputAmount.lte(maxBalance)\r\n\r\n    if (!hasSufficientBalance) {\r\n      setErrorMessage({ key: 'Insufficient BNB balance' })\r\n    } else if (inputAmount.gt(0) && inputAmount.lt(minBetAmount)) {\r\n      setErrorMessage({\r\n        key: 'A minimum amount of %num% %token% is required',\r\n        data: { num: formatBigNumber(minBetAmount), token: 'BNB' },\r\n      })\r\n    } else {\r\n      setErrorMessage(null)\r\n    }\r\n  }, [value, maxBalance, minBetAmount, setErrorMessage])\r\n\r\n  return (\r\n    <Card onMouseOver={handleMouseOver} onMouseOut={handleMouseOut}>\r\n      <CardHeader p=\"16px\">\r\n        <Flex alignItems=\"center\">\r\n          <IconButton variant=\"text\" scale=\"sm\" onClick={handleGoBack} mr=\"8px\">\r\n            <ArrowBackIcon width=\"24px\" />\r\n          </IconButton>\r\n          <FlexRow>\r\n            <Heading scale=\"md\">{t('Set Position')}</Heading>\r\n          </FlexRow>\r\n          <PositionTag betPosition={position} onClick={togglePosition}>\r\n            {position === BetPosition.BULL ? t('Up') : t('Down')}\r\n          </PositionTag>\r\n        </Flex>\r\n      </CardHeader>\r\n      <CardBody py=\"16px\">\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n          <Text textAlign=\"right\" color=\"textSubtle\">\r\n            {t('Commit')}:\r\n          </Text>\r\n          <Flex alignItems=\"center\">\r\n            <BinanceIcon mr=\"4px  \" />\r\n            <Text bold textTransform=\"uppercase\">\r\n              BNB\r\n            </Text>\r\n          </Flex>\r\n        </Flex>\r\n        <BalanceInput\r\n          value={value}\r\n          onUserInput={handleInputChange}\r\n          isWarning={showFieldWarning}\r\n          inputProps={{ disabled: !account || isTxPending }}\r\n        />\r\n        {showFieldWarning && (\r\n          <Text color=\"failure\" fontSize=\"12px\" mt=\"4px\" textAlign=\"right\">\r\n            {t(errorMessage.key, errorMessage.data)}\r\n          </Text>\r\n        )}\r\n        <Text textAlign=\"right\" mb=\"16px\" color=\"textSubtle\" fontSize=\"12px\" style={{ height: '18px' }}>\r\n          {account && t('Balance: %balance%', { balance: balanceDisplay })}\r\n        </Text>\r\n        <Slider\r\n          name=\"balance\"\r\n          min={0}\r\n          max={100}\r\n          value={percent}\r\n          onValueChanged={handlePercentChange}\r\n          valueLabel={account ? `${percent.toFixed(percent > 0 ? 1 : 0)}%` : ''}\r\n          step={0.01}\r\n          disabled={!account || isTxPending}\r\n          mb=\"4px\"\r\n          className={!account || isTxPending ? '' : 'swiper-no-swiping'}\r\n        />\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          {percentShortcuts.map((percentShortcut) => {\r\n            const handleClick = () => {\r\n              handlePercentChange(percentShortcut)\r\n            }\r\n\r\n            return (\r\n              <Button\r\n                key={percentShortcut}\r\n                scale=\"xs\"\r\n                variant=\"tertiary\"\r\n                onClick={handleClick}\r\n                disabled={!account || isTxPending}\r\n                style={{ flex: 1 }}\r\n              >\r\n                {`${percentShortcut}%`}\r\n              </Button>\r\n            )\r\n          })}\r\n          <Button\r\n            scale=\"xs\"\r\n            variant=\"tertiary\"\r\n            onClick={() => handlePercentChange(100)}\r\n            disabled={!account || isTxPending}\r\n          >\r\n            {t('Max')}\r\n          </Button>\r\n        </Flex>\r\n        <Box mb=\"8px\">\r\n          {account ? (\r\n            <Button\r\n              width=\"100%\"\r\n              disabled={!account || disabled}\r\n              onClick={handleEnterPosition}\r\n              isLoading={isTxPending}\r\n              endIcon={isTxPending ? <AutoRenewIcon color=\"currentColor\" spin /> : null}\r\n            >\r\n              {t(key)}\r\n            </Button>\r\n          ) : (\r\n            <ConnectWalletButton width=\"100%\" />\r\n          )}\r\n        </Box>\r\n        <Text as=\"p\" fontSize=\"12px\" lineHeight={1} color=\"textSubtle\">\r\n          {t('You won’t be able to remove or change your position once you enter it.')}\r\n        </Text>\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default SetPositionCard\r\n"]},"metadata":{},"sourceType":"module"}