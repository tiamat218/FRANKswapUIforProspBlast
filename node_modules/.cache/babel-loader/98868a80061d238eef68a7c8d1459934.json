{"ast":null,"code":"import BigNumber from'bignumber.js';import React,{useCallback,useMemo,useState}from'react';import{Button,Modal}from'@pancakeswap/uikit';import{ModalActions,ModalInput}from'components/Modal';import{useTranslation}from'contexts/Localization';import{getFullDisplayBalance}from'utils/formatBalance';import useToast from'hooks/useToast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WithdrawModal=_ref=>{let{onConfirm,onDismiss,max,tokenName=''}=_ref;const[val,setVal]=useState('');const{toastSuccess,toastError}=useToast();const[pendingTx,setPendingTx]=useState(false);const{t}=useTranslation();const fullBalance=useMemo(()=>{return getFullDisplayBalance(max);},[max]);const valNumber=new BigNumber(val);const fullBalanceNumber=new BigNumber(fullBalance);const handleChange=useCallback(e=>{if(e.currentTarget.validity.valid){setVal(e.currentTarget.value.replace(/,/g,'.'));}},[setVal]);const handleSelectMax=useCallback(()=>{setVal(fullBalance);},[fullBalance,setVal]);return/*#__PURE__*/_jsxs(Modal,{title:t('Unstake LP tokens'),onDismiss:onDismiss,children:[/*#__PURE__*/_jsx(ModalInput,{onSelectMax:handleSelectMax,onChange:handleChange,value:val,max:fullBalance,symbol:tokenName,inputTitle:t('Unstake')}),/*#__PURE__*/_jsxs(ModalActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onDismiss,width:\"100%\",disabled:pendingTx,children:t('Cancel')}),/*#__PURE__*/_jsx(Button,{disabled:pendingTx||!valNumber.isFinite()||valNumber.eq(0)||valNumber.gt(fullBalanceNumber),onClick:async()=>{setPendingTx(true);try{await onConfirm(val);toastSuccess(t('Unstaked!'),t('Your earnings have also been harvested to your wallet'));onDismiss();}catch(e){toastError(t('Error'),t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));console.error(e);}finally{setPendingTx(false);}},width:\"100%\",children:pendingTx?t('Confirming'):t('Confirm')})]})]});};export default WithdrawModal;","map":{"version":3,"names":["BigNumber","React","useCallback","useMemo","useState","Button","Modal","ModalActions","ModalInput","useTranslation","getFullDisplayBalance","useToast","jsx","_jsx","jsxs","_jsxs","WithdrawModal","_ref","onConfirm","onDismiss","max","tokenName","val","setVal","toastSuccess","toastError","pendingTx","setPendingTx","t","fullBalance","valNumber","fullBalanceNumber","handleChange","e","currentTarget","validity","valid","value","replace","handleSelectMax","title","children","onSelectMax","onChange","symbol","inputTitle","variant","onClick","width","disabled","isFinite","eq","gt","console","error"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Farms/components/WithdrawModal.tsx"],"sourcesContent":["import BigNumber from 'bignumber.js'\r\nimport React, { useCallback, useMemo, useState } from 'react'\r\nimport { Button, Modal } from '@pancakeswap/uikit'\r\nimport { ModalActions, ModalInput } from 'components/Modal'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getFullDisplayBalance } from 'utils/formatBalance'\r\nimport useToast from 'hooks/useToast'\r\n\r\ninterface WithdrawModalProps {\r\n  max: BigNumber\r\n  onConfirm: (amount: string) => void\r\n  onDismiss?: () => void\r\n  tokenName?: string\r\n}\r\n\r\nconst WithdrawModal: React.FC<WithdrawModalProps> = ({ onConfirm, onDismiss, max, tokenName = '' }) => {\r\n  const [val, setVal] = useState('')\r\n  const { toastSuccess, toastError } = useToast()\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  const { t } = useTranslation()\r\n  const fullBalance = useMemo(() => {\r\n    return getFullDisplayBalance(max)\r\n  }, [max])\r\n\r\n  const valNumber = new BigNumber(val)\r\n  const fullBalanceNumber = new BigNumber(fullBalance)\r\n\r\n  const handleChange = useCallback(\r\n    (e: React.FormEvent<HTMLInputElement>) => {\r\n      if (e.currentTarget.validity.valid) {\r\n        setVal(e.currentTarget.value.replace(/,/g, '.'))\r\n      }\r\n    },\r\n    [setVal],\r\n  )\r\n\r\n  const handleSelectMax = useCallback(() => {\r\n    setVal(fullBalance)\r\n  }, [fullBalance, setVal])\r\n\r\n  return (\r\n    <Modal title={t('Unstake LP tokens')} onDismiss={onDismiss}>\r\n      <ModalInput\r\n        onSelectMax={handleSelectMax}\r\n        onChange={handleChange}\r\n        value={val}\r\n        max={fullBalance}\r\n        symbol={tokenName}\r\n        inputTitle={t('Unstake')}\r\n      />\r\n      <ModalActions>\r\n        <Button variant=\"secondary\" onClick={onDismiss} width=\"100%\" disabled={pendingTx}>\r\n          {t('Cancel')}\r\n        </Button>\r\n        <Button\r\n          disabled={pendingTx || !valNumber.isFinite() || valNumber.eq(0) || valNumber.gt(fullBalanceNumber)}\r\n          onClick={async () => {\r\n            setPendingTx(true)\r\n            try {\r\n              await onConfirm(val)\r\n              toastSuccess(t('Unstaked!'), t('Your earnings have also been harvested to your wallet'))\r\n              onDismiss()\r\n            } catch (e) {\r\n              toastError(\r\n                t('Error'),\r\n                t('Please try again. Confirm the transaction and make sure you are paying enough gas!'),\r\n              )\r\n              console.error(e)\r\n            } finally {\r\n              setPendingTx(false)\r\n            }\r\n          }}\r\n          width=\"100%\"\r\n        >\r\n          {pendingTx ? t('Confirming') : t('Confirm')}\r\n        </Button>\r\n      </ModalActions>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default WithdrawModal\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}