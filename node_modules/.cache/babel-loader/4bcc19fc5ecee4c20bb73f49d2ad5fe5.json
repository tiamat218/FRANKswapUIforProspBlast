{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport useActiveWeb3React from 'hooks/useActiveWeb3React';\nimport useDebounce from 'hooks/useDebounce';\nimport useIsWindowVisible from 'hooks/useIsWindowVisible';\nimport { updateBlockNumber } from './actions';\nexport default function Updater() {\n  _s();\n  const {\n    library,\n    chainId\n  } = useActiveWeb3React();\n  const dispatch = useDispatch();\n  const windowVisible = useIsWindowVisible();\n  const [state, setState] = useState({\n    chainId,\n    blockNumber: null\n  });\n  const blockNumberCallback = useCallback(blockNumber => {\n    setState(prev => {\n      if (chainId === prev.chainId) {\n        if (typeof prev.blockNumber !== 'number') return {\n          chainId,\n          blockNumber\n        };\n        return {\n          chainId,\n          blockNumber: Math.max(blockNumber, prev.blockNumber)\n        };\n      }\n      return prev;\n    });\n  }, [chainId, setState]);\n\n  // attach/detach listeners\n  useEffect(() => {\n    if (!library || !chainId || !windowVisible) return undefined;\n    setState({\n      chainId,\n      blockNumber: null\n    });\n    library.getBlockNumber().then(blockNumberCallback).catch(error => console.error(`Failed to get block number for chainId: ${chainId}`, error));\n    library.on('block', blockNumberCallback);\n    return () => {\n      library.removeListener('block', blockNumberCallback);\n    };\n  }, [dispatch, chainId, library, blockNumberCallback, windowVisible]);\n  const debouncedState = useDebounce(state, 100);\n  useEffect(() => {\n    if (!debouncedState.chainId || !debouncedState.blockNumber || !windowVisible) return;\n    dispatch(updateBlockNumber({\n      chainId: debouncedState.chainId,\n      blockNumber: debouncedState.blockNumber\n    }));\n  }, [windowVisible, dispatch, debouncedState.blockNumber, debouncedState.chainId]);\n  return null;\n}\n_s(Updater, \"+ELlpgS7uWiL8lBd6ypbInhxaEU=\", false, function () {\n  return [useActiveWeb3React, useDispatch, useIsWindowVisible, useDebounce];\n});\n_c = Updater;\nvar _c;\n$RefreshReg$(_c, \"Updater\");","map":{"version":3,"names":["useCallback","useEffect","useState","useDispatch","useActiveWeb3React","useDebounce","useIsWindowVisible","updateBlockNumber","Updater","_s","library","chainId","dispatch","windowVisible","state","setState","blockNumber","blockNumberCallback","prev","Math","max","undefined","getBlockNumber","then","catch","error","console","on","removeListener","debouncedState","_c","$RefreshReg$"],"sources":["C:/Users/Devrim/Documents/swapUIforProspBlast/src/state/application/updater.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport useDebounce from 'hooks/useDebounce'\r\nimport useIsWindowVisible from 'hooks/useIsWindowVisible'\r\nimport { updateBlockNumber } from './actions'\r\n\r\nexport default function Updater(): null {\r\n  const { library, chainId } = useActiveWeb3React()\r\n  const dispatch = useDispatch()\r\n\r\n  const windowVisible = useIsWindowVisible()\r\n\r\n  const [state, setState] = useState<{ chainId: number | undefined; blockNumber: number | null }>({\r\n    chainId,\r\n    blockNumber: null,\r\n  })\r\n\r\n  const blockNumberCallback = useCallback(\r\n    (blockNumber: number) => {\r\n      setState((prev) => {\r\n        if (chainId === prev.chainId) {\r\n          if (typeof prev.blockNumber !== 'number') return { chainId, blockNumber }\r\n          return { chainId, blockNumber: Math.max(blockNumber, prev.blockNumber) }\r\n        }\r\n        return prev\r\n      })\r\n    },\r\n    [chainId, setState],\r\n  )\r\n\r\n  // attach/detach listeners\r\n  useEffect(() => {\r\n    if (!library || !chainId || !windowVisible) return undefined\r\n\r\n    setState({ chainId, blockNumber: null })\r\n\r\n    library\r\n      .getBlockNumber()\r\n      .then(blockNumberCallback)\r\n      .catch((error) => console.error(`Failed to get block number for chainId: ${chainId}`, error))\r\n\r\n    library.on('block', blockNumberCallback)\r\n    return () => {\r\n      library.removeListener('block', blockNumberCallback)\r\n    }\r\n  }, [dispatch, chainId, library, blockNumberCallback, windowVisible])\r\n\r\n  const debouncedState = useDebounce(state, 100)\r\n\r\n  useEffect(() => {\r\n    if (!debouncedState.chainId || !debouncedState.blockNumber || !windowVisible) return\r\n    dispatch(updateBlockNumber({ chainId: debouncedState.chainId, blockNumber: debouncedState.blockNumber }))\r\n  }, [windowVisible, dispatch, debouncedState.blockNumber, debouncedState.chainId])\r\n\r\n  return null\r\n}\r\n"],"mappings":";AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACxD,SAASC,WAAW,QAAQ,aAAa;AACzC,OAAOC,kBAAkB,MAAM,0BAA0B;AACzD,OAAOC,WAAW,MAAM,mBAAmB;AAC3C,OAAOC,kBAAkB,MAAM,0BAA0B;AACzD,SAASC,iBAAiB,QAAQ,WAAW;AAE7C,eAAe,SAASC,OAAOA,CAAA,EAAS;EAAAC,EAAA;EACtC,MAAM;IAAEC,OAAO;IAAEC;EAAQ,CAAC,GAAGP,kBAAkB,CAAC,CAAC;EACjD,MAAMQ,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9B,MAAMU,aAAa,GAAGP,kBAAkB,CAAC,CAAC;EAE1C,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAA8D;IAC9FS,OAAO;IACPK,WAAW,EAAE;EACf,CAAC,CAAC;EAEF,MAAMC,mBAAmB,GAAGjB,WAAW,CACpCgB,WAAmB,IAAK;IACvBD,QAAQ,CAAEG,IAAI,IAAK;MACjB,IAAIP,OAAO,KAAKO,IAAI,CAACP,OAAO,EAAE;QAC5B,IAAI,OAAOO,IAAI,CAACF,WAAW,KAAK,QAAQ,EAAE,OAAO;UAAEL,OAAO;UAAEK;QAAY,CAAC;QACzE,OAAO;UAAEL,OAAO;UAAEK,WAAW,EAAEG,IAAI,CAACC,GAAG,CAACJ,WAAW,EAAEE,IAAI,CAACF,WAAW;QAAE,CAAC;MAC1E;MACA,OAAOE,IAAI;IACb,CAAC,CAAC;EACJ,CAAC,EACD,CAACP,OAAO,EAAEI,QAAQ,CACpB,CAAC;;EAED;EACAd,SAAS,CAAC,MAAM;IACd,IAAI,CAACS,OAAO,IAAI,CAACC,OAAO,IAAI,CAACE,aAAa,EAAE,OAAOQ,SAAS;IAE5DN,QAAQ,CAAC;MAAEJ,OAAO;MAAEK,WAAW,EAAE;IAAK,CAAC,CAAC;IAExCN,OAAO,CACJY,cAAc,CAAC,CAAC,CAChBC,IAAI,CAACN,mBAAmB,CAAC,CACzBO,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,2CAA2Cd,OAAO,EAAE,EAAEc,KAAK,CAAC,CAAC;IAE/Ff,OAAO,CAACiB,EAAE,CAAC,OAAO,EAAEV,mBAAmB,CAAC;IACxC,OAAO,MAAM;MACXP,OAAO,CAACkB,cAAc,CAAC,OAAO,EAAEX,mBAAmB,CAAC;IACtD,CAAC;EACH,CAAC,EAAE,CAACL,QAAQ,EAAED,OAAO,EAAED,OAAO,EAAEO,mBAAmB,EAAEJ,aAAa,CAAC,CAAC;EAEpE,MAAMgB,cAAc,GAAGxB,WAAW,CAACS,KAAK,EAAE,GAAG,CAAC;EAE9Cb,SAAS,CAAC,MAAM;IACd,IAAI,CAAC4B,cAAc,CAAClB,OAAO,IAAI,CAACkB,cAAc,CAACb,WAAW,IAAI,CAACH,aAAa,EAAE;IAC9ED,QAAQ,CAACL,iBAAiB,CAAC;MAAEI,OAAO,EAAEkB,cAAc,CAAClB,OAAO;MAAEK,WAAW,EAAEa,cAAc,CAACb;IAAY,CAAC,CAAC,CAAC;EAC3G,CAAC,EAAE,CAACH,aAAa,EAAED,QAAQ,EAAEiB,cAAc,CAACb,WAAW,EAAEa,cAAc,CAAClB,OAAO,CAAC,CAAC;EAEjF,OAAO,IAAI;AACb;AAACF,EAAA,CAjDuBD,OAAO;EAAA,QACAJ,kBAAkB,EAC9BD,WAAW,EAENG,kBAAkB,EAqCjBD,WAAW;AAAA;AAAAyB,EAAA,GAzCZtB,OAAO;AAAA,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}