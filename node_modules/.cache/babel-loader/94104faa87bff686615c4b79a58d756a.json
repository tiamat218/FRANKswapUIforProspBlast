{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateJsonRpcError = exports.getErrorByCode = exports.getError = exports.isValidErrorCode = exports.isReservedErrorCode = exports.isServerErrorCode = void 0;\nconst constants_1 = require(\"./constants\");\nfunction isServerErrorCode(code) {\n  return code <= constants_1.SERVER_ERROR_CODE_RANGE[0] && code >= constants_1.SERVER_ERROR_CODE_RANGE[1];\n}\nexports.isServerErrorCode = isServerErrorCode;\nfunction isReservedErrorCode(code) {\n  return constants_1.RESERVED_ERROR_CODES.includes(code);\n}\nexports.isReservedErrorCode = isReservedErrorCode;\nfunction isValidErrorCode(code) {\n  return isServerErrorCode(code) || isReservedErrorCode(code);\n}\nexports.isValidErrorCode = isValidErrorCode;\nfunction getError(type) {\n  if (!Object.keys(constants_1.STANDARD_ERROR_MAP).includes(type)) {\n    return constants_1.STANDARD_ERROR_MAP[constants_1.INTERNAL_ERROR];\n  }\n  return constants_1.STANDARD_ERROR_MAP[type];\n}\nexports.getError = getError;\nfunction getErrorByCode(code) {\n  const match = Object.values(constants_1.STANDARD_ERROR_MAP).find(e => e.code === code);\n  if (!match) {\n    return constants_1.STANDARD_ERROR_MAP[constants_1.INTERNAL_ERROR];\n  }\n  return match;\n}\nexports.getErrorByCode = getErrorByCode;\nfunction validateJsonRpcError(response) {\n  if (typeof response.error.code === \"undefined\") {\n    return {\n      valid: false,\n      error: \"Missing code for JSON-RPC error\"\n    };\n  }\n  if (typeof response.error.message === \"undefined\") {\n    return {\n      valid: false,\n      error: \"Missing message for JSON-RPC error\"\n    };\n  }\n  if (!isValidErrorCode(response.error.code)) {\n    return {\n      valid: false,\n      error: \"Invalid error code for JSON-RPC error code: \".concat(response.error.code)\n    };\n  }\n  if (isReservedErrorCode(response.error.code)) {\n    const error = getErrorByCode(response.error.code);\n    if (error.message !== constants_1.STANDARD_ERROR_MAP[constants_1.INTERNAL_ERROR].message && response.error.message === error.message) {\n      return {\n        valid: false,\n        error: \"Invalid error message for JSON-RPC error code: \".concat(response.error.code)\n      };\n    }\n  }\n  return {\n    valid: true\n  };\n}\nexports.validateJsonRpcError = validateJsonRpcError;","map":{"version":3,"names":["constants_1","require","isServerErrorCode","code","SERVER_ERROR_CODE_RANGE","exports","isReservedErrorCode","RESERVED_ERROR_CODES","includes","isValidErrorCode","getError","type","Object","keys","STANDARD_ERROR_MAP","INTERNAL_ERROR","getErrorByCode","match","values","find","e","validateJsonRpcError","response","error","valid","message","concat"],"sources":["../../src/error.ts"],"sourcesContent":[null],"mappings":";;;;;;AACA,MAAAA,WAAA,GAAAC,OAAA;AAQA,SAAgBC,iBAAiBA,CAACC,IAAY;EAC5C,OAAOA,IAAI,IAAIH,WAAA,CAAAI,uBAAuB,CAAC,CAAC,CAAC,IAAID,IAAI,IAAIH,WAAA,CAAAI,uBAAuB,CAAC,CAAC,CAAC;AACjF;AAFAC,OAAA,CAAAH,iBAAA,GAAAA,iBAAA;AAIA,SAAgBI,mBAAmBA,CAACH,IAAY;EAC9C,OAAOH,WAAA,CAAAO,oBAAoB,CAACC,QAAQ,CAACL,IAAI,CAAC;AAC5C;AAFAE,OAAA,CAAAC,mBAAA,GAAAA,mBAAA;AAIA,SAAgBG,gBAAgBA,CAACN,IAAY;EAC3C,OAAOD,iBAAiB,CAACC,IAAI,CAAC,IAAIG,mBAAmB,CAACH,IAAI,CAAC;AAC7D;AAFAE,OAAA,CAAAI,gBAAA,GAAAA,gBAAA;AAIA,SAAgBC,QAAQA,CAACC,IAAY;EACnC,IAAI,CAACC,MAAM,CAACC,IAAI,CAACb,WAAA,CAAAc,kBAAkB,CAAC,CAACN,QAAQ,CAACG,IAAI,CAAC,EAAE;IACnD,OAAOX,WAAA,CAAAc,kBAAkB,CAACd,WAAA,CAAAe,cAAc,CAAC;;EAE3C,OAAOf,WAAA,CAAAc,kBAAkB,CAACH,IAAI,CAAC;AACjC;AALAN,OAAA,CAAAK,QAAA,GAAAA,QAAA;AAOA,SAAgBM,cAAcA,CAACb,IAAY;EACzC,MAAMc,KAAK,GAAGL,MAAM,CAACM,MAAM,CAAClB,WAAA,CAAAc,kBAAkB,CAAC,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjB,IAAI,KAAKA,IAAI,CAAC;EAC1E,IAAI,CAACc,KAAK,EAAE;IACV,OAAOjB,WAAA,CAAAc,kBAAkB,CAACd,WAAA,CAAAe,cAAc,CAAC;;EAE3C,OAAOE,KAAK;AACd;AANAZ,OAAA,CAAAW,cAAA,GAAAA,cAAA;AAQA,SAAgBK,oBAAoBA,CAACC,QAAsB;EACzD,IAAI,OAAOA,QAAQ,CAACC,KAAK,CAACpB,IAAI,KAAK,WAAW,EAAE;IAC9C,OAAO;MAAEqB,KAAK,EAAE,KAAK;MAAED,KAAK,EAAE;IAAiC,CAAE;;EAEnE,IAAI,OAAOD,QAAQ,CAACC,KAAK,CAACE,OAAO,KAAK,WAAW,EAAE;IACjD,OAAO;MAAED,KAAK,EAAE,KAAK;MAAED,KAAK,EAAE;IAAoC,CAAE;;EAEtE,IAAI,CAACd,gBAAgB,CAACa,QAAQ,CAACC,KAAK,CAACpB,IAAI,CAAC,EAAE;IAC1C,OAAO;MACLqB,KAAK,EAAE,KAAK;MACZD,KAAK,iDAAAG,MAAA,CAAiDJ,QAAQ,CAACC,KAAK,CAACpB,IAAI;KAC1E;;EAEH,IAAIG,mBAAmB,CAACgB,QAAQ,CAACC,KAAK,CAACpB,IAAI,CAAC,EAAE;IAC5C,MAAMoB,KAAK,GAAGP,cAAc,CAACM,QAAQ,CAACC,KAAK,CAACpB,IAAI,CAAC;IACjD,IACEoB,KAAK,CAACE,OAAO,KAAKzB,WAAA,CAAAc,kBAAkB,CAACd,WAAA,CAAAe,cAAc,CAAC,CAACU,OAAO,IAC5DH,QAAQ,CAACC,KAAK,CAACE,OAAO,KAAKF,KAAK,CAACE,OAAO,EACxC;MACA,OAAO;QACLD,KAAK,EAAE,KAAK;QACZD,KAAK,oDAAAG,MAAA,CAAoDJ,QAAQ,CAACC,KAAK,CAACpB,IAAI;OAC7E;;;EAGL,OAAO;IAAEqB,KAAK,EAAE;EAAI,CAAE;AACxB;AA1BAnB,OAAA,CAAAgB,oBAAA,GAAAA,oBAAA","ignoreList":[]},"metadata":{},"sourceType":"script"}