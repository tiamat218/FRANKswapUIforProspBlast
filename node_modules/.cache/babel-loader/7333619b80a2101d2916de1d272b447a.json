{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/frkul/Documents/swapUI_pancake-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useMemo}from'react';import styled from'styled-components';import{Text,Flex,CardBody,CardFooter,Button,AddIcon}from'@pancakeswap/uikit';import{Link}from'react-router-dom';import{useTranslation}from'contexts/Localization';import useActiveWeb3React from'hooks/useActiveWeb3React';import FullPositionCard from'../../components/PositionCard';import{useTokenBalancesWithLoadingIndicator}from'../../state/wallet/hooks';import{usePairs}from'../../hooks/usePairs';import{toV2LiquidityToken,useTrackedTokenPairs}from'../../state/user/hooks';import Dots from'../../components/Loader/Dots';import{AppHeader,AppBody}from'../../components/App';import Page from'../Page';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Body=styled(CardBody)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n\"])),_ref=>{let{theme}=_ref;return theme.colors.dropdownDeep;});export default function Pool(){const{account}=useActiveWeb3React();const{t}=useTranslation();// fetch the user's balances of all tracked V2 LP tokens\nconst trackedTokenPairs=useTrackedTokenPairs();const tokenPairsWithLiquidityTokens=useMemo(()=>trackedTokenPairs.map(tokens=>({liquidityToken:toV2LiquidityToken(tokens),tokens})),[trackedTokenPairs]);const liquidityTokens=useMemo(()=>tokenPairsWithLiquidityTokens.map(tpwlt=>tpwlt.liquidityToken),[tokenPairsWithLiquidityTokens]);const[v2PairsBalances,fetchingV2PairBalances]=useTokenBalancesWithLoadingIndicator(account!==null&&account!==void 0?account:undefined,liquidityTokens);// fetch the reserves for all V2 pools in which the user has a balance\nconst liquidityTokensWithBalances=useMemo(()=>tokenPairsWithLiquidityTokens.filter(_ref2=>{var _v2PairsBalances$liqu;let{liquidityToken}=_ref2;return(_v2PairsBalances$liqu=v2PairsBalances[liquidityToken.address])===null||_v2PairsBalances$liqu===void 0?void 0:_v2PairsBalances$liqu.greaterThan('0');}),[tokenPairsWithLiquidityTokens,v2PairsBalances]);const v2Pairs=usePairs(liquidityTokensWithBalances.map(_ref3=>{let{tokens}=_ref3;return tokens;}));const v2IsLoading=fetchingV2PairBalances||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.length)<liquidityTokensWithBalances.length||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.some(V2Pair=>!V2Pair));const allV2PairsWithLiquidity=v2Pairs.map(_ref4=>{let[,pair]=_ref4;return pair;}).filter(v2Pair=>Boolean(v2Pair));const renderBody=()=>{if(!account){return/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",textAlign:\"center\",children:t('Connect to a wallet to view your liquidity.')});}if(v2IsLoading){return/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",textAlign:\"center\",children:/*#__PURE__*/_jsx(Dots,{children:t('Loading')})});}if((allV2PairsWithLiquidity===null||allV2PairsWithLiquidity===void 0?void 0:allV2PairsWithLiquidity.length)>0){return allV2PairsWithLiquidity.map((v2Pair,index)=>/*#__PURE__*/_jsx(FullPositionCard,{pair:v2Pair,mb:index<allV2PairsWithLiquidity.length-1?'16px':0},v2Pair.liquidityToken.address));}return/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",textAlign:\"center\",children:t('No liquidity found.')});};return/*#__PURE__*/_jsx(Page,{children:/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(AppHeader,{title:t('Your Liquidity'),subtitle:t('Remove liquidity to receive tokens back')}),/*#__PURE__*/_jsxs(Body,{children:[renderBody(),account&&!v2IsLoading&&/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",alignItems:\"center\",mt:\"24px\",children:[/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",mb:\"8px\",children:t(\"Don't see a pool you joined?\")}),/*#__PURE__*/_jsx(Button,{id:\"import-pool-link\",variant:\"secondary\",scale:\"sm\",as:Link,to:\"/find\",children:t('Find other LP tokens')})]})]}),/*#__PURE__*/_jsx(CardFooter,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(Button,{id:\"join-pool-button\",as:Link,to:\"/add\",width:\"100%\",startIcon:/*#__PURE__*/_jsx(AddIcon,{color:\"white\"}),children:t('Add Liquidity')})})]})});}","map":{"version":3,"names":["React","useMemo","styled","Text","Flex","CardBody","CardFooter","Button","AddIcon","Link","useTranslation","useActiveWeb3React","FullPositionCard","useTokenBalancesWithLoadingIndicator","usePairs","toV2LiquidityToken","useTrackedTokenPairs","Dots","AppHeader","AppBody","Page","jsx","_jsx","jsxs","_jsxs","Body","_templateObject","_taggedTemplateLiteral","_ref","theme","colors","dropdownDeep","Pool","account","t","trackedTokenPairs","tokenPairsWithLiquidityTokens","map","tokens","liquidityToken","liquidityTokens","tpwlt","v2PairsBalances","fetchingV2PairBalances","undefined","liquidityTokensWithBalances","filter","_ref2","_v2PairsBalances$liqu","address","greaterThan","v2Pairs","_ref3","v2IsLoading","length","some","V2Pair","allV2PairsWithLiquidity","_ref4","pair","v2Pair","Boolean","renderBody","color","textAlign","children","index","mb","title","subtitle","flexDirection","alignItems","mt","id","variant","scale","as","to","style","width","startIcon"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Pool/index.tsx"],"sourcesContent":["import React, { useMemo } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Pair } from '@pancakeswap/sdk'\r\nimport { Text, Flex, CardBody, CardFooter, Button, AddIcon } from '@pancakeswap/uikit'\r\nimport { Link } from 'react-router-dom'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport FullPositionCard from '../../components/PositionCard'\r\nimport { useTokenBalancesWithLoadingIndicator } from '../../state/wallet/hooks'\r\nimport { usePairs } from '../../hooks/usePairs'\r\nimport { toV2LiquidityToken, useTrackedTokenPairs } from '../../state/user/hooks'\r\nimport Dots from '../../components/Loader/Dots'\r\nimport { AppHeader, AppBody } from '../../components/App'\r\nimport Page from '../Page'\r\n\r\nconst Body = styled(CardBody)`\r\n  background-color: ${({ theme }) => theme.colors.dropdownDeep};\r\n`\r\n\r\nexport default function Pool() {\r\n  const { account } = useActiveWeb3React()\r\n  const { t } = useTranslation()\r\n\r\n  // fetch the user's balances of all tracked V2 LP tokens\r\n  const trackedTokenPairs = useTrackedTokenPairs()\r\n  const tokenPairsWithLiquidityTokens = useMemo(\r\n    () => trackedTokenPairs.map((tokens) => ({ liquidityToken: toV2LiquidityToken(tokens), tokens })),\r\n    [trackedTokenPairs],\r\n  )\r\n  const liquidityTokens = useMemo(\r\n    () => tokenPairsWithLiquidityTokens.map((tpwlt) => tpwlt.liquidityToken),\r\n    [tokenPairsWithLiquidityTokens],\r\n  )\r\n  const [v2PairsBalances, fetchingV2PairBalances] = useTokenBalancesWithLoadingIndicator(\r\n    account ?? undefined,\r\n    liquidityTokens,\r\n  )\r\n\r\n  // fetch the reserves for all V2 pools in which the user has a balance\r\n  const liquidityTokensWithBalances = useMemo(\r\n    () =>\r\n      tokenPairsWithLiquidityTokens.filter(({ liquidityToken }) =>\r\n        v2PairsBalances[liquidityToken.address]?.greaterThan('0'),\r\n      ),\r\n    [tokenPairsWithLiquidityTokens, v2PairsBalances],\r\n  )\r\n\r\n  const v2Pairs = usePairs(liquidityTokensWithBalances.map(({ tokens }) => tokens))\r\n  const v2IsLoading =\r\n    fetchingV2PairBalances || v2Pairs?.length < liquidityTokensWithBalances.length || v2Pairs?.some((V2Pair) => !V2Pair)\r\n\r\n  const allV2PairsWithLiquidity = v2Pairs.map(([, pair]) => pair).filter((v2Pair): v2Pair is Pair => Boolean(v2Pair))\r\n\r\n  const renderBody = () => {\r\n    if (!account) {\r\n      return (\r\n        <Text color=\"textSubtle\" textAlign=\"center\">\r\n          {t('Connect to a wallet to view your liquidity.')}\r\n        </Text>\r\n      )\r\n    }\r\n    if (v2IsLoading) {\r\n      return (\r\n        <Text color=\"textSubtle\" textAlign=\"center\">\r\n          <Dots>{t('Loading')}</Dots>\r\n        </Text>\r\n      )\r\n    }\r\n    if (allV2PairsWithLiquidity?.length > 0) {\r\n      return allV2PairsWithLiquidity.map((v2Pair, index) => (\r\n        <FullPositionCard\r\n          key={v2Pair.liquidityToken.address}\r\n          pair={v2Pair}\r\n          mb={index < allV2PairsWithLiquidity.length - 1 ? '16px' : 0}\r\n        />\r\n      ))\r\n    }\r\n    return (\r\n      <Text color=\"textSubtle\" textAlign=\"center\">\r\n        {t('No liquidity found.')}\r\n      </Text>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Page>\r\n      <AppBody>\r\n        <AppHeader title={t('Your Liquidity')} subtitle={t('Remove liquidity to receive tokens back')} />\r\n        <Body>\r\n          {renderBody()}\r\n          {account && !v2IsLoading && (\r\n            <Flex flexDirection=\"column\" alignItems=\"center\" mt=\"24px\">\r\n              <Text color=\"textSubtle\" mb=\"8px\">\r\n                {t(\"Don't see a pool you joined?\")}\r\n              </Text>\r\n              <Button id=\"import-pool-link\" variant=\"secondary\" scale=\"sm\" as={Link} to=\"/find\">\r\n                {t('Find other LP tokens')}\r\n              </Button>\r\n            </Flex>\r\n          )}\r\n        </Body>\r\n        <CardFooter style={{ textAlign: 'center' }}>\r\n          <Button id=\"join-pool-button\" as={Link} to=\"/add\" width=\"100%\" startIcon={<AddIcon color=\"white\" />}>\r\n            {t('Add Liquidity')}\r\n          </Button>\r\n        </CardFooter>\r\n      </AppBody>\r\n    </Page>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}