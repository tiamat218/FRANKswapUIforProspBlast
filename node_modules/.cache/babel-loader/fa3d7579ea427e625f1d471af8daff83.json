{"ast":null,"code":"import{LotteryStatus}from'config/constants/types';import{useTranslation}from'contexts/Localization';import{useEffect,useState}from'react';const useGetNextLotteryEvent=(endTime,status)=>{const{t}=useTranslation();const vrfRequestTime=180;// 3 mins\nconst secondsBetweenRounds=300;// 5 mins\nconst transactionResolvingBuffer=30;// Delay countdown by 30s to ensure contract transactions have been calculated and broadcast\nconst[nextEvent,setNextEvent]=useState({nextEventTime:null,preCountdownText:null,postCountdownText:null});useEffect(()=>{// Current lottery is active\nif(status===LotteryStatus.OPEN){setNextEvent({nextEventTime:endTime+transactionResolvingBuffer,preCountdownText:null,postCountdownText:t('until the draw')});}// Current lottery has finished but not yet claimable\nif(status===LotteryStatus.CLOSE){setNextEvent({nextEventTime:endTime+transactionResolvingBuffer+vrfRequestTime,preCountdownText:t('Winners announced in'),postCountdownText:null});}// Current lottery claimable. Next lottery has not yet started\nif(status===LotteryStatus.CLAIMABLE){setNextEvent({nextEventTime:endTime+transactionResolvingBuffer+secondsBetweenRounds,preCountdownText:t('Tickets on sale in'),postCountdownText:null});}},[status,endTime,t]);return nextEvent;};export default useGetNextLotteryEvent;","map":{"version":3,"names":["LotteryStatus","useTranslation","useEffect","useState","useGetNextLotteryEvent","endTime","status","t","vrfRequestTime","secondsBetweenRounds","transactionResolvingBuffer","nextEvent","setNextEvent","nextEventTime","preCountdownText","postCountdownText","OPEN","CLOSE","CLAIMABLE"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Lottery/hooks/useGetNextLotteryEvent.ts"],"sourcesContent":["import { LotteryStatus } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useEffect, useState } from 'react'\r\n\r\ninterface LotteryEvent {\r\n  nextEventTime: number\r\n  postCountdownText?: string\r\n  preCountdownText?: string\r\n}\r\n\r\nconst useGetNextLotteryEvent = (endTime: number, status: LotteryStatus): LotteryEvent => {\r\n  const { t } = useTranslation()\r\n  const vrfRequestTime = 180 // 3 mins\r\n  const secondsBetweenRounds = 300 // 5 mins\r\n  const transactionResolvingBuffer = 30 // Delay countdown by 30s to ensure contract transactions have been calculated and broadcast\r\n  const [nextEvent, setNextEvent] = useState({ nextEventTime: null, preCountdownText: null, postCountdownText: null })\r\n\r\n  useEffect(() => {\r\n    // Current lottery is active\r\n    if (status === LotteryStatus.OPEN) {\r\n      setNextEvent({\r\n        nextEventTime: endTime + transactionResolvingBuffer,\r\n        preCountdownText: null,\r\n        postCountdownText: t('until the draw'),\r\n      })\r\n    }\r\n    // Current lottery has finished but not yet claimable\r\n    if (status === LotteryStatus.CLOSE) {\r\n      setNextEvent({\r\n        nextEventTime: endTime + transactionResolvingBuffer + vrfRequestTime,\r\n        preCountdownText: t('Winners announced in'),\r\n        postCountdownText: null,\r\n      })\r\n    }\r\n    // Current lottery claimable. Next lottery has not yet started\r\n    if (status === LotteryStatus.CLAIMABLE) {\r\n      setNextEvent({\r\n        nextEventTime: endTime + transactionResolvingBuffer + secondsBetweenRounds,\r\n        preCountdownText: t('Tickets on sale in'),\r\n        postCountdownText: null,\r\n      })\r\n    }\r\n  }, [status, endTime, t])\r\n\r\n  return nextEvent\r\n}\r\n\r\nexport default useGetNextLotteryEvent\r\n"],"mappings":"AAAA,OAASA,aAAa,KAAQ,wBAAwB,CACtD,OAASC,cAAc,KAAQ,uBAAuB,CACtD,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAQ3C,KAAM,CAAAC,sBAAsB,CAAGA,CAACC,OAAe,CAAEC,MAAqB,GAAmB,CACvF,KAAM,CAAEC,CAAE,CAAC,CAAGN,cAAc,CAAC,CAAC,CAC9B,KAAM,CAAAO,cAAc,CAAG,GAAG,CAAC;AAC3B,KAAM,CAAAC,oBAAoB,CAAG,GAAG,CAAC;AACjC,KAAM,CAAAC,0BAA0B,CAAG,EAAE,CAAC;AACtC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,CAAEU,aAAa,CAAE,IAAI,CAAEC,gBAAgB,CAAE,IAAI,CAAEC,iBAAiB,CAAE,IAAK,CAAC,CAAC,CAEpHb,SAAS,CAAC,IAAM,CACd;AACA,GAAII,MAAM,GAAKN,aAAa,CAACgB,IAAI,CAAE,CACjCJ,YAAY,CAAC,CACXC,aAAa,CAAER,OAAO,CAAGK,0BAA0B,CACnDI,gBAAgB,CAAE,IAAI,CACtBC,iBAAiB,CAAER,CAAC,CAAC,gBAAgB,CACvC,CAAC,CAAC,CACJ,CACA;AACA,GAAID,MAAM,GAAKN,aAAa,CAACiB,KAAK,CAAE,CAClCL,YAAY,CAAC,CACXC,aAAa,CAAER,OAAO,CAAGK,0BAA0B,CAAGF,cAAc,CACpEM,gBAAgB,CAAEP,CAAC,CAAC,sBAAsB,CAAC,CAC3CQ,iBAAiB,CAAE,IACrB,CAAC,CAAC,CACJ,CACA;AACA,GAAIT,MAAM,GAAKN,aAAa,CAACkB,SAAS,CAAE,CACtCN,YAAY,CAAC,CACXC,aAAa,CAAER,OAAO,CAAGK,0BAA0B,CAAGD,oBAAoB,CAC1EK,gBAAgB,CAAEP,CAAC,CAAC,oBAAoB,CAAC,CACzCQ,iBAAiB,CAAE,IACrB,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACT,MAAM,CAAED,OAAO,CAAEE,CAAC,CAAC,CAAC,CAExB,MAAO,CAAAI,SAAS,CAClB,CAAC,CAED,cAAe,CAAAP,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module"}