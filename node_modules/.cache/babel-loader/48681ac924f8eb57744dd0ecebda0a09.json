{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/frkul/Documents/swapUI_pancake-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useEffect,useState}from'react';import styled from'styled-components';import BigNumber from'bignumber.js';import{useWeb3React}from'@web3-react/core';import{Button,Flex,Text}from'@pancakeswap/uikit';import{getFullDisplayBalance}from'utils/formatBalance';import{getPancakeProfileAddress}from'utils/addressHelpers';import{useCake}from'hooks/useContract';import{useTranslation}from'contexts/Localization';import useGetProfileCosts from'views/Profile/hooks/useGetProfileCosts';import useHasCakeBalance from'hooks/useHasCakeBalance';import{useProfile}from'state/profile/hooks';import ProfileAvatar from'../ProfileAvatar';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const DangerOutline=styled(Button).attrs({variant:'secondary'})(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  border-color: \",\";\\n  color: \",\";\\n  margin-bottom: 24px;\\n\\n  &:hover:not(:disabled):not(.button--disabled):not(:active) {\\n    border-color: \",\";\\n    opacity: 0.8;\\n  }\\n\"])),_ref=>{let{theme}=_ref;return theme.colors.failure;},_ref2=>{let{theme}=_ref2;return theme.colors.failure;},_ref3=>{let{theme}=_ref3;return theme.colors.failure;});const AvatarWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  height: 64px;\\n  width: 64px;\\n\\n  \",\" {\\n    height: 128px;\\n    width: 128px;\\n  }\\n\"])),_ref4=>{let{theme}=_ref4;return theme.mediaQueries.sm;});const StartPage=_ref5=>{let{goToApprove,goToChange,goToRemove,onDismiss}=_ref5;const[needsApproval,setNeedsApproval]=useState(null);const{profile}=useProfile();const{numberCakeToUpdate,numberCakeToReactivate}=useGetProfileCosts();const minimumCakeRequired=profile.isActive?numberCakeToUpdate:numberCakeToReactivate;const hasMinimumCakeRequired=useHasCakeBalance(minimumCakeRequired);const{t}=useTranslation();const{account}=useWeb3React();const cakeContract=useCake();const cost=profile.isActive?numberCakeToUpdate:numberCakeToReactivate;/**\r\n   * Check if the wallet has the required CAKE allowance to change their profile pic or reactivate\r\n   * If they don't, we send them to the approval screen first\r\n   */useEffect(()=>{const checkApprovalStatus=async()=>{const response=await cakeContract.allowance(account,getPancakeProfileAddress());const currentAllowance=new BigNumber(response.toString());setNeedsApproval(currentAllowance.lt(cost));};if(account){checkApprovalStatus();}},[account,cost,setNeedsApproval,cakeContract]);if(!profile){return null;}return/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"center\",flexDirection:\"column\",children:[/*#__PURE__*/_jsx(AvatarWrapper,{children:/*#__PURE__*/_jsx(ProfileAvatar,{profile:profile})}),/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",style:{height:'48px'},justifyContent:\"center\",children:/*#__PURE__*/_jsx(Text,{as:\"p\",color:\"failure\",children:!hasMinimumCakeRequired&&t('%minimum% CAKE required to change profile pic',{minimum:getFullDisplayBalance(minimumCakeRequired)})})}),profile.isActive?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{width:\"100%\",mb:\"8px\",onClick:needsApproval===true?goToApprove:goToChange,disabled:!hasMinimumCakeRequired||needsApproval===null,children:t('Change Profile Pic')}),/*#__PURE__*/_jsx(DangerOutline,{width:\"100%\",onClick:goToRemove,children:t('Remove Profile Pic')})]}):/*#__PURE__*/_jsx(Button,{width:\"100%\",mb:\"8px\",onClick:needsApproval===true?goToApprove:goToChange,disabled:!hasMinimumCakeRequired||needsApproval===null,children:t('Reactivate Profile')}),/*#__PURE__*/_jsx(Button,{variant:\"text\",width:\"100%\",onClick:onDismiss,children:t('Close Window')})]});};export default StartPage;","map":{"version":3,"names":["React","useEffect","useState","styled","BigNumber","useWeb3React","Button","Flex","Text","getFullDisplayBalance","getPancakeProfileAddress","useCake","useTranslation","useGetProfileCosts","useHasCakeBalance","useProfile","ProfileAvatar","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DangerOutline","attrs","variant","_templateObject","_taggedTemplateLiteral","_ref","theme","colors","failure","_ref2","_ref3","AvatarWrapper","div","_templateObject2","_ref4","mediaQueries","sm","StartPage","_ref5","goToApprove","goToChange","goToRemove","onDismiss","needsApproval","setNeedsApproval","profile","numberCakeToUpdate","numberCakeToReactivate","minimumCakeRequired","isActive","hasMinimumCakeRequired","t","account","cakeContract","cost","checkApprovalStatus","response","allowance","currentAllowance","toString","lt","alignItems","justifyContent","flexDirection","children","style","height","as","color","minimum","width","mb","onClick","disabled"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Profile/components/EditProfileModal/StartView.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Button, Flex, Text, InjectedModalProps } from '@pancakeswap/uikit'\r\nimport { getFullDisplayBalance } from 'utils/formatBalance'\r\nimport { getPancakeProfileAddress } from 'utils/addressHelpers'\r\nimport { useCake } from 'hooks/useContract'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useGetProfileCosts from 'views/Profile/hooks/useGetProfileCosts'\r\nimport useHasCakeBalance from 'hooks/useHasCakeBalance'\r\nimport { useProfile } from 'state/profile/hooks'\r\nimport { UseEditProfileResponse } from './reducer'\r\nimport ProfileAvatar from '../ProfileAvatar'\r\n\r\ninterface StartPageProps extends InjectedModalProps {\r\n  goToChange: UseEditProfileResponse['goToChange']\r\n  goToRemove: UseEditProfileResponse['goToRemove']\r\n  goToApprove: UseEditProfileResponse['goToApprove']\r\n}\r\n\r\nconst DangerOutline = styled(Button).attrs({ variant: 'secondary' })`\r\n  border-color: ${({ theme }) => theme.colors.failure};\r\n  color: ${({ theme }) => theme.colors.failure};\r\n  margin-bottom: 24px;\r\n\r\n  &:hover:not(:disabled):not(.button--disabled):not(:active) {\r\n    border-color: ${({ theme }) => theme.colors.failure};\r\n    opacity: 0.8;\r\n  }\r\n`\r\n\r\nconst AvatarWrapper = styled.div`\r\n  height: 64px;\r\n  width: 64px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    height: 128px;\r\n    width: 128px;\r\n  }\r\n`\r\n\r\nconst StartPage: React.FC<StartPageProps> = ({ goToApprove, goToChange, goToRemove, onDismiss }) => {\r\n  const [needsApproval, setNeedsApproval] = useState(null)\r\n  const { profile } = useProfile()\r\n  const { numberCakeToUpdate, numberCakeToReactivate } = useGetProfileCosts()\r\n  const minimumCakeRequired = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\r\n  const hasMinimumCakeRequired = useHasCakeBalance(minimumCakeRequired)\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const cakeContract = useCake()\r\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\r\n\r\n  /**\r\n   * Check if the wallet has the required CAKE allowance to change their profile pic or reactivate\r\n   * If they don't, we send them to the approval screen first\r\n   */\r\n  useEffect(() => {\r\n    const checkApprovalStatus = async () => {\r\n      const response = await cakeContract.allowance(account, getPancakeProfileAddress())\r\n      const currentAllowance = new BigNumber(response.toString())\r\n      setNeedsApproval(currentAllowance.lt(cost))\r\n    }\r\n\r\n    if (account) {\r\n      checkApprovalStatus()\r\n    }\r\n  }, [account, cost, setNeedsApproval, cakeContract])\r\n\r\n  if (!profile) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\r\n      <AvatarWrapper>\r\n        <ProfileAvatar profile={profile} />\r\n      </AvatarWrapper>\r\n      <Flex alignItems=\"center\" style={{ height: '48px' }} justifyContent=\"center\">\r\n        <Text as=\"p\" color=\"failure\">\r\n          {!hasMinimumCakeRequired &&\r\n            t('%minimum% CAKE required to change profile pic', { minimum: getFullDisplayBalance(minimumCakeRequired) })}\r\n        </Text>\r\n      </Flex>\r\n      {profile.isActive ? (\r\n        <>\r\n          <Button\r\n            width=\"100%\"\r\n            mb=\"8px\"\r\n            onClick={needsApproval === true ? goToApprove : goToChange}\r\n            disabled={!hasMinimumCakeRequired || needsApproval === null}\r\n          >\r\n            {t('Change Profile Pic')}\r\n          </Button>\r\n          <DangerOutline width=\"100%\" onClick={goToRemove}>\r\n            {t('Remove Profile Pic')}\r\n          </DangerOutline>\r\n        </>\r\n      ) : (\r\n        <Button\r\n          width=\"100%\"\r\n          mb=\"8px\"\r\n          onClick={needsApproval === true ? goToApprove : goToChange}\r\n          disabled={!hasMinimumCakeRequired || needsApproval === null}\r\n        >\r\n          {t('Reactivate Profile')}\r\n        </Button>\r\n      )}\r\n      <Button variant=\"text\" width=\"100%\" onClick={onDismiss}>\r\n        {t('Close Window')}\r\n      </Button>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default StartPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}