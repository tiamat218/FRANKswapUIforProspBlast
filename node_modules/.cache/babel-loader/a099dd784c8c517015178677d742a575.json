{"ast":null,"code":"/* eslint-disable */function wait(ms){return new Promise(resolve=>setTimeout(resolve,ms));}function waitRandom(min,max){return wait(min+Math.round(Math.random()*Math.max(0,max-min)));}/**\r\n * This error is thrown if the function is cancelled before completing\r\n */export class CancelledError extends Error{constructor(){super('Cancelled');}}/**\r\n * Throw this error if the function should retry\r\n */export class RetryableError extends Error{}/**\r\n * Retries the function that returns the promise until the promise successfully resolves up to n retries\r\n * @param fn function to retry\r\n * @param n how many times to retry\r\n * @param minWait min wait between retries in ms\r\n * @param maxWait max wait between retries in ms\r\n */export function retry(fn,_ref){let{n,minWait,maxWait}=_ref;let completed=false;let rejectCancelled;const promise=new Promise(async(resolve,reject)=>{rejectCancelled=reject;while(true){let result;try{result=await fn();if(!completed){resolve(result);completed=true;}break;}catch(error){if(completed){break;}if(n<=0||!(error instanceof RetryableError)){reject(error);completed=true;break;}n--;}await waitRandom(minWait,maxWait);}});return{promise,cancel:()=>{if(completed)return;completed=true;rejectCancelled(new CancelledError());}};}/* eslint-enable */","map":{"version":3,"names":["wait","ms","Promise","resolve","setTimeout","waitRandom","min","max","Math","round","random","CancelledError","Error","constructor","RetryableError","retry","fn","_ref","n","minWait","maxWait","completed","rejectCancelled","promise","reject","result","error","cancel"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/state/multicall/retry.ts"],"sourcesContent":["/* eslint-disable */\r\n\r\nfunction wait(ms: number): Promise<void> {\r\n  return new Promise((resolve) => setTimeout(resolve, ms))\r\n}\r\n\r\nfunction waitRandom(min: number, max: number): Promise<void> {\r\n  return wait(min + Math.round(Math.random() * Math.max(0, max - min)))\r\n}\r\n\r\n/**\r\n * This error is thrown if the function is cancelled before completing\r\n */\r\nexport class CancelledError extends Error {\r\n  constructor() {\r\n    super('Cancelled')\r\n  }\r\n}\r\n\r\n/**\r\n * Throw this error if the function should retry\r\n */\r\nexport class RetryableError extends Error {}\r\n\r\n/**\r\n * Retries the function that returns the promise until the promise successfully resolves up to n retries\r\n * @param fn function to retry\r\n * @param n how many times to retry\r\n * @param minWait min wait between retries in ms\r\n * @param maxWait max wait between retries in ms\r\n */\r\nexport function retry<T>(\r\n  fn: () => Promise<T>,\r\n  { n, minWait, maxWait }: { n: number; minWait: number; maxWait: number },\r\n): { promise: Promise<T>; cancel: () => void } {\r\n  let completed = false\r\n  let rejectCancelled: (error: Error) => void\r\n  const promise = new Promise<T>(async (resolve, reject) => {\r\n    rejectCancelled = reject\r\n    while (true) {\r\n      let result: T\r\n      try {\r\n        result = await fn()\r\n        if (!completed) {\r\n          resolve(result)\r\n          completed = true\r\n        }\r\n        break\r\n      } catch (error) {\r\n        if (completed) {\r\n          break\r\n        }\r\n        if (n <= 0 || !(error instanceof RetryableError)) {\r\n          reject(error)\r\n          completed = true\r\n          break\r\n        }\r\n        n--\r\n      }\r\n      await waitRandom(minWait, maxWait)\r\n    }\r\n  })\r\n  return {\r\n    promise,\r\n    cancel: () => {\r\n      if (completed) return\r\n      completed = true\r\n      rejectCancelled(new CancelledError())\r\n    },\r\n  }\r\n}\r\n\r\n/* eslint-enable */\r\n"],"mappings":"AAAA,oBAEA,QAAS,CAAAA,IAAIA,CAACC,EAAU,CAAiB,CACvC,MAAO,IAAI,CAAAC,OAAO,CAAEC,OAAO,EAAKC,UAAU,CAACD,OAAO,CAAEF,EAAE,CAAC,CAAC,CAC1D,CAEA,QAAS,CAAAI,UAAUA,CAACC,GAAW,CAAEC,GAAW,CAAiB,CAC3D,MAAO,CAAAP,IAAI,CAACM,GAAG,CAAGE,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAGF,IAAI,CAACD,GAAG,CAAC,CAAC,CAAEA,GAAG,CAAGD,GAAG,CAAC,CAAC,CAAC,CACvE,CAEA;AACA;AACA,GACA,MAAO,MAAM,CAAAK,cAAc,QAAS,CAAAC,KAAM,CACxCC,WAAWA,CAAA,CAAG,CACZ,KAAK,CAAC,WAAW,CAAC,CACpB,CACF,CAEA;AACA;AACA,GACA,MAAO,MAAM,CAAAC,cAAc,QAAS,CAAAF,KAAM,EAE1C;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAG,KAAKA,CACnBC,EAAoB,CAAAC,IAAA,CAEyB,IAD7C,CAAEC,CAAC,CAAEC,OAAO,CAAEC,OAAyD,CAAC,CAAAH,IAAA,CAExE,GAAI,CAAAI,SAAS,CAAG,KAAK,CACrB,GAAI,CAAAC,eAAuC,CAC3C,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAArB,OAAO,CAAI,MAAOC,OAAO,CAAEqB,MAAM,GAAK,CACxDF,eAAe,CAAGE,MAAM,CACxB,MAAO,IAAI,CAAE,CACX,GAAI,CAAAC,MAAS,CACb,GAAI,CACFA,MAAM,CAAG,KAAM,CAAAT,EAAE,CAAC,CAAC,CACnB,GAAI,CAACK,SAAS,CAAE,CACdlB,OAAO,CAACsB,MAAM,CAAC,CACfJ,SAAS,CAAG,IAAI,CAClB,CACA,MACF,CAAE,MAAOK,KAAK,CAAE,CACd,GAAIL,SAAS,CAAE,CACb,MACF,CACA,GAAIH,CAAC,EAAI,CAAC,EAAI,EAAEQ,KAAK,WAAY,CAAAZ,cAAc,CAAC,CAAE,CAChDU,MAAM,CAACE,KAAK,CAAC,CACbL,SAAS,CAAG,IAAI,CAChB,MACF,CACAH,CAAC,EAAE,CACL,CACA,KAAM,CAAAb,UAAU,CAACc,OAAO,CAAEC,OAAO,CAAC,CACpC,CACF,CAAC,CAAC,CACF,MAAO,CACLG,OAAO,CACPI,MAAM,CAAEA,CAAA,GAAM,CACZ,GAAIN,SAAS,CAAE,OACfA,SAAS,CAAG,IAAI,CAChBC,eAAe,CAAC,GAAI,CAAAX,cAAc,CAAC,CAAC,CAAC,CACvC,CACF,CAAC,CACH,CAEA","ignoreList":[]},"metadata":{},"sourceType":"module"}