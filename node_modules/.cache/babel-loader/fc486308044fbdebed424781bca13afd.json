{"ast":null,"code":"import { request, gql } from 'graphql-request';\nimport { campaignMap } from 'config/constants/campaigns';\nimport { GRAPH_API_PROFILE } from 'config/constants/endpoints';\nimport { getAchievementTitle, getAchievementDescription } from 'utils/achievements';\n/**\r\n * Gets all user point increase events on the profile filtered by wallet address\r\n */\nexport const getUserPointIncreaseEvents = async account => {\n  try {\n    const {\n      user\n    } = await request(GRAPH_API_PROFILE, gql`\n        query getUserPointIncreaseEvents($account: ID!) {\n          user(id: $account) {\n            points {\n              id\n              campaignId\n              points\n            }\n          }\n        }\n      `, {\n      account: account.toLowerCase()\n    });\n    return user.points;\n  } catch (error) {\n    return null;\n  }\n};\n\n/**\r\n * Gets all user point increase events and adds achievement meta\r\n */\nexport const getAchievements = async account => {\n  const pointIncreaseEvents = await getUserPointIncreaseEvents(account);\n  if (!pointIncreaseEvents) {\n    return [];\n  }\n  return pointIncreaseEvents.reduce((accum, userPoint) => {\n    if (!campaignMap.has(userPoint.campaignId)) {\n      return accum;\n    }\n    const campaignMeta = campaignMap.get(userPoint.campaignId);\n    return [...accum, {\n      id: userPoint.campaignId,\n      type: campaignMeta.type,\n      address: userPoint.id,\n      title: getAchievementTitle(campaignMeta),\n      description: getAchievementDescription(campaignMeta),\n      badge: campaignMeta.badge,\n      points: Number(userPoint.points)\n    }];\n  }, []);\n};","map":{"version":3,"names":["request","gql","campaignMap","GRAPH_API_PROFILE","getAchievementTitle","getAchievementDescription","getUserPointIncreaseEvents","account","user","toLowerCase","points","error","getAchievements","pointIncreaseEvents","reduce","accum","userPoint","has","campaignId","campaignMeta","get","id","type","address","title","description","badge","Number"],"sources":["C:/Users/Devrim/Documents/FRANKswapUIforProspBlast/src/state/achievements/helpers.ts"],"sourcesContent":["import { request, gql } from 'graphql-request'\r\nimport { campaignMap } from 'config/constants/campaigns'\r\nimport { GRAPH_API_PROFILE } from 'config/constants/endpoints'\r\nimport { Achievement } from 'state/types'\r\nimport { getAchievementTitle, getAchievementDescription } from 'utils/achievements'\r\n\r\ninterface UserPointIncreaseEvent {\r\n  campaignId: string\r\n  id: string // wallet address\r\n  points: string\r\n}\r\n\r\n/**\r\n * Gets all user point increase events on the profile filtered by wallet address\r\n */\r\nexport const getUserPointIncreaseEvents = async (account: string): Promise<UserPointIncreaseEvent[]> => {\r\n  try {\r\n    const { user } = await request(\r\n      GRAPH_API_PROFILE,\r\n      gql`\r\n        query getUserPointIncreaseEvents($account: ID!) {\r\n          user(id: $account) {\r\n            points {\r\n              id\r\n              campaignId\r\n              points\r\n            }\r\n          }\r\n        }\r\n      `,\r\n      {\r\n        account: account.toLowerCase(),\r\n      },\r\n    )\r\n\r\n    return user.points\r\n  } catch (error) {\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * Gets all user point increase events and adds achievement meta\r\n */\r\nexport const getAchievements = async (account: string): Promise<Achievement[]> => {\r\n  const pointIncreaseEvents = await getUserPointIncreaseEvents(account)\r\n\r\n  if (!pointIncreaseEvents) {\r\n    return []\r\n  }\r\n\r\n  return pointIncreaseEvents.reduce((accum, userPoint) => {\r\n    if (!campaignMap.has(userPoint.campaignId)) {\r\n      return accum\r\n    }\r\n\r\n    const campaignMeta = campaignMap.get(userPoint.campaignId)\r\n\r\n    return [\r\n      ...accum,\r\n      {\r\n        id: userPoint.campaignId,\r\n        type: campaignMeta.type,\r\n        address: userPoint.id,\r\n        title: getAchievementTitle(campaignMeta),\r\n        description: getAchievementDescription(campaignMeta),\r\n        badge: campaignMeta.badge,\r\n        points: Number(userPoint.points),\r\n      },\r\n    ]\r\n  }, [])\r\n}\r\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,GAAG,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,iBAAiB,QAAQ,4BAA4B;AAE9D,SAASC,mBAAmB,EAAEC,yBAAyB,QAAQ,oBAAoB;AAQnF;AACA;AACA;AACA,OAAO,MAAMC,0BAA0B,GAAG,MAAOC,OAAe,IAAwC;EACtG,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMR,OAAO,CAC5BG,iBAAiB,EACjBF,GAAG;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,EACD;MACEM,OAAO,EAAEA,OAAO,CAACE,WAAW,CAAC;IAC/B,CACF,CAAC;IAED,OAAOD,IAAI,CAACE,MAAM;EACpB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,OAAO,IAAI;EACb;AACF,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,eAAe,GAAG,MAAOL,OAAe,IAA6B;EAChF,MAAMM,mBAAmB,GAAG,MAAMP,0BAA0B,CAACC,OAAO,CAAC;EAErE,IAAI,CAACM,mBAAmB,EAAE;IACxB,OAAO,EAAE;EACX;EAEA,OAAOA,mBAAmB,CAACC,MAAM,CAAC,CAACC,KAAK,EAAEC,SAAS,KAAK;IACtD,IAAI,CAACd,WAAW,CAACe,GAAG,CAACD,SAAS,CAACE,UAAU,CAAC,EAAE;MAC1C,OAAOH,KAAK;IACd;IAEA,MAAMI,YAAY,GAAGjB,WAAW,CAACkB,GAAG,CAACJ,SAAS,CAACE,UAAU,CAAC;IAE1D,OAAO,CACL,GAAGH,KAAK,EACR;MACEM,EAAE,EAAEL,SAAS,CAACE,UAAU;MACxBI,IAAI,EAAEH,YAAY,CAACG,IAAI;MACvBC,OAAO,EAAEP,SAAS,CAACK,EAAE;MACrBG,KAAK,EAAEpB,mBAAmB,CAACe,YAAY,CAAC;MACxCM,WAAW,EAAEpB,yBAAyB,CAACc,YAAY,CAAC;MACpDO,KAAK,EAAEP,YAAY,CAACO,KAAK;MACzBhB,MAAM,EAAEiB,MAAM,CAACX,SAAS,CAACN,MAAM;IACjC,CAAC,CACF;EACH,CAAC,EAAE,EAAE,CAAC;AACR,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}