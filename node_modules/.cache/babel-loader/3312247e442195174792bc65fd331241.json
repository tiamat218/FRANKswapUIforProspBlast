{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Box,Breadcrumbs,Card,Flex,Heading,Text}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import Container from'components/Layout/Container';import{useAppDispatch}from'state';import{fetchProposals}from'state/voting';import{useGetProposalLoadingStatus,useGetProposals}from'state/voting/hooks';import{ProposalState,ProposalType,VotingStateLoadingStatus}from'state/types';import{filterProposalsByState,filterProposalsByType}from'../../helpers';import BreadcrumbLink from'../BreadcrumbLink';import ProposalsLoading from'./ProposalsLoading';import TabMenu from'./TabMenu';import ProposalRow from'./ProposalRow';import Filters from'./Filters';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Proposals=()=>{const{t}=useTranslation();const[state,setState]=useState({proposalType:ProposalType.CORE,filterState:ProposalState.ACTIVE});const proposalStatus=useGetProposalLoadingStatus();const proposals=useGetProposals();const dispatch=useAppDispatch();const{proposalType,filterState}=state;const isLoading=proposalStatus===VotingStateLoadingStatus.LOADING;const isIdle=proposalStatus===VotingStateLoadingStatus.IDLE;useEffect(()=>{dispatch(fetchProposals({first:1000,state:filterState}));},[filterState,dispatch]);const handleProposalTypeChange=newProposalType=>{setState(prevState=>({...prevState,proposalType:newProposalType}));};const handleFilterChange=newFilterState=>{setState(prevState=>({...prevState,filterState:newFilterState}));};const filteredProposals=filterProposalsByState(filterProposalsByType(proposals,proposalType),filterState);return/*#__PURE__*/_jsxs(Container,{py:\"40px\",children:[/*#__PURE__*/_jsx(Box,{mb:\"48px\",children:/*#__PURE__*/_jsxs(Breadcrumbs,{children:[/*#__PURE__*/_jsx(BreadcrumbLink,{to:\"/\",children:t('Home')}),/*#__PURE__*/_jsx(Text,{children:t('Voting')})]})}),/*#__PURE__*/_jsx(Heading,{as:\"h2\",scale:\"xl\",mb:\"32px\",children:t('Proposals')}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(TabMenu,{proposalType:proposalType,onTypeChange:handleProposalTypeChange}),/*#__PURE__*/_jsx(Filters,{filterState:filterState,onFilterChange:handleFilterChange,isLoading:isLoading}),isLoading&&/*#__PURE__*/_jsx(ProposalsLoading,{}),isIdle&&filteredProposals.length>0&&filteredProposals.map(proposal=>{return/*#__PURE__*/_jsx(ProposalRow,{proposal:proposal},proposal.id);}),isIdle&&filteredProposals.length===0&&/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",justifyContent:\"center\",p:\"32px\",children:/*#__PURE__*/_jsx(Heading,{as:\"h5\",children:t('No proposals found')})})]})]});};export default Proposals;","map":{"version":3,"names":["React","useEffect","useState","Box","Breadcrumbs","Card","Flex","Heading","Text","useTranslation","Container","useAppDispatch","fetchProposals","useGetProposalLoadingStatus","useGetProposals","ProposalState","ProposalType","VotingStateLoadingStatus","filterProposalsByState","filterProposalsByType","BreadcrumbLink","ProposalsLoading","TabMenu","ProposalRow","Filters","jsx","_jsx","jsxs","_jsxs","Proposals","t","state","setState","proposalType","CORE","filterState","ACTIVE","proposalStatus","proposals","dispatch","isLoading","LOADING","isIdle","IDLE","first","handleProposalTypeChange","newProposalType","prevState","handleFilterChange","newFilterState","filteredProposals","py","children","mb","to","as","scale","onTypeChange","onFilterChange","length","map","proposal","id","alignItems","justifyContent","p"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Voting/components/Proposals/Proposals.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Box, Breadcrumbs, Card, Flex, Heading, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Container from 'components/Layout/Container'\r\nimport { useAppDispatch } from 'state'\r\nimport { fetchProposals } from 'state/voting'\r\nimport { useGetProposalLoadingStatus, useGetProposals } from 'state/voting/hooks'\r\nimport { ProposalState, ProposalType, VotingStateLoadingStatus } from 'state/types'\r\nimport { filterProposalsByState, filterProposalsByType } from '../../helpers'\r\nimport BreadcrumbLink from '../BreadcrumbLink'\r\nimport ProposalsLoading from './ProposalsLoading'\r\nimport TabMenu from './TabMenu'\r\nimport ProposalRow from './ProposalRow'\r\nimport Filters from './Filters'\r\n\r\ninterface State {\r\n  proposalType: ProposalType\r\n  filterState: ProposalState\r\n}\r\n\r\nconst Proposals = () => {\r\n  const { t } = useTranslation()\r\n  const [state, setState] = useState<State>({\r\n    proposalType: ProposalType.CORE,\r\n    filterState: ProposalState.ACTIVE,\r\n  })\r\n  const proposalStatus = useGetProposalLoadingStatus()\r\n  const proposals = useGetProposals()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const { proposalType, filterState } = state\r\n  const isLoading = proposalStatus === VotingStateLoadingStatus.LOADING\r\n  const isIdle = proposalStatus === VotingStateLoadingStatus.IDLE\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchProposals({ first: 1000, state: filterState }))\r\n  }, [filterState, dispatch])\r\n\r\n  const handleProposalTypeChange = (newProposalType: ProposalType) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      proposalType: newProposalType,\r\n    }))\r\n  }\r\n\r\n  const handleFilterChange = (newFilterState: ProposalState) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      filterState: newFilterState,\r\n    }))\r\n  }\r\n\r\n  const filteredProposals = filterProposalsByState(filterProposalsByType(proposals, proposalType), filterState)\r\n\r\n  return (\r\n    <Container py=\"40px\">\r\n      <Box mb=\"48px\">\r\n        <Breadcrumbs>\r\n          <BreadcrumbLink to=\"/\">{t('Home')}</BreadcrumbLink>\r\n          <Text>{t('Voting')}</Text>\r\n        </Breadcrumbs>\r\n      </Box>\r\n      <Heading as=\"h2\" scale=\"xl\" mb=\"32px\">\r\n        {t('Proposals')}\r\n      </Heading>\r\n      <Card>\r\n        <TabMenu proposalType={proposalType} onTypeChange={handleProposalTypeChange} />\r\n        <Filters filterState={filterState} onFilterChange={handleFilterChange} isLoading={isLoading} />\r\n        {isLoading && <ProposalsLoading />}\r\n        {isIdle &&\r\n          filteredProposals.length > 0 &&\r\n          filteredProposals.map((proposal) => {\r\n            return <ProposalRow key={proposal.id} proposal={proposal} />\r\n          })}\r\n        {isIdle && filteredProposals.length === 0 && (\r\n          <Flex alignItems=\"center\" justifyContent=\"center\" p=\"32px\">\r\n            <Heading as=\"h5\">{t('No proposals found')}</Heading>\r\n          </Flex>\r\n        )}\r\n      </Card>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Proposals\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}