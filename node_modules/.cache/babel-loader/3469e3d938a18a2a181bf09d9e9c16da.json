{"ast":null,"code":"import React,{useState}from'react';import{AutoRenewIcon,Card,CardHeader,ChevronDownIcon,Flex,Heading,Button,ChevronUpIcon,Text}from'@pancakeswap/uikit';import{useWeb3React}from'@web3-react/core';import orderBy from'lodash/orderBy';import{useTranslation}from'contexts/Localization';import{VotingStateLoadingStatus}from'state/types';import{useGetVotingStateLoadingStatus}from'state/voting/hooks';import VotesLoading from'../components/Proposal/VotesLoading';import VoteRow from'../components/Proposal/VoteRow';import Row,{AddressColumn,ChoiceColumn,VotingPowerColumn}from'../components/Proposal/Row';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const VOTES_PER_VIEW=20;const parseVotePower=incomingVote=>{var _incomingVote$metadat;return parseFloat(incomingVote===null||incomingVote===void 0?void 0:(_incomingVote$metadat=incomingVote.metadata)===null||_incomingVote$metadat===void 0?void 0:_incomingVote$metadat.votingPower);};const Votes=_ref=>{let{votes}=_ref;const[showAll,setShowAll]=useState(false);const{t}=useTranslation();const{account}=useWeb3React();const orderedVotes=orderBy(votes,[parseVotePower,'created'],['desc','desc']);const displayVotes=showAll?orderedVotes:orderedVotes.slice(0,VOTES_PER_VIEW);const voteStatus=useGetVotingStateLoadingStatus();const isFinished=voteStatus===VotingStateLoadingStatus.IDLE;const handleClick=()=>{setShowAll(!showAll);};return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Heading,{as:\"h3\",scale:\"md\",children:t('Votes (%count%)',{count:votes.length.toLocaleString()})}),!isFinished&&/*#__PURE__*/_jsx(AutoRenewIcon,{spin:true,width:\"22px\"})]})}),!isFinished&&/*#__PURE__*/_jsx(VotesLoading,{}),isFinished&&displayVotes.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(AddressColumn,{children:/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"textSubtle\",textTransform:\"uppercase\",bold:true,children:t('Voter')})}),/*#__PURE__*/_jsx(ChoiceColumn,{children:/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"textSubtle\",textTransform:\"uppercase\",bold:true,children:t('Decision')})}),/*#__PURE__*/_jsx(VotingPowerColumn,{children:/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"textSubtle\",textTransform:\"uppercase\",bold:true,children:t('Vote Weight')})})]}),displayVotes.map(vote=>{const isVoter=account&&vote.voter.toLowerCase()===account.toLowerCase();return/*#__PURE__*/_jsx(VoteRow,{vote:vote,isVoter:isVoter},vote.id);}),/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",justifyContent:\"center\",py:\"8px\",px:\"24px\",children:/*#__PURE__*/_jsx(Button,{width:\"100%\",onClick:handleClick,variant:\"text\",endIcon:showAll?/*#__PURE__*/_jsx(ChevronUpIcon,{color:\"primary\",width:\"21px\"}):/*#__PURE__*/_jsx(ChevronDownIcon,{color:\"primary\",width:\"21px\"}),disabled:!isFinished,children:showAll?t('Hide'):t('See All')})})]}),isFinished&&displayVotes.length===0&&/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",justifyContent:\"center\",py:\"32px\",children:/*#__PURE__*/_jsx(Heading,{as:\"h5\",children:t('No votes found')})})]});};export default Votes;","map":{"version":3,"names":["React","useState","AutoRenewIcon","Card","CardHeader","ChevronDownIcon","Flex","Heading","Button","ChevronUpIcon","Text","useWeb3React","orderBy","useTranslation","VotingStateLoadingStatus","useGetVotingStateLoadingStatus","VotesLoading","VoteRow","Row","AddressColumn","ChoiceColumn","VotingPowerColumn","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VOTES_PER_VIEW","parseVotePower","incomingVote","_incomingVote$metadat","parseFloat","metadata","votingPower","Votes","_ref","votes","showAll","setShowAll","t","account","orderedVotes","displayVotes","slice","voteStatus","isFinished","IDLE","handleClick","children","alignItems","justifyContent","as","scale","count","length","toLocaleString","spin","width","fontSize","color","textTransform","bold","map","vote","isVoter","voter","toLowerCase","id","py","px","onClick","variant","endIcon","disabled"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Voting/Proposal/Votes.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport {\r\n  AutoRenewIcon,\r\n  Card,\r\n  CardHeader,\r\n  ChevronDownIcon,\r\n  Flex,\r\n  Heading,\r\n  Button,\r\n  ChevronUpIcon,\r\n  Text,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport orderBy from 'lodash/orderBy'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Vote, VotingStateLoadingStatus } from 'state/types'\r\nimport { useGetVotingStateLoadingStatus } from 'state/voting/hooks'\r\nimport VotesLoading from '../components/Proposal/VotesLoading'\r\nimport VoteRow from '../components/Proposal/VoteRow'\r\nimport Row, { AddressColumn, ChoiceColumn, VotingPowerColumn } from '../components/Proposal/Row'\r\n\r\nconst VOTES_PER_VIEW = 20\r\n\r\ninterface VotesProps {\r\n  votes: Vote[]\r\n}\r\n\r\nconst parseVotePower = (incomingVote: Vote) => {\r\n  return parseFloat(incomingVote?.metadata?.votingPower)\r\n}\r\n\r\nconst Votes: React.FC<VotesProps> = ({ votes }) => {\r\n  const [showAll, setShowAll] = useState(false)\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const orderedVotes = orderBy(votes, [parseVotePower, 'created'], ['desc', 'desc'])\r\n  const displayVotes = showAll ? orderedVotes : orderedVotes.slice(0, VOTES_PER_VIEW)\r\n  const voteStatus = useGetVotingStateLoadingStatus()\r\n  const isFinished = voteStatus === VotingStateLoadingStatus.IDLE\r\n\r\n  const handleClick = () => {\r\n    setShowAll(!showAll)\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n          <Heading as=\"h3\" scale=\"md\">\r\n            {t('Votes (%count%)', { count: votes.length.toLocaleString() })}\r\n          </Heading>\r\n          {!isFinished && <AutoRenewIcon spin width=\"22px\" />}\r\n        </Flex>\r\n      </CardHeader>\r\n      {!isFinished && <VotesLoading />}\r\n\r\n      {isFinished && displayVotes.length > 0 && (\r\n        <>\r\n          <Row>\r\n            <AddressColumn>\r\n              <Text fontSize=\"12px\" color=\"textSubtle\" textTransform=\"uppercase\" bold>\r\n                {t('Voter')}\r\n              </Text>\r\n            </AddressColumn>\r\n            <ChoiceColumn>\r\n              <Text fontSize=\"12px\" color=\"textSubtle\" textTransform=\"uppercase\" bold>\r\n                {t('Decision')}\r\n              </Text>\r\n            </ChoiceColumn>\r\n            <VotingPowerColumn>\r\n              <Text fontSize=\"12px\" color=\"textSubtle\" textTransform=\"uppercase\" bold>\r\n                {t('Vote Weight')}\r\n              </Text>\r\n            </VotingPowerColumn>\r\n          </Row>\r\n          {displayVotes.map((vote) => {\r\n            const isVoter = account && vote.voter.toLowerCase() === account.toLowerCase()\r\n            return <VoteRow key={vote.id} vote={vote} isVoter={isVoter} />\r\n          })}\r\n          <Flex alignItems=\"center\" justifyContent=\"center\" py=\"8px\" px=\"24px\">\r\n            <Button\r\n              width=\"100%\"\r\n              onClick={handleClick}\r\n              variant=\"text\"\r\n              endIcon={\r\n                showAll ? (\r\n                  <ChevronUpIcon color=\"primary\" width=\"21px\" />\r\n                ) : (\r\n                  <ChevronDownIcon color=\"primary\" width=\"21px\" />\r\n                )\r\n              }\r\n              disabled={!isFinished}\r\n            >\r\n              {showAll ? t('Hide') : t('See All')}\r\n            </Button>\r\n          </Flex>\r\n        </>\r\n      )}\r\n\r\n      {isFinished && displayVotes.length === 0 && (\r\n        <Flex alignItems=\"center\" justifyContent=\"center\" py=\"32px\">\r\n          <Heading as=\"h5\">{t('No votes found')}</Heading>\r\n        </Flex>\r\n      )}\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default Votes\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}