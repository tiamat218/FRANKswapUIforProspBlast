{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\frkul\\\\Documents\\\\swapUI_pancake-frontend\\\\src\\\\views\\\\Profile\\\\components\\\\EditProfileModal\\\\StartView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport BigNumber from 'bignumber.js';\nimport { useWeb3React } from '@web3-react/core';\nimport { Button, Flex, Text } from '@pancakeswap/uikit';\nimport { getFullDisplayBalance } from 'utils/formatBalance';\nimport { getPancakeProfileAddress } from 'utils/addressHelpers';\nimport { useCake } from 'hooks/useContract';\nimport { useTranslation } from 'contexts/Localization';\nimport useGetProfileCosts from 'views/Profile/hooks/useGetProfileCosts';\nimport useHasCakeBalance from 'hooks/useHasCakeBalance';\nimport { useProfile } from 'state/profile/hooks';\nimport ProfileAvatar from '../ProfileAvatar';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DangerOutline = styled(Button).attrs({\n  variant: 'secondary'\n})`\n  border-color: ${({\n  theme\n}) => theme.colors.failure};\n  color: ${({\n  theme\n}) => theme.colors.failure};\n  margin-bottom: 24px;\n\n  &:hover:not(:disabled):not(.button--disabled):not(:active) {\n    border-color: ${({\n  theme\n}) => theme.colors.failure};\n    opacity: 0.8;\n  }\n`;\n_c = DangerOutline;\nconst AvatarWrapper = styled.div`\n  height: 64px;\n  width: 64px;\n\n  ${({\n  theme\n}) => theme.mediaQueries.sm} {\n    height: 128px;\n    width: 128px;\n  }\n`;\n_c2 = AvatarWrapper;\nconst StartPage = ({\n  goToApprove,\n  goToChange,\n  goToRemove,\n  onDismiss\n}) => {\n  _s();\n  const [needsApproval, setNeedsApproval] = useState(null);\n  const {\n    profile\n  } = useProfile();\n  const {\n    numberCakeToUpdate,\n    numberCakeToReactivate\n  } = useGetProfileCosts();\n  const minimumCakeRequired = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate;\n  const hasMinimumCakeRequired = useHasCakeBalance(minimumCakeRequired);\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWeb3React();\n  const cakeContract = useCake();\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate;\n\n  /**\r\n   * Check if the wallet has the required CAKE allowance to change their profile pic or reactivate\r\n   * If they don't, we send them to the approval screen first\r\n   */\n  useEffect(() => {\n    const checkApprovalStatus = async () => {\n      const response = await cakeContract.allowance(account, getPancakeProfileAddress());\n      const currentAllowance = new BigNumber(response.toString());\n      setNeedsApproval(currentAllowance.lt(cost));\n    };\n    if (account) {\n      checkApprovalStatus();\n    }\n  }, [account, cost, setNeedsApproval, cakeContract]);\n  if (!profile) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    children: [/*#__PURE__*/_jsxDEV(AvatarWrapper, {\n      children: /*#__PURE__*/_jsxDEV(ProfileAvatar, {\n        profile: profile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      style: {\n        height: '48px'\n      },\n      justifyContent: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        as: \"p\",\n        color: \"failure\",\n        children: !hasMinimumCakeRequired && t('%minimum% CAKE required to change profile pic', {\n          minimum: getFullDisplayBalance(minimumCakeRequired)\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), profile.isActive ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        width: \"100%\",\n        mb: \"8px\",\n        onClick: needsApproval === true ? goToApprove : goToChange,\n        disabled: !hasMinimumCakeRequired || needsApproval === null,\n        children: t('Change Profile Pic')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(DangerOutline, {\n        width: \"100%\",\n        onClick: goToRemove,\n        children: t('Remove Profile Pic')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Button, {\n      width: \"100%\",\n      mb: \"8px\",\n      onClick: needsApproval === true ? goToApprove : goToChange,\n      disabled: !hasMinimumCakeRequired || needsApproval === null,\n      children: t('Reactivate Profile')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"text\",\n      width: \"100%\",\n      onClick: onDismiss,\n      children: t('Close Window')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(StartPage, \"aHtGz208swERRkMf+Lidy3oBOJM=\", false, function () {\n  return [useProfile, useGetProfileCosts, useHasCakeBalance, useTranslation, useWeb3React, useCake];\n});\n_c3 = StartPage;\nexport default StartPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"DangerOutline\");\n$RefreshReg$(_c2, \"AvatarWrapper\");\n$RefreshReg$(_c3, \"StartPage\");","map":{"version":3,"names":["React","useEffect","useState","styled","BigNumber","useWeb3React","Button","Flex","Text","getFullDisplayBalance","getPancakeProfileAddress","useCake","useTranslation","useGetProfileCosts","useHasCakeBalance","useProfile","ProfileAvatar","jsxDEV","_jsxDEV","Fragment","_Fragment","DangerOutline","attrs","variant","theme","colors","failure","_c","AvatarWrapper","div","mediaQueries","sm","_c2","StartPage","goToApprove","goToChange","goToRemove","onDismiss","_s","needsApproval","setNeedsApproval","profile","numberCakeToUpdate","numberCakeToReactivate","minimumCakeRequired","isActive","hasMinimumCakeRequired","t","account","cakeContract","cost","checkApprovalStatus","response","allowance","currentAllowance","toString","lt","alignItems","justifyContent","flexDirection","children","fileName","_jsxFileName","lineNumber","columnNumber","style","height","as","color","minimum","width","mb","onClick","disabled","_c3","$RefreshReg$"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Profile/components/EditProfileModal/StartView.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Button, Flex, Text, InjectedModalProps } from '@pancakeswap/uikit'\r\nimport { getFullDisplayBalance } from 'utils/formatBalance'\r\nimport { getPancakeProfileAddress } from 'utils/addressHelpers'\r\nimport { useCake } from 'hooks/useContract'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useGetProfileCosts from 'views/Profile/hooks/useGetProfileCosts'\r\nimport useHasCakeBalance from 'hooks/useHasCakeBalance'\r\nimport { useProfile } from 'state/profile/hooks'\r\nimport { UseEditProfileResponse } from './reducer'\r\nimport ProfileAvatar from '../ProfileAvatar'\r\n\r\ninterface StartPageProps extends InjectedModalProps {\r\n  goToChange: UseEditProfileResponse['goToChange']\r\n  goToRemove: UseEditProfileResponse['goToRemove']\r\n  goToApprove: UseEditProfileResponse['goToApprove']\r\n}\r\n\r\nconst DangerOutline = styled(Button).attrs({ variant: 'secondary' })`\r\n  border-color: ${({ theme }) => theme.colors.failure};\r\n  color: ${({ theme }) => theme.colors.failure};\r\n  margin-bottom: 24px;\r\n\r\n  &:hover:not(:disabled):not(.button--disabled):not(:active) {\r\n    border-color: ${({ theme }) => theme.colors.failure};\r\n    opacity: 0.8;\r\n  }\r\n`\r\n\r\nconst AvatarWrapper = styled.div`\r\n  height: 64px;\r\n  width: 64px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    height: 128px;\r\n    width: 128px;\r\n  }\r\n`\r\n\r\nconst StartPage: React.FC<StartPageProps> = ({ goToApprove, goToChange, goToRemove, onDismiss }) => {\r\n  const [needsApproval, setNeedsApproval] = useState(null)\r\n  const { profile } = useProfile()\r\n  const { numberCakeToUpdate, numberCakeToReactivate } = useGetProfileCosts()\r\n  const minimumCakeRequired = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\r\n  const hasMinimumCakeRequired = useHasCakeBalance(minimumCakeRequired)\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const cakeContract = useCake()\r\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\r\n\r\n  /**\r\n   * Check if the wallet has the required CAKE allowance to change their profile pic or reactivate\r\n   * If they don't, we send them to the approval screen first\r\n   */\r\n  useEffect(() => {\r\n    const checkApprovalStatus = async () => {\r\n      const response = await cakeContract.allowance(account, getPancakeProfileAddress())\r\n      const currentAllowance = new BigNumber(response.toString())\r\n      setNeedsApproval(currentAllowance.lt(cost))\r\n    }\r\n\r\n    if (account) {\r\n      checkApprovalStatus()\r\n    }\r\n  }, [account, cost, setNeedsApproval, cakeContract])\r\n\r\n  if (!profile) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\r\n      <AvatarWrapper>\r\n        <ProfileAvatar profile={profile} />\r\n      </AvatarWrapper>\r\n      <Flex alignItems=\"center\" style={{ height: '48px' }} justifyContent=\"center\">\r\n        <Text as=\"p\" color=\"failure\">\r\n          {!hasMinimumCakeRequired &&\r\n            t('%minimum% CAKE required to change profile pic', { minimum: getFullDisplayBalance(minimumCakeRequired) })}\r\n        </Text>\r\n      </Flex>\r\n      {profile.isActive ? (\r\n        <>\r\n          <Button\r\n            width=\"100%\"\r\n            mb=\"8px\"\r\n            onClick={needsApproval === true ? goToApprove : goToChange}\r\n            disabled={!hasMinimumCakeRequired || needsApproval === null}\r\n          >\r\n            {t('Change Profile Pic')}\r\n          </Button>\r\n          <DangerOutline width=\"100%\" onClick={goToRemove}>\r\n            {t('Remove Profile Pic')}\r\n          </DangerOutline>\r\n        </>\r\n      ) : (\r\n        <Button\r\n          width=\"100%\"\r\n          mb=\"8px\"\r\n          onClick={needsApproval === true ? goToApprove : goToChange}\r\n          disabled={!hasMinimumCakeRequired || needsApproval === null}\r\n        >\r\n          {t('Reactivate Profile')}\r\n        </Button>\r\n      )}\r\n      <Button variant=\"text\" width=\"100%\" onClick={onDismiss}>\r\n        {t('Close Window')}\r\n      </Button>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default StartPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}