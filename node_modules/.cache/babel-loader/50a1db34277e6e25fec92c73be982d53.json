{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/frkul/Documents/swapUI_pancake-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useEffect,useRef}from'react';import styled from'styled-components';import{useCountUp}from'react-countup';import{CardBody,Flex,PlayCircleOutlineIcon,Skeleton,Text,TooltipText,useTooltip}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import{BetPosition}from'state/types';import{BLOCK_PADDING}from'state/predictions';import{formatBigNumberToFixed}from'utils/formatBalance';import{useGetLastOraclePrice}from'state/hooks';import{useBlock}from'state/block/hooks';import BlockProgress from'components/BlockProgress';import{formatUsdv2,getPriceDifference}from'../../helpers';import PositionTag from'../PositionTag';import{RoundResultBox,LockPriceRow,PrizePoolRow}from'../RoundResult';import MultiplierArrow from'./MultiplierArrow';import Card from'./Card';import CardHeader from'./CardHeader';import CalculatingCard from'./CalculatingCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GradientBorder=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background: linear-gradient(180deg, #53dee9 0%, #7645d9 100%);\\n  border-radius: 16px;\\n  padding: 1px;\\n\"])));const GradientCard=styled(Card)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background: \",\";\\n\"])),_ref=>{let{theme}=_ref;return theme.colors.gradients.bubblegum;});const LiveRoundCard=_ref2=>{let{round,betAmount,hasEnteredUp,hasEnteredDown,bullMultiplier,bearMultiplier}=_ref2;const{t}=useTranslation();const{lockPrice,lockBlock,endBlock,totalAmount}=round;const{currentBlock}=useBlock();const price=useGetLastOraclePrice();const isBull=lockPrice&&price.gt(lockPrice);const priceColor=isBull?'success':'failure';const estimatedEndBlockPlusPadding=endBlock+BLOCK_PADDING;const priceDifference=getPriceDifference(price,lockPrice);const priceAsNumber=parseFloat(formatBigNumberToFixed(price,3,8));const{countUp,update}=useCountUp({start:0,end:priceAsNumber,duration:1,decimals:3});const{targetRef,tooltip,tooltipVisible}=useTooltip(t('Last price from Chainlink Oracle'),{placement:'bottom'});const updateRef=useRef(update);useEffect(()=>{updateRef.current(priceAsNumber);},[priceAsNumber,updateRef]);if(currentBlock>estimatedEndBlockPlusPadding){return/*#__PURE__*/_jsx(CalculatingCard,{round:round});}return/*#__PURE__*/_jsxs(GradientBorder,{children:[/*#__PURE__*/_jsxs(GradientCard,{children:[/*#__PURE__*/_jsx(CardHeader,{status:\"live\",icon:/*#__PURE__*/_jsx(PlayCircleOutlineIcon,{mr:\"4px\",width:\"24px\",color:\"secondary\"}),title:t('Live'),epoch:round.epoch,blockNumber:estimatedEndBlockPlusPadding}),/*#__PURE__*/_jsx(BlockProgress,{variant:\"flat\",scale:\"sm\",startBlock:lockBlock,endBlock:estimatedEndBlockPlusPadding}),/*#__PURE__*/_jsxs(CardBody,{p:\"16px\",children:[/*#__PURE__*/_jsx(MultiplierArrow,{betAmount:betAmount,multiplier:bullMultiplier,hasEntered:hasEnteredUp,isActive:isBull}),/*#__PURE__*/_jsxs(RoundResultBox,{betPosition:isBull?BetPosition.BULL:BetPosition.BEAR,children:[/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",fontSize:\"12px\",bold:true,textTransform:\"uppercase\",mb:\"8px\",children:t('Last Price')}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"space-between\",mb:\"16px\",height:\"36px\",children:[/*#__PURE__*/_jsx(\"div\",{ref:targetRef,children:/*#__PURE__*/_jsx(TooltipText,{bold:true,color:priceColor,fontSize:\"24px\",style:{minHeight:'36px'},children:price.gt(0)?\"$\".concat(countUp):/*#__PURE__*/_jsx(Skeleton,{height:\"36px\",width:\"94px\"})})}),/*#__PURE__*/_jsx(PositionTag,{betPosition:isBull?BetPosition.BULL:BetPosition.BEAR,children:formatUsdv2(priceDifference)})]}),lockPrice&&/*#__PURE__*/_jsx(LockPriceRow,{lockPrice:lockPrice}),/*#__PURE__*/_jsx(PrizePoolRow,{totalAmount:totalAmount})]}),/*#__PURE__*/_jsx(MultiplierArrow,{betAmount:betAmount,multiplier:bearMultiplier,betPosition:BetPosition.BEAR,hasEntered:hasEnteredDown,isActive:!isBull})]})]}),tooltipVisible&&tooltip]});};export default LiveRoundCard;","map":{"version":3,"names":["React","useEffect","useRef","styled","useCountUp","CardBody","Flex","PlayCircleOutlineIcon","Skeleton","Text","TooltipText","useTooltip","useTranslation","BetPosition","BLOCK_PADDING","formatBigNumberToFixed","useGetLastOraclePrice","useBlock","BlockProgress","formatUsdv2","getPriceDifference","PositionTag","RoundResultBox","LockPriceRow","PrizePoolRow","MultiplierArrow","Card","CardHeader","CalculatingCard","jsx","_jsx","jsxs","_jsxs","GradientBorder","div","_templateObject","_taggedTemplateLiteral","GradientCard","_templateObject2","_ref","theme","colors","gradients","bubblegum","LiveRoundCard","_ref2","round","betAmount","hasEnteredUp","hasEnteredDown","bullMultiplier","bearMultiplier","t","lockPrice","lockBlock","endBlock","totalAmount","currentBlock","price","isBull","gt","priceColor","estimatedEndBlockPlusPadding","priceDifference","priceAsNumber","parseFloat","countUp","update","start","end","duration","decimals","targetRef","tooltip","tooltipVisible","placement","updateRef","current","children","status","icon","mr","width","color","title","epoch","blockNumber","variant","scale","startBlock","p","multiplier","hasEntered","isActive","betPosition","BULL","BEAR","fontSize","bold","textTransform","mb","alignItems","justifyContent","height","ref","style","minHeight","concat"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Predictions/components/RoundCard/LiveRoundCard.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useCountUp } from 'react-countup'\r\nimport { CardBody, Flex, PlayCircleOutlineIcon, Skeleton, Text, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { NodeRound, NodeLedger, BetPosition } from 'state/types'\r\nimport { BLOCK_PADDING } from 'state/predictions'\r\nimport { formatBigNumberToFixed } from 'utils/formatBalance'\r\nimport { useGetLastOraclePrice } from 'state/hooks'\r\nimport { useBlock } from 'state/block/hooks'\r\nimport BlockProgress from 'components/BlockProgress'\r\nimport { formatUsdv2, getPriceDifference } from '../../helpers'\r\nimport PositionTag from '../PositionTag'\r\nimport { RoundResultBox, LockPriceRow, PrizePoolRow } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport Card from './Card'\r\nimport CardHeader from './CardHeader'\r\nimport CalculatingCard from './CalculatingCard'\r\n\r\ninterface LiveRoundCardProps {\r\n  round: NodeRound\r\n  betAmount?: NodeLedger['amount']\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n  bullMultiplier: string\r\n  bearMultiplier: string\r\n}\r\n\r\nconst GradientBorder = styled.div`\r\n  background: linear-gradient(180deg, #53dee9 0%, #7645d9 100%);\r\n  border-radius: 16px;\r\n  padding: 1px;\r\n`\r\n\r\nconst GradientCard = styled(Card)`\r\n  background: ${({ theme }) => theme.colors.gradients.bubblegum};\r\n`\r\n\r\nconst LiveRoundCard: React.FC<LiveRoundCardProps> = ({\r\n  round,\r\n  betAmount,\r\n  hasEnteredUp,\r\n  hasEnteredDown,\r\n  bullMultiplier,\r\n  bearMultiplier,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const { lockPrice, lockBlock, endBlock, totalAmount } = round\r\n  const { currentBlock } = useBlock()\r\n  const price = useGetLastOraclePrice()\r\n\r\n  const isBull = lockPrice && price.gt(lockPrice)\r\n  const priceColor = isBull ? 'success' : 'failure'\r\n  const estimatedEndBlockPlusPadding = endBlock + BLOCK_PADDING\r\n\r\n  const priceDifference = getPriceDifference(price, lockPrice)\r\n  const priceAsNumber = parseFloat(formatBigNumberToFixed(price, 3, 8))\r\n\r\n  const { countUp, update } = useCountUp({\r\n    start: 0,\r\n    end: priceAsNumber,\r\n    duration: 1,\r\n    decimals: 3,\r\n  })\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(t('Last price from Chainlink Oracle'), {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  const updateRef = useRef(update)\r\n\r\n  useEffect(() => {\r\n    updateRef.current(priceAsNumber)\r\n  }, [priceAsNumber, updateRef])\r\n\r\n  if (currentBlock > estimatedEndBlockPlusPadding) {\r\n    return <CalculatingCard round={round} />\r\n  }\r\n\r\n  return (\r\n    <GradientBorder>\r\n      <GradientCard>\r\n        <CardHeader\r\n          status=\"live\"\r\n          icon={<PlayCircleOutlineIcon mr=\"4px\" width=\"24px\" color=\"secondary\" />}\r\n          title={t('Live')}\r\n          epoch={round.epoch}\r\n          blockNumber={estimatedEndBlockPlusPadding}\r\n        />\r\n        <BlockProgress variant=\"flat\" scale=\"sm\" startBlock={lockBlock} endBlock={estimatedEndBlockPlusPadding} />\r\n        <CardBody p=\"16px\">\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bullMultiplier}\r\n            hasEntered={hasEnteredUp}\r\n            isActive={isBull}\r\n          />\r\n          <RoundResultBox betPosition={isBull ? BetPosition.BULL : BetPosition.BEAR}>\r\n            <Text color=\"textSubtle\" fontSize=\"12px\" bold textTransform=\"uppercase\" mb=\"8px\">\r\n              {t('Last Price')}\r\n            </Text>\r\n            <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\" height=\"36px\">\r\n              <div ref={targetRef}>\r\n                <TooltipText bold color={priceColor} fontSize=\"24px\" style={{ minHeight: '36px' }}>\r\n                  {price.gt(0) ? `$${countUp}` : <Skeleton height=\"36px\" width=\"94px\" />}\r\n                </TooltipText>\r\n              </div>\r\n              <PositionTag betPosition={isBull ? BetPosition.BULL : BetPosition.BEAR}>\r\n                {formatUsdv2(priceDifference)}\r\n              </PositionTag>\r\n            </Flex>\r\n            {lockPrice && <LockPriceRow lockPrice={lockPrice} />}\r\n            <PrizePoolRow totalAmount={totalAmount} />\r\n          </RoundResultBox>\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bearMultiplier}\r\n            betPosition={BetPosition.BEAR}\r\n            hasEntered={hasEnteredDown}\r\n            isActive={!isBull}\r\n          />\r\n        </CardBody>\r\n      </GradientCard>\r\n      {tooltipVisible && tooltip}\r\n    </GradientBorder>\r\n  )\r\n}\r\n\r\nexport default LiveRoundCard\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}