{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/frkul/Documents/swapUI_pancake-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useContext,useState}from'react';import styled from'styled-components';import{AutoRenewIcon,Button,Card,CardBody,Heading,Skeleton,Text}from'@pancakeswap/uikit';import{useWeb3React}from'@web3-react/core';import{Link as RouterLink}from'react-router-dom';import{getAddressByType}from'utils/collectibles';import{getPancakeProfileAddress}from'utils/addressHelpers';import{getErc721Contract}from'utils/contractHelpers';import{useTranslation}from'contexts/Localization';import{useGetCollectibles}from'state/hooks';import useToast from'hooks/useToast';import SelectionCard from'../components/SelectionCard';import NextStepButton from'../components/NextStepButton';import{ProfileCreationContext}from'./contexts/ProfileCreationProvider';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Link=styled(RouterLink)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  color: \",\";\\n\"])),_ref=>{let{theme}=_ref;return theme.colors.primary;});const NftWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-bottom: 24px;\\n\"])));const ProfilePicture=()=>{const{library}=useWeb3React();const[isApproved,setIsApproved]=useState(false);const[isApproving,setIsApproving]=useState(false);const{selectedNft,actions}=useContext(ProfileCreationContext);const{t}=useTranslation();const{isLoading,nftsInWallet,tokenIds}=useGetCollectibles();const{toastError}=useToast();const handleApprove=async()=>{const contract=getErc721Contract(selectedNft.nftAddress,library.getSigner());const tx=await contract.approve(getPancakeProfileAddress(),selectedNft.tokenId);setIsApproving(true);const receipt=await tx.wait();if(receipt.status){setIsApproving(false);setIsApproved(true);}else{toastError(t('Error'),t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));setIsApproving(false);}};if(!isLoading&&nftsInWallet.length===0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Heading,{scale:\"xl\",mb:\"24px\",children:t('Oops!')}),/*#__PURE__*/_jsx(Text,{bold:true,fontSize:\"20px\",mb:\"24px\",children:t('We couldn’t find any Pancake Collectibles in your wallet.')}),/*#__PURE__*/_jsx(Text,{as:\"p\",children:t('You need a Pancake Collectible to finish setting up your profile. If you sold or transferred your starter collectible to another wallet, you’ll need to get it back or acquire a new one somehow. You can’t make a new starter with this wallet address.')})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Text,{fontSize:\"20px\",color:\"textSubtle\",bold:true,children:t('Step %num%',{num:2})}),/*#__PURE__*/_jsx(Heading,{as:\"h3\",scale:\"xl\",mb:\"24px\",children:t('Set Profile Picture')}),/*#__PURE__*/_jsx(Card,{mb:\"24px\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Heading,{as:\"h4\",scale:\"lg\",mb:\"8px\",children:t('Choose collectible')}),/*#__PURE__*/_jsx(Text,{as:\"p\",color:\"textSubtle\",children:t('Choose a profile picture from the eligible collectibles (NFT) in your wallet, shown below.')}),/*#__PURE__*/_jsxs(Text,{as:\"p\",color:\"textSubtle\",mb:\"24px\",children:[t('Only approved Pancake Collectibles can be used.'),/*#__PURE__*/_jsx(Link,{to:\"/collectibles\",style:{marginLeft:'4px'},children:t('See the list >')})]}),/*#__PURE__*/_jsx(NftWrapper,{children:isLoading?/*#__PURE__*/_jsx(Skeleton,{height:\"80px\",mb:\"16px\"}):nftsInWallet.map(walletNft=>{const[firstTokenId]=tokenIds[walletNft.identifier];const address=getAddressByType(walletNft.type);return/*#__PURE__*/_jsx(SelectionCard,{name:\"profilePicture\",value:firstTokenId,image:\"/images/nfts/\".concat(walletNft.images.md),isChecked:firstTokenId===selectedNft.tokenId,onChange:value=>actions.setSelectedNft(parseInt(value,10),address),children:/*#__PURE__*/_jsx(Text,{bold:true,children:walletNft.name})},walletNft.identifier);})}),/*#__PURE__*/_jsx(Heading,{as:\"h4\",scale:\"lg\",mb:\"8px\",children:t('Allow collectible to be locked')}),/*#__PURE__*/_jsx(Text,{as:\"p\",color:\"textSubtle\",mb:\"16px\",children:t(\"The collectible you've chosen will be locked in a smart contract while it’s being used as your profile picture. Don't worry - you'll be able to get it back at any time.\")}),/*#__PURE__*/_jsx(Button,{isLoading:isApproving,disabled:isApproved||isApproving||selectedNft.tokenId===null,onClick:handleApprove,endIcon:isApproving?/*#__PURE__*/_jsx(AutoRenewIcon,{spin:true,color:\"currentColor\"}):undefined,id:\"approveStarterCollectible\",children:t('Enable')})]})}),/*#__PURE__*/_jsx(NextStepButton,{onClick:actions.nextStep,disabled:selectedNft.tokenId===null||!isApproved||isApproving,children:t('Next Step')})]});};export default ProfilePicture;","map":{"version":3,"names":["React","useContext","useState","styled","AutoRenewIcon","Button","Card","CardBody","Heading","Skeleton","Text","useWeb3React","Link","RouterLink","getAddressByType","getPancakeProfileAddress","getErc721Contract","useTranslation","useGetCollectibles","useToast","SelectionCard","NextStepButton","ProfileCreationContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","_templateObject","_taggedTemplateLiteral","_ref","theme","colors","primary","NftWrapper","div","_templateObject2","ProfilePicture","library","isApproved","setIsApproved","isApproving","setIsApproving","selectedNft","actions","t","isLoading","nftsInWallet","tokenIds","toastError","handleApprove","contract","nftAddress","getSigner","tx","approve","tokenId","receipt","wait","status","length","children","scale","mb","bold","fontSize","as","color","num","to","style","marginLeft","height","map","walletNft","firstTokenId","identifier","address","type","name","value","image","concat","images","md","isChecked","onChange","setSelectedNft","parseInt","disabled","onClick","endIcon","spin","undefined","id","nextStep"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Profile/ProfileCreation/ProfilePicture.tsx"],"sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { AutoRenewIcon, Button, Card, CardBody, Heading, Skeleton, Text } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Link as RouterLink } from 'react-router-dom'\r\nimport { getAddressByType } from 'utils/collectibles'\r\nimport { getPancakeProfileAddress } from 'utils/addressHelpers'\r\nimport { getErc721Contract } from 'utils/contractHelpers'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useGetCollectibles } from 'state/hooks'\r\nimport useToast from 'hooks/useToast'\r\nimport SelectionCard from '../components/SelectionCard'\r\nimport NextStepButton from '../components/NextStepButton'\r\nimport { ProfileCreationContext } from './contexts/ProfileCreationProvider'\r\n\r\nconst Link = styled(RouterLink)`\r\n  color: ${({ theme }) => theme.colors.primary};\r\n`\r\n\r\nconst NftWrapper = styled.div`\r\n  margin-bottom: 24px;\r\n`\r\n\r\nconst ProfilePicture: React.FC = () => {\r\n  const { library } = useWeb3React()\r\n  const [isApproved, setIsApproved] = useState(false)\r\n  const [isApproving, setIsApproving] = useState(false)\r\n  const { selectedNft, actions } = useContext(ProfileCreationContext)\r\n\r\n  const { t } = useTranslation()\r\n  const { isLoading, nftsInWallet, tokenIds } = useGetCollectibles()\r\n  const { toastError } = useToast()\r\n\r\n  const handleApprove = async () => {\r\n    const contract = getErc721Contract(selectedNft.nftAddress, library.getSigner())\r\n    const tx = await contract.approve(getPancakeProfileAddress(), selectedNft.tokenId)\r\n    setIsApproving(true)\r\n    const receipt = await tx.wait()\r\n    if (receipt.status) {\r\n      setIsApproving(false)\r\n      setIsApproved(true)\r\n    } else {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      setIsApproving(false)\r\n    }\r\n  }\r\n\r\n  if (!isLoading && nftsInWallet.length === 0) {\r\n    return (\r\n      <>\r\n        <Heading scale=\"xl\" mb=\"24px\">\r\n          {t('Oops!')}\r\n        </Heading>\r\n        <Text bold fontSize=\"20px\" mb=\"24px\">\r\n          {t('We couldn’t find any Pancake Collectibles in your wallet.')}\r\n        </Text>\r\n        <Text as=\"p\">\r\n          {t(\r\n            'You need a Pancake Collectible to finish setting up your profile. If you sold or transferred your starter collectible to another wallet, you’ll need to get it back or acquire a new one somehow. You can’t make a new starter with this wallet address.',\r\n          )}\r\n        </Text>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Text fontSize=\"20px\" color=\"textSubtle\" bold>\r\n        {t('Step %num%', { num: 2 })}\r\n      </Text>\r\n      <Heading as=\"h3\" scale=\"xl\" mb=\"24px\">\r\n        {t('Set Profile Picture')}\r\n      </Heading>\r\n      <Card mb=\"24px\">\r\n        <CardBody>\r\n          <Heading as=\"h4\" scale=\"lg\" mb=\"8px\">\r\n            {t('Choose collectible')}\r\n          </Heading>\r\n          <Text as=\"p\" color=\"textSubtle\">\r\n            {t('Choose a profile picture from the eligible collectibles (NFT) in your wallet, shown below.')}\r\n          </Text>\r\n          <Text as=\"p\" color=\"textSubtle\" mb=\"24px\">\r\n            {t('Only approved Pancake Collectibles can be used.')}\r\n            <Link to=\"/collectibles\" style={{ marginLeft: '4px' }}>\r\n              {t('See the list >')}\r\n            </Link>\r\n          </Text>\r\n          <NftWrapper>\r\n            {isLoading ? (\r\n              <Skeleton height=\"80px\" mb=\"16px\" />\r\n            ) : (\r\n              nftsInWallet.map((walletNft) => {\r\n                const [firstTokenId] = tokenIds[walletNft.identifier]\r\n                const address = getAddressByType(walletNft.type)\r\n\r\n                return (\r\n                  <SelectionCard\r\n                    name=\"profilePicture\"\r\n                    key={walletNft.identifier}\r\n                    value={firstTokenId}\r\n                    image={`/images/nfts/${walletNft.images.md}`}\r\n                    isChecked={firstTokenId === selectedNft.tokenId}\r\n                    onChange={(value: string) => actions.setSelectedNft(parseInt(value, 10), address)}\r\n                  >\r\n                    <Text bold>{walletNft.name}</Text>\r\n                  </SelectionCard>\r\n                )\r\n              })\r\n            )}\r\n          </NftWrapper>\r\n          <Heading as=\"h4\" scale=\"lg\" mb=\"8px\">\r\n            {t('Allow collectible to be locked')}\r\n          </Heading>\r\n          <Text as=\"p\" color=\"textSubtle\" mb=\"16px\">\r\n            {t(\r\n              \"The collectible you've chosen will be locked in a smart contract while it’s being used as your profile picture. Don't worry - you'll be able to get it back at any time.\",\r\n            )}\r\n          </Text>\r\n          <Button\r\n            isLoading={isApproving}\r\n            disabled={isApproved || isApproving || selectedNft.tokenId === null}\r\n            onClick={handleApprove}\r\n            endIcon={isApproving ? <AutoRenewIcon spin color=\"currentColor\" /> : undefined}\r\n            id=\"approveStarterCollectible\"\r\n          >\r\n            {t('Enable')}\r\n          </Button>\r\n        </CardBody>\r\n      </Card>\r\n      <NextStepButton onClick={actions.nextStep} disabled={selectedNft.tokenId === null || !isApproved || isApproving}>\r\n        {t('Next Step')}\r\n      </NextStepButton>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProfilePicture\r\n"],"mappings":"4NAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACnD,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,OAASC,aAAa,CAAEC,MAAM,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,IAAI,KAAQ,oBAAoB,CACnG,OAASC,YAAY,KAAQ,kBAAkB,CAC/C,OAASC,IAAI,GAAI,CAAAC,UAAU,KAAQ,kBAAkB,CACrD,OAASC,gBAAgB,KAAQ,oBAAoB,CACrD,OAASC,wBAAwB,KAAQ,sBAAsB,CAC/D,OAASC,iBAAiB,KAAQ,uBAAuB,CACzD,OAASC,cAAc,KAAQ,uBAAuB,CACtD,OAASC,kBAAkB,KAAQ,aAAa,CAChD,MAAO,CAAAC,QAAQ,KAAM,gBAAgB,CACrC,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CACvD,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,OAASC,sBAAsB,KAAQ,oCAAoC,QAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3E,KAAM,CAAAhB,IAAI,CAAGT,MAAM,CAACU,UAAU,CAAC,CAAAgB,eAAA,GAAAA,eAAA,CAAAC,sBAAA,yBACpBC,IAAA,MAAC,CAAEC,KAAM,CAAC,CAAAD,IAAA,OAAK,CAAAC,KAAK,CAACC,MAAM,CAACC,OAAO,GAC7C,CAED,KAAM,CAAAC,UAAU,CAAGhC,MAAM,CAACiC,GAAG,CAAAC,gBAAA,GAAAA,gBAAA,CAAAP,sBAAA,kCAE5B,CAED,KAAM,CAAAQ,cAAwB,CAAGA,CAAA,GAAM,CACrC,KAAM,CAAEC,OAAQ,CAAC,CAAG5B,YAAY,CAAC,CAAC,CAClC,KAAM,CAAC6B,UAAU,CAAEC,aAAa,CAAC,CAAGvC,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACwC,WAAW,CAAEC,cAAc,CAAC,CAAGzC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAE0C,WAAW,CAAEC,OAAQ,CAAC,CAAG5C,UAAU,CAACqB,sBAAsB,CAAC,CAEnE,KAAM,CAAEwB,CAAE,CAAC,CAAG7B,cAAc,CAAC,CAAC,CAC9B,KAAM,CAAE8B,SAAS,CAAEC,YAAY,CAAEC,QAAS,CAAC,CAAG/B,kBAAkB,CAAC,CAAC,CAClE,KAAM,CAAEgC,UAAW,CAAC,CAAG/B,QAAQ,CAAC,CAAC,CAEjC,KAAM,CAAAgC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAC,QAAQ,CAAGpC,iBAAiB,CAAC4B,WAAW,CAACS,UAAU,CAAEd,OAAO,CAACe,SAAS,CAAC,CAAC,CAAC,CAC/E,KAAM,CAAAC,EAAE,CAAG,KAAM,CAAAH,QAAQ,CAACI,OAAO,CAACzC,wBAAwB,CAAC,CAAC,CAAE6B,WAAW,CAACa,OAAO,CAAC,CAClFd,cAAc,CAAC,IAAI,CAAC,CACpB,KAAM,CAAAe,OAAO,CAAG,KAAM,CAAAH,EAAE,CAACI,IAAI,CAAC,CAAC,CAC/B,GAAID,OAAO,CAACE,MAAM,CAAE,CAClBjB,cAAc,CAAC,KAAK,CAAC,CACrBF,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACLS,UAAU,CAACJ,CAAC,CAAC,OAAO,CAAC,CAAEA,CAAC,CAAC,oFAAoF,CAAC,CAAC,CAC/GH,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,GAAI,CAACI,SAAS,EAAIC,YAAY,CAACa,MAAM,GAAK,CAAC,CAAE,CAC3C,mBACEjC,KAAA,CAAAF,SAAA,EAAAoC,QAAA,eACEtC,IAAA,CAAChB,OAAO,EAACuD,KAAK,CAAC,IAAI,CAACC,EAAE,CAAC,MAAM,CAAAF,QAAA,CAC1BhB,CAAC,CAAC,OAAO,CAAC,CACJ,CAAC,cACVtB,IAAA,CAACd,IAAI,EAACuD,IAAI,MAACC,QAAQ,CAAC,MAAM,CAACF,EAAE,CAAC,MAAM,CAAAF,QAAA,CACjChB,CAAC,CAAC,2DAA2D,CAAC,CAC3D,CAAC,cACPtB,IAAA,CAACd,IAAI,EAACyD,EAAE,CAAC,GAAG,CAAAL,QAAA,CACThB,CAAC,CACA,0PACF,CAAC,CACG,CAAC,EACP,CAAC,CAEP,CAEA,mBACElB,KAAA,CAAAF,SAAA,EAAAoC,QAAA,eACEtC,IAAA,CAACd,IAAI,EAACwD,QAAQ,CAAC,MAAM,CAACE,KAAK,CAAC,YAAY,CAACH,IAAI,MAAAH,QAAA,CAC1ChB,CAAC,CAAC,YAAY,CAAE,CAAEuB,GAAG,CAAE,CAAE,CAAC,CAAC,CACxB,CAAC,cACP7C,IAAA,CAAChB,OAAO,EAAC2D,EAAE,CAAC,IAAI,CAACJ,KAAK,CAAC,IAAI,CAACC,EAAE,CAAC,MAAM,CAAAF,QAAA,CAClChB,CAAC,CAAC,qBAAqB,CAAC,CAClB,CAAC,cACVtB,IAAA,CAAClB,IAAI,EAAC0D,EAAE,CAAC,MAAM,CAAAF,QAAA,cACblC,KAAA,CAACrB,QAAQ,EAAAuD,QAAA,eACPtC,IAAA,CAAChB,OAAO,EAAC2D,EAAE,CAAC,IAAI,CAACJ,KAAK,CAAC,IAAI,CAACC,EAAE,CAAC,KAAK,CAAAF,QAAA,CACjChB,CAAC,CAAC,oBAAoB,CAAC,CACjB,CAAC,cACVtB,IAAA,CAACd,IAAI,EAACyD,EAAE,CAAC,GAAG,CAACC,KAAK,CAAC,YAAY,CAAAN,QAAA,CAC5BhB,CAAC,CAAC,4FAA4F,CAAC,CAC5F,CAAC,cACPlB,KAAA,CAAClB,IAAI,EAACyD,EAAE,CAAC,GAAG,CAACC,KAAK,CAAC,YAAY,CAACJ,EAAE,CAAC,MAAM,CAAAF,QAAA,EACtChB,CAAC,CAAC,iDAAiD,CAAC,cACrDtB,IAAA,CAACZ,IAAI,EAAC0D,EAAE,CAAC,eAAe,CAACC,KAAK,CAAE,CAAEC,UAAU,CAAE,KAAM,CAAE,CAAAV,QAAA,CACnDhB,CAAC,CAAC,gBAAgB,CAAC,CAChB,CAAC,EACH,CAAC,cACPtB,IAAA,CAACW,UAAU,EAAA2B,QAAA,CACRf,SAAS,cACRvB,IAAA,CAACf,QAAQ,EAACgE,MAAM,CAAC,MAAM,CAACT,EAAE,CAAC,MAAM,CAAE,CAAC,CAEpChB,YAAY,CAAC0B,GAAG,CAAEC,SAAS,EAAK,CAC9B,KAAM,CAACC,YAAY,CAAC,CAAG3B,QAAQ,CAAC0B,SAAS,CAACE,UAAU,CAAC,CACrD,KAAM,CAAAC,OAAO,CAAGhE,gBAAgB,CAAC6D,SAAS,CAACI,IAAI,CAAC,CAEhD,mBACEvD,IAAA,CAACJ,aAAa,EACZ4D,IAAI,CAAC,gBAAgB,CAErBC,KAAK,CAAEL,YAAa,CACpBM,KAAK,iBAAAC,MAAA,CAAkBR,SAAS,CAACS,MAAM,CAACC,EAAE,CAAG,CAC7CC,SAAS,CAAEV,YAAY,GAAKhC,WAAW,CAACa,OAAQ,CAChD8B,QAAQ,CAAGN,KAAa,EAAKpC,OAAO,CAAC2C,cAAc,CAACC,QAAQ,CAACR,KAAK,CAAE,EAAE,CAAC,CAAEH,OAAO,CAAE,CAAAhB,QAAA,cAElFtC,IAAA,CAACd,IAAI,EAACuD,IAAI,MAAAH,QAAA,CAAEa,SAAS,CAACK,IAAI,CAAO,CAAC,EAN7BL,SAAS,CAACE,UAOF,CAAC,CAEpB,CAAC,CACF,CACS,CAAC,cACbrD,IAAA,CAAChB,OAAO,EAAC2D,EAAE,CAAC,IAAI,CAACJ,KAAK,CAAC,IAAI,CAACC,EAAE,CAAC,KAAK,CAAAF,QAAA,CACjChB,CAAC,CAAC,gCAAgC,CAAC,CAC7B,CAAC,cACVtB,IAAA,CAACd,IAAI,EAACyD,EAAE,CAAC,GAAG,CAACC,KAAK,CAAC,YAAY,CAACJ,EAAE,CAAC,MAAM,CAAAF,QAAA,CACtChB,CAAC,CACA,0KACF,CAAC,CACG,CAAC,cACPtB,IAAA,CAACnB,MAAM,EACL0C,SAAS,CAAEL,WAAY,CACvBgD,QAAQ,CAAElD,UAAU,EAAIE,WAAW,EAAIE,WAAW,CAACa,OAAO,GAAK,IAAK,CACpEkC,OAAO,CAAExC,aAAc,CACvByC,OAAO,CAAElD,WAAW,cAAGlB,IAAA,CAACpB,aAAa,EAACyF,IAAI,MAACzB,KAAK,CAAC,cAAc,CAAE,CAAC,CAAG0B,SAAU,CAC/EC,EAAE,CAAC,2BAA2B,CAAAjC,QAAA,CAE7BhB,CAAC,CAAC,QAAQ,CAAC,CACN,CAAC,EACD,CAAC,CACP,CAAC,cACPtB,IAAA,CAACH,cAAc,EAACsE,OAAO,CAAE9C,OAAO,CAACmD,QAAS,CAACN,QAAQ,CAAE9C,WAAW,CAACa,OAAO,GAAK,IAAI,EAAI,CAACjB,UAAU,EAAIE,WAAY,CAAAoB,QAAA,CAC7GhB,CAAC,CAAC,WAAW,CAAC,CACD,CAAC,EACjB,CAAC,CAEP,CAAC,CAED,cAAe,CAAAR,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module"}