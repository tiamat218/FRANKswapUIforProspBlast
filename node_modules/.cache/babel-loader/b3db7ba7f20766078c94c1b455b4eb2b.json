{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Devrim\\\\Documents\\\\FRANKswapUIforProspBlast\\\\src\\\\views\\\\AddLiquidity\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { currencyEquals, ETHER, WETH } from '@pancakeswap/sdk';\nimport { Button, Text, Flex, AddIcon, CardBody, Message, useModal } from '@pancakeswap/uikit';\nimport { useIsTransactionUnsupported } from 'hooks/Trades';\nimport { useTranslation } from 'contexts/Localization';\nimport UnsupportedCurrencyFooter from 'components/UnsupportedCurrencyFooter';\nimport useActiveWeb3React from 'hooks/useActiveWeb3React';\nimport { LightCard } from '../../components/Card';\nimport { AutoColumn, ColumnCenter } from '../../components/Layout/Column';\nimport TransactionConfirmationModal, { ConfirmationModalContent } from '../../components/TransactionConfirmationModal';\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel';\nimport { DoubleCurrencyLogo } from '../../components/Logo';\nimport { AppHeader, AppBody } from '../../components/App';\nimport { MinimalPositionCard } from '../../components/PositionCard';\nimport Row, { RowBetween } from '../../components/Layout/Row';\nimport ConnectWalletButton from '../../components/ConnectWalletButton';\nimport { ROUTER_ADDRESS } from '../../config/constants';\nimport { PairState } from '../../hooks/usePairs';\nimport { useCurrency } from '../../hooks/Tokens';\nimport { ApprovalState, useApproveCallback } from '../../hooks/useApproveCallback';\nimport useTransactionDeadline from '../../hooks/useTransactionDeadline';\nimport { Field } from '../../state/mint/actions';\nimport { useDerivedMintInfo, useMintActionHandlers, useMintState } from '../../state/mint/hooks';\nimport { useTransactionAdder } from '../../state/transactions/hooks';\nimport { useIsExpertMode, useUserSlippageTolerance } from '../../state/user/hooks';\nimport { calculateGasMargin, calculateSlippageAmount, getRouterContract } from '../../utils';\nimport { maxAmountSpend } from '../../utils/maxAmountSpend';\nimport { wrappedCurrency } from '../../utils/wrappedCurrency';\nimport Dots from '../../components/Loader/Dots';\nimport ConfirmAddModalBottom from './ConfirmAddModalBottom';\nimport { currencyId } from '../../utils/currencyId';\nimport PoolPriceBar from './PoolPriceBar';\nimport Page from '../Page';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function AddLiquidity({\n  match: {\n    params: {\n      currencyIdA,\n      currencyIdB\n    }\n  },\n  history\n}) {\n  _s();\n\n  var _parsedAmounts$depend, _parsedAmounts$depend2, _parsedAmounts$Field$3, _parsedAmounts$Field$4, _currencies$Field$CUR7, _currencies$Field$CUR8, _parsedAmounts$Field$5, _parsedAmounts$Field$6, _currencies$Field$CUR9, _currencies$Field$CUR10, _currencies$Field$CUR11, _currencies$Field$CUR12, _currencies$Field$CUR13, _currencies$Field$CUR14;\n\n  const {\n    account,\n    chainId,\n    library\n  } = useActiveWeb3React();\n  const {\n    t\n  } = useTranslation();\n  const currencyA = useCurrency(currencyIdA);\n  const currencyB = useCurrency(currencyIdB);\n  const oneCurrencyIsWETH = Boolean(chainId && (currencyA && currencyEquals(currencyA, WETH[chainId]) || currencyB && currencyEquals(currencyB, WETH[chainId])));\n  const expertMode = useIsExpertMode(); // mint state\n\n  const {\n    independentField,\n    typedValue,\n    otherTypedValue\n  } = useMintState();\n  const {\n    dependentField,\n    currencies,\n    pair,\n    pairState,\n    currencyBalances,\n    parsedAmounts,\n    price,\n    noLiquidity,\n    liquidityMinted,\n    poolTokenPercentage,\n    error\n  } = useDerivedMintInfo(currencyA !== null && currencyA !== void 0 ? currencyA : undefined, currencyB !== null && currencyB !== void 0 ? currencyB : undefined);\n  const {\n    onFieldAInput,\n    onFieldBInput\n  } = useMintActionHandlers(noLiquidity);\n  const isValid = !error; // modal and loading\n\n  const [attemptingTxn, setAttemptingTxn] = useState(false); // clicked confirm\n  // txn values\n\n  const deadline = useTransactionDeadline(); // custom from users settings\n\n  const [allowedSlippage] = useUserSlippageTolerance(); // custom from users\n\n  const [txHash, setTxHash] = useState(''); // get formatted amounts\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: noLiquidity ? otherTypedValue : (_parsedAmounts$depend = (_parsedAmounts$depend2 = parsedAmounts[dependentField]) === null || _parsedAmounts$depend2 === void 0 ? void 0 : _parsedAmounts$depend2.toSignificant(6)) !== null && _parsedAmounts$depend !== void 0 ? _parsedAmounts$depend : ''\n  }; // get the max amounts user can add\n\n  const maxAmounts = [Field.CURRENCY_A, Field.CURRENCY_B].reduce((accumulator, field) => {\n    return { ...accumulator,\n      [field]: maxAmountSpend(currencyBalances[field])\n    };\n  }, {});\n  const atMaxAmounts = [Field.CURRENCY_A, Field.CURRENCY_B].reduce((accumulator, field) => {\n    var _maxAmounts$field, _parsedAmounts$field;\n\n    return { ...accumulator,\n      [field]: (_maxAmounts$field = maxAmounts[field]) === null || _maxAmounts$field === void 0 ? void 0 : _maxAmounts$field.equalTo((_parsedAmounts$field = parsedAmounts[field]) !== null && _parsedAmounts$field !== void 0 ? _parsedAmounts$field : '0')\n    };\n  }, {}); // check whether the user has approved the router on the tokens\n\n  const [approvalA, approveACallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_A], ROUTER_ADDRESS);\n  const [approvalB, approveBCallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_B], ROUTER_ADDRESS);\n  const addTransaction = useTransactionAdder();\n\n  async function onAdd() {\n    if (!chainId || !library || !account) return;\n    const router = getRouterContract(chainId, library, account);\n    const {\n      [Field.CURRENCY_A]: parsedAmountA,\n      [Field.CURRENCY_B]: parsedAmountB\n    } = parsedAmounts;\n\n    if (!parsedAmountA || !parsedAmountB || !currencyA || !currencyB || !deadline) {\n      return;\n    }\n\n    const amountsMin = {\n      [Field.CURRENCY_A]: calculateSlippageAmount(parsedAmountA, noLiquidity ? 0 : allowedSlippage)[0],\n      [Field.CURRENCY_B]: calculateSlippageAmount(parsedAmountB, noLiquidity ? 0 : allowedSlippage)[0]\n    };\n    let estimate;\n    let method;\n    let args;\n    let value;\n\n    if (currencyA === ETHER || currencyB === ETHER) {\n      var _wrappedCurrency$addr, _wrappedCurrency;\n\n      const tokenBIsETH = currencyB === ETHER;\n      estimate = router.estimateGas.addLiquidityETH;\n      method = router.addLiquidityETH;\n      args = [(_wrappedCurrency$addr = (_wrappedCurrency = wrappedCurrency(tokenBIsETH ? currencyA : currencyB, chainId)) === null || _wrappedCurrency === void 0 ? void 0 : _wrappedCurrency.address) !== null && _wrappedCurrency$addr !== void 0 ? _wrappedCurrency$addr : '', // token\n      (tokenBIsETH ? parsedAmountA : parsedAmountB).raw.toString(), // token desired\n      amountsMin[tokenBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(), // token min\n      amountsMin[tokenBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(), // eth min\n      account, deadline.toHexString()];\n      value = BigNumber.from((tokenBIsETH ? parsedAmountB : parsedAmountA).raw.toString());\n    } else {\n      var _wrappedCurrency$addr2, _wrappedCurrency2, _wrappedCurrency$addr3, _wrappedCurrency3;\n\n      estimate = router.estimateGas.addLiquidity;\n      method = router.addLiquidity;\n      args = [(_wrappedCurrency$addr2 = (_wrappedCurrency2 = wrappedCurrency(currencyA, chainId)) === null || _wrappedCurrency2 === void 0 ? void 0 : _wrappedCurrency2.address) !== null && _wrappedCurrency$addr2 !== void 0 ? _wrappedCurrency$addr2 : '', (_wrappedCurrency$addr3 = (_wrappedCurrency3 = wrappedCurrency(currencyB, chainId)) === null || _wrappedCurrency3 === void 0 ? void 0 : _wrappedCurrency3.address) !== null && _wrappedCurrency$addr3 !== void 0 ? _wrappedCurrency$addr3 : '', parsedAmountA.raw.toString(), parsedAmountB.raw.toString(), amountsMin[Field.CURRENCY_A].toString(), amountsMin[Field.CURRENCY_B].toString(), account, deadline.toHexString()];\n      value = null;\n    }\n\n    setAttemptingTxn(true);\n    await estimate(...args, value ? {\n      value\n    } : {}).then(estimatedGasLimit => method(...args, { ...(value ? {\n        value\n      } : {}),\n      gasLimit: calculateGasMargin(estimatedGasLimit)\n    }).then(response => {\n      var _parsedAmounts$Field$, _currencies$Field$CUR, _parsedAmounts$Field$2, _currencies$Field$CUR2;\n\n      setAttemptingTxn(false);\n      addTransaction(response, {\n        summary: `Add ${(_parsedAmounts$Field$ = parsedAmounts[Field.CURRENCY_A]) === null || _parsedAmounts$Field$ === void 0 ? void 0 : _parsedAmounts$Field$.toSignificant(3)} ${(_currencies$Field$CUR = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR === void 0 ? void 0 : _currencies$Field$CUR.symbol} and ${(_parsedAmounts$Field$2 = parsedAmounts[Field.CURRENCY_B]) === null || _parsedAmounts$Field$2 === void 0 ? void 0 : _parsedAmounts$Field$2.toSignificant(3)} ${(_currencies$Field$CUR2 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR2 === void 0 ? void 0 : _currencies$Field$CUR2.symbol}`\n      });\n      setTxHash(response.hash);\n    })).catch(err => {\n      setAttemptingTxn(false); // we only care if the error is something _other_ than the user rejected the tx\n\n      if ((err === null || err === void 0 ? void 0 : err.code) !== 4001) {\n        console.error(err);\n      }\n    });\n  }\n\n  const modalHeader = () => {\n    var _currencies$Field$CUR3, _currencies$Field$CUR4, _currencies$Field$CUR5, _currencies$Field$CUR6;\n\n    return noLiquidity ? /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        fontSize: \"48px\",\n        marginRight: \"10px\",\n        children: `${(_currencies$Field$CUR3 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR3 === void 0 ? void 0 : _currencies$Field$CUR3.symbol}/${(_currencies$Field$CUR4 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR4 === void 0 ? void 0 : _currencies$Field$CUR4.symbol}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DoubleCurrencyLogo, {\n        currency0: currencies[Field.CURRENCY_A],\n        currency1: currencies[Field.CURRENCY_B],\n        size: 30\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(AutoColumn, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"48px\",\n          marginRight: \"10px\",\n          children: liquidityMinted === null || liquidityMinted === void 0 ? void 0 : liquidityMinted.toSignificant(6)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DoubleCurrencyLogo, {\n          currency0: currencies[Field.CURRENCY_A],\n          currency1: currencies[Field.CURRENCY_B],\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"24px\",\n          children: `${(_currencies$Field$CUR5 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR5 === void 0 ? void 0 : _currencies$Field$CUR5.symbol}/${(_currencies$Field$CUR6 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR6 === void 0 ? void 0 : _currencies$Field$CUR6.symbol} Pool Tokens`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        small: true,\n        textAlign: \"left\",\n        my: \"24px\",\n        children: t('Output is estimated. If the price changes by more than %slippage%% your transaction will revert.', {\n          slippage: allowedSlippage / 100\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this);\n  };\n\n  const modalBottom = () => {\n    return /*#__PURE__*/_jsxDEV(ConfirmAddModalBottom, {\n      price: price,\n      currencies: currencies,\n      parsedAmounts: parsedAmounts,\n      noLiquidity: noLiquidity,\n      onAdd: onAdd,\n      poolTokenPercentage: poolTokenPercentage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this);\n  };\n\n  const pendingText = t('Supplying %amountA% %symbolA% and %amountB% %symbolB%', {\n    amountA: (_parsedAmounts$Field$3 = (_parsedAmounts$Field$4 = parsedAmounts[Field.CURRENCY_A]) === null || _parsedAmounts$Field$4 === void 0 ? void 0 : _parsedAmounts$Field$4.toSignificant(6)) !== null && _parsedAmounts$Field$3 !== void 0 ? _parsedAmounts$Field$3 : '',\n    symbolA: (_currencies$Field$CUR7 = (_currencies$Field$CUR8 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR8 === void 0 ? void 0 : _currencies$Field$CUR8.symbol) !== null && _currencies$Field$CUR7 !== void 0 ? _currencies$Field$CUR7 : '',\n    amountB: (_parsedAmounts$Field$5 = (_parsedAmounts$Field$6 = parsedAmounts[Field.CURRENCY_B]) === null || _parsedAmounts$Field$6 === void 0 ? void 0 : _parsedAmounts$Field$6.toSignificant(6)) !== null && _parsedAmounts$Field$5 !== void 0 ? _parsedAmounts$Field$5 : '',\n    symbolB: (_currencies$Field$CUR9 = (_currencies$Field$CUR10 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR10 === void 0 ? void 0 : _currencies$Field$CUR10.symbol) !== null && _currencies$Field$CUR9 !== void 0 ? _currencies$Field$CUR9 : ''\n  });\n  const handleCurrencyASelect = useCallback(currencyA_ => {\n    const newCurrencyIdA = currencyId(currencyA_);\n\n    if (newCurrencyIdA === currencyIdB) {\n      history.push(`/add/${currencyIdB}/${currencyIdA}`);\n    } else {\n      history.push(`/add/${newCurrencyIdA}/${currencyIdB}`);\n    }\n  }, [currencyIdB, history, currencyIdA]);\n  const handleCurrencyBSelect = useCallback(currencyB_ => {\n    const newCurrencyIdB = currencyId(currencyB_);\n\n    if (currencyIdA === newCurrencyIdB) {\n      if (currencyIdB) {\n        history.push(`/add/${currencyIdB}/${newCurrencyIdB}`);\n      } else {\n        history.push(`/add/${newCurrencyIdB}`);\n      }\n    } else {\n      history.push(`/add/${currencyIdA || 'BNB'}/${newCurrencyIdB}`);\n    }\n  }, [currencyIdA, history, currencyIdB]);\n  const handleDismissConfirmation = useCallback(() => {\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onFieldAInput('');\n    }\n\n    setTxHash('');\n  }, [onFieldAInput, txHash]);\n  const addIsUnsupported = useIsTransactionUnsupported(currencies === null || currencies === void 0 ? void 0 : currencies.CURRENCY_A, currencies === null || currencies === void 0 ? void 0 : currencies.CURRENCY_B);\n  const [onPresentAddLiquidityModal] = useModal( /*#__PURE__*/_jsxDEV(TransactionConfirmationModal, {\n    title: noLiquidity ? t('You are creating a pool') : t('You will receive'),\n    customOnDismiss: handleDismissConfirmation,\n    attemptingTxn: attemptingTxn,\n    hash: txHash,\n    content: () => /*#__PURE__*/_jsxDEV(ConfirmationModalContent, {\n      topContent: modalHeader,\n      bottomContent: modalBottom\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 22\n    }, this),\n    pendingText: pendingText,\n    currencyToAdd: pair === null || pair === void 0 ? void 0 : pair.liquidityToken\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this), true, true, 'addLiquidityModal');\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: [/*#__PURE__*/_jsxDEV(AppBody, {\n      children: [/*#__PURE__*/_jsxDEV(AppHeader, {\n        title: t('Add Liquidity'),\n        subtitle: t('Add liquidity to receive LP tokens'),\n        helper: t('Liquidity providers earn a 0.17% trading fee on all trades made for that token pair, proportional to their share of the liquidity pool.'),\n        backTo: \"/pool\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"20px\",\n          children: [noLiquidity && /*#__PURE__*/_jsxDEV(ColumnCenter, {\n            children: /*#__PURE__*/_jsxDEV(Message, {\n              variant: \"warning\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  bold: true,\n                  mb: \"8px\",\n                  children: t('You are the first liquidity provider.')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  mb: \"8px\",\n                  children: t('The ratio of tokens you add will set the price of this pool.')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  children: t('Once you are happy with the rate click supply to review.')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n            value: formattedAmounts[Field.CURRENCY_A],\n            onUserInput: onFieldAInput,\n            onMax: () => {\n              var _maxAmounts$Field$CUR, _maxAmounts$Field$CUR2;\n\n              onFieldAInput((_maxAmounts$Field$CUR = (_maxAmounts$Field$CUR2 = maxAmounts[Field.CURRENCY_A]) === null || _maxAmounts$Field$CUR2 === void 0 ? void 0 : _maxAmounts$Field$CUR2.toExact()) !== null && _maxAmounts$Field$CUR !== void 0 ? _maxAmounts$Field$CUR : '');\n            },\n            onCurrencySelect: handleCurrencyASelect,\n            showMaxButton: !atMaxAmounts[Field.CURRENCY_A],\n            currency: currencies[Field.CURRENCY_A],\n            id: \"add-liquidity-input-tokena\",\n            showCommonBases: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ColumnCenter, {\n            children: /*#__PURE__*/_jsxDEV(AddIcon, {\n              width: \"16px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n            value: formattedAmounts[Field.CURRENCY_B],\n            onUserInput: onFieldBInput,\n            onCurrencySelect: handleCurrencyBSelect,\n            onMax: () => {\n              var _maxAmounts$Field$CUR3, _maxAmounts$Field$CUR4;\n\n              onFieldBInput((_maxAmounts$Field$CUR3 = (_maxAmounts$Field$CUR4 = maxAmounts[Field.CURRENCY_B]) === null || _maxAmounts$Field$CUR4 === void 0 ? void 0 : _maxAmounts$Field$CUR4.toExact()) !== null && _maxAmounts$Field$CUR3 !== void 0 ? _maxAmounts$Field$CUR3 : '');\n            },\n            showMaxButton: !atMaxAmounts[Field.CURRENCY_B],\n            currency: currencies[Field.CURRENCY_B],\n            id: \"add-liquidity-input-tokenb\",\n            showCommonBases: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), currencies[Field.CURRENCY_A] && currencies[Field.CURRENCY_B] && pairState !== PairState.INVALID && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(LightCard, {\n              padding: \"0px\",\n              borderRadius: \"20px\",\n              children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n                padding: \"1rem\",\n                children: /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"14px\",\n                  children: noLiquidity ? t('Initial prices and pool share') : t('Prices and pool share')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this), ' ', /*#__PURE__*/_jsxDEV(LightCard, {\n                padding: \"1rem\",\n                borderRadius: \"20px\",\n                children: /*#__PURE__*/_jsxDEV(PoolPriceBar, {\n                  currencies: currencies,\n                  poolTokenPercentage: poolTokenPercentage,\n                  noLiquidity: noLiquidity,\n                  price: price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this)\n          }, void 0, false), addIsUnsupported ? /*#__PURE__*/_jsxDEV(Button, {\n            disabled: true,\n            mb: \"4px\",\n            children: t('Unsupported Asset')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this) : !account ? /*#__PURE__*/_jsxDEV(ConnectWalletButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(AutoColumn, {\n            gap: \"md\",\n            children: [(approvalA === ApprovalState.NOT_APPROVED || approvalA === ApprovalState.PENDING || approvalB === ApprovalState.NOT_APPROVED || approvalB === ApprovalState.PENDING) && isValid && /*#__PURE__*/_jsxDEV(RowBetween, {\n              children: [approvalA !== ApprovalState.APPROVED && /*#__PURE__*/_jsxDEV(Button, {\n                onClick: approveACallback,\n                disabled: approvalA === ApprovalState.PENDING,\n                width: approvalB !== ApprovalState.APPROVED ? '48%' : '100%',\n                children: approvalA === ApprovalState.PENDING ? /*#__PURE__*/_jsxDEV(Dots, {\n                  children: t('Enabling %asset%', {\n                    asset: (_currencies$Field$CUR11 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR11 === void 0 ? void 0 : _currencies$Field$CUR11.symbol\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 29\n                }, this) : t('Enable %asset%', {\n                  asset: (_currencies$Field$CUR12 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR12 === void 0 ? void 0 : _currencies$Field$CUR12.symbol\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 25\n              }, this), approvalB !== ApprovalState.APPROVED && /*#__PURE__*/_jsxDEV(Button, {\n                onClick: approveBCallback,\n                disabled: approvalB === ApprovalState.PENDING,\n                width: approvalA !== ApprovalState.APPROVED ? '48%' : '100%',\n                children: approvalB === ApprovalState.PENDING ? /*#__PURE__*/_jsxDEV(Dots, {\n                  children: t('Enabling %asset%', {\n                    asset: (_currencies$Field$CUR13 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR13 === void 0 ? void 0 : _currencies$Field$CUR13.symbol\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 29\n                }, this) : t('Enable %asset%', {\n                  asset: (_currencies$Field$CUR14 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR14 === void 0 ? void 0 : _currencies$Field$CUR14.symbol\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: !isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B] ? 'danger' : 'primary',\n              onClick: () => {\n                if (expertMode) {\n                  onAdd();\n                } else {\n                  onPresentAddLiquidityModal();\n                }\n              },\n              disabled: !isValid || approvalA !== ApprovalState.APPROVED || approvalB !== ApprovalState.APPROVED,\n              children: error !== null && error !== void 0 ? error : t('Supply')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), !addIsUnsupported ? pair && !noLiquidity && pairState !== PairState.INVALID ? /*#__PURE__*/_jsxDEV(AutoColumn, {\n      style: {\n        minWidth: '20rem',\n        width: '100%',\n        maxWidth: '400px',\n        marginTop: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(MinimalPositionCard, {\n        showUnwrapped: oneCurrencyIsWETH,\n        pair: pair\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 11\n    }, this) : null : /*#__PURE__*/_jsxDEV(UnsupportedCurrencyFooter, {\n      currencies: [currencies.CURRENCY_A, currencies.CURRENCY_B]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddLiquidity, \"3wP3NXxarL7wM3VTSu+1t0I4pCQ=\", false, function () {\n  return [useActiveWeb3React, useTranslation, useCurrency, useCurrency, useIsExpertMode, useMintState, useDerivedMintInfo, useMintActionHandlers, useTransactionDeadline, useUserSlippageTolerance, useApproveCallback, useApproveCallback, useTransactionAdder, useIsTransactionUnsupported, useModal];\n});\n\n_c = AddLiquidity;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddLiquidity\");","map":{"version":3,"sources":["C:/Users/Devrim/Documents/FRANKswapUIforProspBlast/src/views/AddLiquidity/index.tsx"],"names":["React","useCallback","useState","BigNumber","currencyEquals","ETHER","WETH","Button","Text","Flex","AddIcon","CardBody","Message","useModal","useIsTransactionUnsupported","useTranslation","UnsupportedCurrencyFooter","useActiveWeb3React","LightCard","AutoColumn","ColumnCenter","TransactionConfirmationModal","ConfirmationModalContent","CurrencyInputPanel","DoubleCurrencyLogo","AppHeader","AppBody","MinimalPositionCard","Row","RowBetween","ConnectWalletButton","ROUTER_ADDRESS","PairState","useCurrency","ApprovalState","useApproveCallback","useTransactionDeadline","Field","useDerivedMintInfo","useMintActionHandlers","useMintState","useTransactionAdder","useIsExpertMode","useUserSlippageTolerance","calculateGasMargin","calculateSlippageAmount","getRouterContract","maxAmountSpend","wrappedCurrency","Dots","ConfirmAddModalBottom","currencyId","PoolPriceBar","Page","AddLiquidity","match","params","currencyIdA","currencyIdB","history","account","chainId","library","t","currencyA","currencyB","oneCurrencyIsWETH","Boolean","expertMode","independentField","typedValue","otherTypedValue","dependentField","currencies","pair","pairState","currencyBalances","parsedAmounts","price","noLiquidity","liquidityMinted","poolTokenPercentage","error","undefined","onFieldAInput","onFieldBInput","isValid","attemptingTxn","setAttemptingTxn","deadline","allowedSlippage","txHash","setTxHash","formattedAmounts","toSignificant","maxAmounts","CURRENCY_A","CURRENCY_B","reduce","accumulator","field","atMaxAmounts","equalTo","approvalA","approveACallback","approvalB","approveBCallback","addTransaction","onAdd","router","parsedAmountA","parsedAmountB","amountsMin","estimate","method","args","value","tokenBIsETH","estimateGas","addLiquidityETH","address","raw","toString","toHexString","from","addLiquidity","then","estimatedGasLimit","gasLimit","response","summary","symbol","hash","catch","err","code","console","modalHeader","slippage","modalBottom","pendingText","amountA","symbolA","amountB","symbolB","handleCurrencyASelect","currencyA_","newCurrencyIdA","push","handleCurrencyBSelect","currencyB_","newCurrencyIdB","handleDismissConfirmation","addIsUnsupported","onPresentAddLiquidityModal","liquidityToken","toExact","INVALID","NOT_APPROVED","PENDING","APPROVED","asset","minWidth","width","maxWidth","marginTop"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\r\nimport { BigNumber } from '@ethersproject/bignumber'\r\nimport { TransactionResponse } from '@ethersproject/providers'\r\nimport { Currency, currencyEquals, ETHER, TokenAmount, WETH } from '@pancakeswap/sdk'\r\nimport { Button, Text, Flex, AddIcon, CardBody, Message, useModal } from '@pancakeswap/uikit'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { useIsTransactionUnsupported } from 'hooks/Trades'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport UnsupportedCurrencyFooter from 'components/UnsupportedCurrencyFooter'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport { LightCard } from '../../components/Card'\r\nimport { AutoColumn, ColumnCenter } from '../../components/Layout/Column'\r\nimport TransactionConfirmationModal, { ConfirmationModalContent } from '../../components/TransactionConfirmationModal'\r\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\r\nimport { DoubleCurrencyLogo } from '../../components/Logo'\r\nimport { AppHeader, AppBody } from '../../components/App'\r\nimport { MinimalPositionCard } from '../../components/PositionCard'\r\nimport Row, { RowBetween } from '../../components/Layout/Row'\r\nimport ConnectWalletButton from '../../components/ConnectWalletButton'\r\n\r\nimport { ROUTER_ADDRESS } from '../../config/constants'\r\nimport { PairState } from '../../hooks/usePairs'\r\nimport { useCurrency } from '../../hooks/Tokens'\r\nimport { ApprovalState, useApproveCallback } from '../../hooks/useApproveCallback'\r\nimport useTransactionDeadline from '../../hooks/useTransactionDeadline'\r\nimport { Field } from '../../state/mint/actions'\r\nimport { useDerivedMintInfo, useMintActionHandlers, useMintState } from '../../state/mint/hooks'\r\n\r\nimport { useTransactionAdder } from '../../state/transactions/hooks'\r\nimport { useIsExpertMode, useUserSlippageTolerance } from '../../state/user/hooks'\r\nimport { calculateGasMargin, calculateSlippageAmount, getRouterContract } from '../../utils'\r\nimport { maxAmountSpend } from '../../utils/maxAmountSpend'\r\nimport { wrappedCurrency } from '../../utils/wrappedCurrency'\r\nimport Dots from '../../components/Loader/Dots'\r\nimport ConfirmAddModalBottom from './ConfirmAddModalBottom'\r\nimport { currencyId } from '../../utils/currencyId'\r\nimport PoolPriceBar from './PoolPriceBar'\r\nimport Page from '../Page'\r\n\r\nexport default function AddLiquidity({\r\n  match: {\r\n    params: { currencyIdA, currencyIdB },\r\n  },\r\n  history,\r\n}: RouteComponentProps<{ currencyIdA?: string; currencyIdB?: string }>) {\r\n  const { account, chainId, library } = useActiveWeb3React()\r\n  const { t } = useTranslation()\r\n\r\n  const currencyA = useCurrency(currencyIdA)\r\n  const currencyB = useCurrency(currencyIdB)\r\n\r\n  const oneCurrencyIsWETH = Boolean(\r\n    chainId &&\r\n      ((currencyA && currencyEquals(currencyA, WETH[chainId])) ||\r\n        (currencyB && currencyEquals(currencyB, WETH[chainId]))),\r\n  )\r\n\r\n  const expertMode = useIsExpertMode()\r\n\r\n  // mint state\r\n  const { independentField, typedValue, otherTypedValue } = useMintState()\r\n  const {\r\n    dependentField,\r\n    currencies,\r\n    pair,\r\n    pairState,\r\n    currencyBalances,\r\n    parsedAmounts,\r\n    price,\r\n    noLiquidity,\r\n    liquidityMinted,\r\n    poolTokenPercentage,\r\n    error,\r\n  } = useDerivedMintInfo(currencyA ?? undefined, currencyB ?? undefined)\r\n\r\n  const { onFieldAInput, onFieldBInput } = useMintActionHandlers(noLiquidity)\r\n\r\n  const isValid = !error\r\n\r\n  // modal and loading\r\n  const [attemptingTxn, setAttemptingTxn] = useState<boolean>(false) // clicked confirm\r\n\r\n  // txn values\r\n  const deadline = useTransactionDeadline() // custom from users settings\r\n  const [allowedSlippage] = useUserSlippageTolerance() // custom from users\r\n  const [txHash, setTxHash] = useState<string>('')\r\n\r\n  // get formatted amounts\r\n  const formattedAmounts = {\r\n    [independentField]: typedValue,\r\n    [dependentField]: noLiquidity ? otherTypedValue : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\r\n  }\r\n\r\n  // get the max amounts user can add\r\n  const maxAmounts: { [field in Field]?: TokenAmount } = [Field.CURRENCY_A, Field.CURRENCY_B].reduce(\r\n    (accumulator, field) => {\r\n      return {\r\n        ...accumulator,\r\n        [field]: maxAmountSpend(currencyBalances[field]),\r\n      }\r\n    },\r\n    {},\r\n  )\r\n\r\n  const atMaxAmounts: { [field in Field]?: TokenAmount } = [Field.CURRENCY_A, Field.CURRENCY_B].reduce(\r\n    (accumulator, field) => {\r\n      return {\r\n        ...accumulator,\r\n        [field]: maxAmounts[field]?.equalTo(parsedAmounts[field] ?? '0'),\r\n      }\r\n    },\r\n    {},\r\n  )\r\n\r\n  // check whether the user has approved the router on the tokens\r\n  const [approvalA, approveACallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_A], ROUTER_ADDRESS)\r\n  const [approvalB, approveBCallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_B], ROUTER_ADDRESS)\r\n\r\n  const addTransaction = useTransactionAdder()\r\n\r\n  async function onAdd() {\r\n    if (!chainId || !library || !account) return\r\n    const router = getRouterContract(chainId, library, account)\r\n\r\n    const { [Field.CURRENCY_A]: parsedAmountA, [Field.CURRENCY_B]: parsedAmountB } = parsedAmounts\r\n    if (!parsedAmountA || !parsedAmountB || !currencyA || !currencyB || !deadline) {\r\n      return\r\n    }\r\n\r\n    const amountsMin = {\r\n      [Field.CURRENCY_A]: calculateSlippageAmount(parsedAmountA, noLiquidity ? 0 : allowedSlippage)[0],\r\n      [Field.CURRENCY_B]: calculateSlippageAmount(parsedAmountB, noLiquidity ? 0 : allowedSlippage)[0],\r\n    }\r\n\r\n    let estimate\r\n    let method: (...args: any) => Promise<TransactionResponse>\r\n    let args: Array<string | string[] | number>\r\n    let value: BigNumber | null\r\n    if (currencyA === ETHER || currencyB === ETHER) {\r\n      const tokenBIsETH = currencyB === ETHER\r\n      estimate = router.estimateGas.addLiquidityETH\r\n      method = router.addLiquidityETH\r\n      args = [\r\n        wrappedCurrency(tokenBIsETH ? currencyA : currencyB, chainId)?.address ?? '', // token\r\n        (tokenBIsETH ? parsedAmountA : parsedAmountB).raw.toString(), // token desired\r\n        amountsMin[tokenBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(), // token min\r\n        amountsMin[tokenBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(), // eth min\r\n        account,\r\n        deadline.toHexString(),\r\n      ]\r\n      value = BigNumber.from((tokenBIsETH ? parsedAmountB : parsedAmountA).raw.toString())\r\n    } else {\r\n      estimate = router.estimateGas.addLiquidity\r\n      method = router.addLiquidity\r\n      args = [\r\n        wrappedCurrency(currencyA, chainId)?.address ?? '',\r\n        wrappedCurrency(currencyB, chainId)?.address ?? '',\r\n        parsedAmountA.raw.toString(),\r\n        parsedAmountB.raw.toString(),\r\n        amountsMin[Field.CURRENCY_A].toString(),\r\n        amountsMin[Field.CURRENCY_B].toString(),\r\n        account,\r\n        deadline.toHexString(),\r\n      ]\r\n      value = null\r\n    }\r\n\r\n    setAttemptingTxn(true)\r\n    await estimate(...args, value ? { value } : {})\r\n      .then((estimatedGasLimit) =>\r\n        method(...args, {\r\n          ...(value ? { value } : {}),\r\n          gasLimit: calculateGasMargin(estimatedGasLimit),\r\n        }).then((response) => {\r\n          setAttemptingTxn(false)\r\n\r\n          addTransaction(response, {\r\n            summary: `Add ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(3)} ${\r\n              currencies[Field.CURRENCY_A]?.symbol\r\n            } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(3)} ${currencies[Field.CURRENCY_B]?.symbol}`,\r\n          })\r\n\r\n          setTxHash(response.hash)\r\n        }),\r\n      )\r\n      .catch((err) => {\r\n        setAttemptingTxn(false)\r\n        // we only care if the error is something _other_ than the user rejected the tx\r\n        if (err?.code !== 4001) {\r\n          console.error(err)\r\n        }\r\n      })\r\n  }\r\n\r\n  const modalHeader = () => {\r\n    return noLiquidity ? (\r\n      <Flex alignItems=\"center\">\r\n        <Text fontSize=\"48px\" marginRight=\"10px\">\r\n          {`${currencies[Field.CURRENCY_A]?.symbol}/${currencies[Field.CURRENCY_B]?.symbol}`}\r\n        </Text>\r\n        <DoubleCurrencyLogo\r\n          currency0={currencies[Field.CURRENCY_A]}\r\n          currency1={currencies[Field.CURRENCY_B]}\r\n          size={30}\r\n        />\r\n      </Flex>\r\n    ) : (\r\n      <AutoColumn>\r\n        <Flex alignItems=\"center\">\r\n          <Text fontSize=\"48px\" marginRight=\"10px\">\r\n            {liquidityMinted?.toSignificant(6)}\r\n          </Text>\r\n          <DoubleCurrencyLogo\r\n            currency0={currencies[Field.CURRENCY_A]}\r\n            currency1={currencies[Field.CURRENCY_B]}\r\n            size={30}\r\n          />\r\n        </Flex>\r\n        <Row>\r\n          <Text fontSize=\"24px\">\r\n            {`${currencies[Field.CURRENCY_A]?.symbol}/${currencies[Field.CURRENCY_B]?.symbol} Pool Tokens`}\r\n          </Text>\r\n        </Row>\r\n        <Text small textAlign=\"left\" my=\"24px\">\r\n          {t('Output is estimated. If the price changes by more than %slippage%% your transaction will revert.', {\r\n            slippage: allowedSlippage / 100,\r\n          })}\r\n        </Text>\r\n      </AutoColumn>\r\n    )\r\n  }\r\n\r\n  const modalBottom = () => {\r\n    return (\r\n      <ConfirmAddModalBottom\r\n        price={price}\r\n        currencies={currencies}\r\n        parsedAmounts={parsedAmounts}\r\n        noLiquidity={noLiquidity}\r\n        onAdd={onAdd}\r\n        poolTokenPercentage={poolTokenPercentage}\r\n      />\r\n    )\r\n  }\r\n\r\n  const pendingText = t('Supplying %amountA% %symbolA% and %amountB% %symbolB%', {\r\n    amountA: parsedAmounts[Field.CURRENCY_A]?.toSignificant(6) ?? '',\r\n    symbolA: currencies[Field.CURRENCY_A]?.symbol ?? '',\r\n    amountB: parsedAmounts[Field.CURRENCY_B]?.toSignificant(6) ?? '',\r\n    symbolB: currencies[Field.CURRENCY_B]?.symbol ?? '',\r\n  })\r\n\r\n  const handleCurrencyASelect = useCallback(\r\n    (currencyA_: Currency) => {\r\n      const newCurrencyIdA = currencyId(currencyA_)\r\n      if (newCurrencyIdA === currencyIdB) {\r\n        history.push(`/add/${currencyIdB}/${currencyIdA}`)\r\n      } else {\r\n        history.push(`/add/${newCurrencyIdA}/${currencyIdB}`)\r\n      }\r\n    },\r\n    [currencyIdB, history, currencyIdA],\r\n  )\r\n  const handleCurrencyBSelect = useCallback(\r\n    (currencyB_: Currency) => {\r\n      const newCurrencyIdB = currencyId(currencyB_)\r\n      if (currencyIdA === newCurrencyIdB) {\r\n        if (currencyIdB) {\r\n          history.push(`/add/${currencyIdB}/${newCurrencyIdB}`)\r\n        } else {\r\n          history.push(`/add/${newCurrencyIdB}`)\r\n        }\r\n      } else {\r\n        history.push(`/add/${currencyIdA || 'BNB'}/${newCurrencyIdB}`)\r\n      }\r\n    },\r\n    [currencyIdA, history, currencyIdB],\r\n  )\r\n\r\n  const handleDismissConfirmation = useCallback(() => {\r\n    // if there was a tx hash, we want to clear the input\r\n    if (txHash) {\r\n      onFieldAInput('')\r\n    }\r\n    setTxHash('')\r\n  }, [onFieldAInput, txHash])\r\n\r\n  const addIsUnsupported = useIsTransactionUnsupported(currencies?.CURRENCY_A, currencies?.CURRENCY_B)\r\n\r\n  const [onPresentAddLiquidityModal] = useModal(\r\n    <TransactionConfirmationModal\r\n      title={noLiquidity ? t('You are creating a pool') : t('You will receive')}\r\n      customOnDismiss={handleDismissConfirmation}\r\n      attemptingTxn={attemptingTxn}\r\n      hash={txHash}\r\n      content={() => <ConfirmationModalContent topContent={modalHeader} bottomContent={modalBottom} />}\r\n      pendingText={pendingText}\r\n      currencyToAdd={pair?.liquidityToken}\r\n    />,\r\n    true,\r\n    true,\r\n    'addLiquidityModal',\r\n  )\r\n\r\n  return (\r\n    <Page>\r\n      <AppBody>\r\n        <AppHeader\r\n          title={t('Add Liquidity')}\r\n          subtitle={t('Add liquidity to receive LP tokens')}\r\n          helper={t(\r\n            'Liquidity providers earn a 0.17% trading fee on all trades made for that token pair, proportional to their share of the liquidity pool.',\r\n          )}\r\n          backTo=\"/pool\"\r\n        />\r\n        <CardBody>\r\n          <AutoColumn gap=\"20px\">\r\n            {noLiquidity && (\r\n              <ColumnCenter>\r\n                <Message variant=\"warning\">\r\n                  <div>\r\n                    <Text bold mb=\"8px\">\r\n                      {t('You are the first liquidity provider.')}\r\n                    </Text>\r\n                    <Text mb=\"8px\">{t('The ratio of tokens you add will set the price of this pool.')}</Text>\r\n                    <Text>{t('Once you are happy with the rate click supply to review.')}</Text>\r\n                  </div>\r\n                </Message>\r\n              </ColumnCenter>\r\n            )}\r\n            <CurrencyInputPanel\r\n              value={formattedAmounts[Field.CURRENCY_A]}\r\n              onUserInput={onFieldAInput}\r\n              onMax={() => {\r\n                onFieldAInput(maxAmounts[Field.CURRENCY_A]?.toExact() ?? '')\r\n              }}\r\n              onCurrencySelect={handleCurrencyASelect}\r\n              showMaxButton={!atMaxAmounts[Field.CURRENCY_A]}\r\n              currency={currencies[Field.CURRENCY_A]}\r\n              id=\"add-liquidity-input-tokena\"\r\n              showCommonBases\r\n            />\r\n            <ColumnCenter>\r\n              <AddIcon width=\"16px\" />\r\n            </ColumnCenter>\r\n            <CurrencyInputPanel\r\n              value={formattedAmounts[Field.CURRENCY_B]}\r\n              onUserInput={onFieldBInput}\r\n              onCurrencySelect={handleCurrencyBSelect}\r\n              onMax={() => {\r\n                onFieldBInput(maxAmounts[Field.CURRENCY_B]?.toExact() ?? '')\r\n              }}\r\n              showMaxButton={!atMaxAmounts[Field.CURRENCY_B]}\r\n              currency={currencies[Field.CURRENCY_B]}\r\n              id=\"add-liquidity-input-tokenb\"\r\n              showCommonBases\r\n            />\r\n            {currencies[Field.CURRENCY_A] && currencies[Field.CURRENCY_B] && pairState !== PairState.INVALID && (\r\n              <>\r\n                <LightCard padding=\"0px\" borderRadius=\"20px\">\r\n                  <RowBetween padding=\"1rem\">\r\n                    <Text fontSize=\"14px\">\r\n                      {noLiquidity ? t('Initial prices and pool share') : t('Prices and pool share')}\r\n                    </Text>\r\n                  </RowBetween>{' '}\r\n                  <LightCard padding=\"1rem\" borderRadius=\"20px\">\r\n                    <PoolPriceBar\r\n                      currencies={currencies}\r\n                      poolTokenPercentage={poolTokenPercentage}\r\n                      noLiquidity={noLiquidity}\r\n                      price={price}\r\n                    />\r\n                  </LightCard>\r\n                </LightCard>\r\n              </>\r\n            )}\r\n\r\n            {addIsUnsupported ? (\r\n              <Button disabled mb=\"4px\">\r\n                {t('Unsupported Asset')}\r\n              </Button>\r\n            ) : !account ? (\r\n              <ConnectWalletButton />\r\n            ) : (\r\n              <AutoColumn gap=\"md\">\r\n                {(approvalA === ApprovalState.NOT_APPROVED ||\r\n                  approvalA === ApprovalState.PENDING ||\r\n                  approvalB === ApprovalState.NOT_APPROVED ||\r\n                  approvalB === ApprovalState.PENDING) &&\r\n                  isValid && (\r\n                    <RowBetween>\r\n                      {approvalA !== ApprovalState.APPROVED && (\r\n                        <Button\r\n                          onClick={approveACallback}\r\n                          disabled={approvalA === ApprovalState.PENDING}\r\n                          width={approvalB !== ApprovalState.APPROVED ? '48%' : '100%'}\r\n                        >\r\n                          {approvalA === ApprovalState.PENDING ? (\r\n                            <Dots>{t('Enabling %asset%', { asset: currencies[Field.CURRENCY_A]?.symbol })}</Dots>\r\n                          ) : (\r\n                            t('Enable %asset%', { asset: currencies[Field.CURRENCY_A]?.symbol })\r\n                          )}\r\n                        </Button>\r\n                      )}\r\n                      {approvalB !== ApprovalState.APPROVED && (\r\n                        <Button\r\n                          onClick={approveBCallback}\r\n                          disabled={approvalB === ApprovalState.PENDING}\r\n                          width={approvalA !== ApprovalState.APPROVED ? '48%' : '100%'}\r\n                        >\r\n                          {approvalB === ApprovalState.PENDING ? (\r\n                            <Dots>{t('Enabling %asset%', { asset: currencies[Field.CURRENCY_B]?.symbol })}</Dots>\r\n                          ) : (\r\n                            t('Enable %asset%', { asset: currencies[Field.CURRENCY_B]?.symbol })\r\n                          )}\r\n                        </Button>\r\n                      )}\r\n                    </RowBetween>\r\n                  )}\r\n                <Button\r\n                  variant={\r\n                    !isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B]\r\n                      ? 'danger'\r\n                      : 'primary'\r\n                  }\r\n                  onClick={() => {\r\n                    if (expertMode) {\r\n                      onAdd()\r\n                    } else {\r\n                      onPresentAddLiquidityModal()\r\n                    }\r\n                  }}\r\n                  disabled={!isValid || approvalA !== ApprovalState.APPROVED || approvalB !== ApprovalState.APPROVED}\r\n                >\r\n                  {error ?? t('Supply')}\r\n                </Button>\r\n              </AutoColumn>\r\n            )}\r\n          </AutoColumn>\r\n        </CardBody>\r\n      </AppBody>\r\n      {!addIsUnsupported ? (\r\n        pair && !noLiquidity && pairState !== PairState.INVALID ? (\r\n          <AutoColumn style={{ minWidth: '20rem', width: '100%', maxWidth: '400px', marginTop: '1rem' }}>\r\n            <MinimalPositionCard showUnwrapped={oneCurrencyIsWETH} pair={pair} />\r\n          </AutoColumn>\r\n        ) : null\r\n      ) : (\r\n        <UnsupportedCurrencyFooter currencies={[currencies.CURRENCY_A, currencies.CURRENCY_B]} />\r\n      )}\r\n    </Page>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}