{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/frkul/Documents/swapUI_pancake-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect,useState}from'react';import{Flex,Spinner,Text}from'@pancakeswap/uikit';import{useWeb3React}from'@web3-react/core';import styled from'styled-components';import ConnectWalletButton from'components/ConnectWalletButton';import{useTranslation}from'contexts/Localization';import{fetchHistory}from'state/predictions';import{getUnclaimedWinningBets}from'state/predictions/helpers';import{HistoryFilter}from'state/types';import{useAppDispatch}from'state';import{useGetCurrentEpoch,useGetHistoryByAccount,useGetHistoryFilter,useGetIsFetchingHistory,useIsHistoryPaneOpen}from'state/hooks';import{Header,HistoryTabs}from'./components/History';import RoundsTab from'./components/History/RoundsTab';import PnlTab from'./components/History/PnlTab/PnlTab';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StyledHistory=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n\"])),_ref=>{let{theme}=_ref;return theme.card.background;});const BetWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  height: 100%;\\n  overflow-y: auto;\\n  position: relative;\\n\"])));const SpinnerWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  background-color: \",\";\\n  display: flex;\\n  left: 0;\\n  height: 100%;\\n  justify-content: center;\\n  position: absolute;\\n  top: 0;\\n  width: 100%;\\n\"])),_ref2=>{let{theme}=_ref2;return theme.card.background;});const History=()=>{const{account}=useWeb3React();const dispatch=useAppDispatch();const isHistoryPaneOpen=useIsHistoryPaneOpen();const isFetchingHistory=useGetIsFetchingHistory();const historyFilter=useGetHistoryFilter();const currentEpoch=useGetCurrentEpoch();const{t}=useTranslation();const bets=useGetHistoryByAccount(account);const[activeTab,setActiveTab]=useState(HistoryTabs.ROUNDS);useEffect(()=>{if(account&&isHistoryPaneOpen){dispatch(fetchHistory({account}));}},[account,currentEpoch,isHistoryPaneOpen,dispatch]);// Currently the api cannot filter by unclaimed AND won so we do it here\n// when the user has selected Uncollected only include positions they won\nconst results=historyFilter===HistoryFilter.UNCOLLECTED?getUnclaimedWinningBets(bets):bets;const hasBetHistory=results&&results.length>0;let activeTabComponent=null;switch(activeTab){case HistoryTabs.PNL:activeTabComponent=/*#__PURE__*/_jsx(PnlTab,{hasBetHistory:hasBetHistory,bets:results});break;case HistoryTabs.ROUNDS:default:activeTabComponent=/*#__PURE__*/_jsx(RoundsTab,{hasBetHistory:hasBetHistory,bets:results});break;}if(!account){activeTabComponent=/*#__PURE__*/_jsxs(Flex,{justifyContent:\"center\",alignItems:\"center\",flexDirection:\"column\",mt:\"32px\",children:[/*#__PURE__*/_jsx(ConnectWalletButton,{}),/*#__PURE__*/_jsx(Text,{mt:\"8px\",children:t('Connect your wallet to view your prediction history')})]});}return/*#__PURE__*/_jsxs(StyledHistory,{children:[/*#__PURE__*/_jsx(Header,{activeTab:activeTab,setActiveTab:setActiveTab}),/*#__PURE__*/_jsx(BetWrapper,{children:isFetchingHistory?/*#__PURE__*/_jsx(SpinnerWrapper,{children:/*#__PURE__*/_jsx(Spinner,{size:72})}):activeTabComponent})]});};export default History;","map":{"version":3,"names":["React","useEffect","useState","Flex","Spinner","Text","useWeb3React","styled","ConnectWalletButton","useTranslation","fetchHistory","getUnclaimedWinningBets","HistoryFilter","useAppDispatch","useGetCurrentEpoch","useGetHistoryByAccount","useGetHistoryFilter","useGetIsFetchingHistory","useIsHistoryPaneOpen","Header","HistoryTabs","RoundsTab","PnlTab","jsx","_jsx","jsxs","_jsxs","StyledHistory","div","_templateObject","_taggedTemplateLiteral","_ref","theme","card","background","BetWrapper","_templateObject2","SpinnerWrapper","_templateObject3","_ref2","History","account","dispatch","isHistoryPaneOpen","isFetchingHistory","historyFilter","currentEpoch","t","bets","activeTab","setActiveTab","ROUNDS","results","UNCOLLECTED","hasBetHistory","length","activeTabComponent","PNL","justifyContent","alignItems","flexDirection","mt","children","size"],"sources":["C:/Users/frkul/Documents/swapUI_pancake-frontend/src/views/Predictions/History.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Flex, Spinner, Text } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { fetchHistory } from 'state/predictions'\r\nimport { getUnclaimedWinningBets } from 'state/predictions/helpers'\r\nimport { HistoryFilter } from 'state/types'\r\nimport { useAppDispatch } from 'state'\r\nimport {\r\n  useGetCurrentEpoch,\r\n  useGetHistoryByAccount,\r\n  useGetHistoryFilter,\r\n  useGetIsFetchingHistory,\r\n  useIsHistoryPaneOpen,\r\n} from 'state/hooks'\r\nimport { Header, HistoryTabs } from './components/History'\r\nimport RoundsTab from './components/History/RoundsTab'\r\nimport PnlTab from './components/History/PnlTab/PnlTab'\r\n\r\nconst StyledHistory = styled.div`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`\r\n\r\nconst BetWrapper = styled.div`\r\n  flex: 1;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  position: relative;\r\n`\r\n\r\nconst SpinnerWrapper = styled.div`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  left: 0;\r\n  height: 100%;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n`\r\n\r\nconst History = () => {\r\n  const { account } = useWeb3React()\r\n  const dispatch = useAppDispatch()\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n  const historyFilter = useGetHistoryFilter()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const { t } = useTranslation()\r\n  const bets = useGetHistoryByAccount(account)\r\n  const [activeTab, setActiveTab] = useState(HistoryTabs.ROUNDS)\r\n\r\n  useEffect(() => {\r\n    if (account && isHistoryPaneOpen) {\r\n      dispatch(fetchHistory({ account }))\r\n    }\r\n  }, [account, currentEpoch, isHistoryPaneOpen, dispatch])\r\n\r\n  // Currently the api cannot filter by unclaimed AND won so we do it here\r\n  // when the user has selected Uncollected only include positions they won\r\n  const results = historyFilter === HistoryFilter.UNCOLLECTED ? getUnclaimedWinningBets(bets) : bets\r\n\r\n  const hasBetHistory = results && results.length > 0\r\n\r\n  let activeTabComponent = null\r\n\r\n  switch (activeTab) {\r\n    case HistoryTabs.PNL:\r\n      activeTabComponent = <PnlTab hasBetHistory={hasBetHistory} bets={results} />\r\n      break\r\n    case HistoryTabs.ROUNDS:\r\n    default:\r\n      activeTabComponent = <RoundsTab hasBetHistory={hasBetHistory} bets={results} />\r\n      break\r\n  }\r\n\r\n  if (!account) {\r\n    activeTabComponent = (\r\n      <Flex justifyContent=\"center\" alignItems=\"center\" flexDirection=\"column\" mt=\"32px\">\r\n        <ConnectWalletButton />\r\n        <Text mt=\"8px\">{t('Connect your wallet to view your prediction history')}</Text>\r\n      </Flex>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <StyledHistory>\r\n      <Header activeTab={activeTab} setActiveTab={setActiveTab} />\r\n      <BetWrapper>\r\n        {isFetchingHistory ? (\r\n          <SpinnerWrapper>\r\n            <Spinner size={72} />\r\n          </SpinnerWrapper>\r\n        ) : (\r\n          activeTabComponent\r\n        )}\r\n      </BetWrapper>\r\n    </StyledHistory>\r\n  )\r\n}\r\n\r\nexport default History\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}